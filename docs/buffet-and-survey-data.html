<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 Buffet and survey data | Data Analysis in R for Sensory and Consumer Science</title>
  <meta name="description" content="Chapter 8 Buffet and survey data | Data Analysis in R for Sensory and Consumer Science" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 Buffet and survey data | Data Analysis in R for Sensory and Consumer Science" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 Buffet and survey data | Data Analysis in R for Sensory and Consumer Science" />
  
  
  

<meta name="author" content="Morten Arendt Rasmussen, Julius Jessen Terp, Mads RÃ¸nnow Staffe, Helene C. Reinbach and Bodil H. Allesen-Holm" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction-to-pca-and-multivariate-data.html"/>
<link rel="next" href="mst-exercises.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/vembedr-0.1.5/css/vembedr.css" rel="stylesheet" />
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Analysis in R for Consumer Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction to the book</a></li>
<li class="chapter" data-level="2" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-get-started---understanding-r-and-rstudio"><i class="fa fa-check"></i><b>2.1</b> How to get started - understanding R (and RStudio)</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#organise-and-save-scripts"><i class="fa fa-check"></i><b>2.1.1</b> Organise and save scripts</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-import-data"><i class="fa fa-check"></i><b>2.2</b> How to import data</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#import-data-from-r-package"><i class="fa fa-check"></i><b>2.2.1</b> Import data from R-package</a></li>
<li class="chapter" data-level="2.2.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#importing-a-csv-file"><i class="fa fa-check"></i><b>2.2.2</b> Importing a csv file</a></li>
<li class="chapter" data-level="2.2.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#importing-an-excel-filesheet"><i class="fa fa-check"></i><b>2.2.3</b> Importing an Excel file/sheet</a></li>
<li class="chapter" data-level="2.2.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#clipboard-import"><i class="fa fa-check"></i><b>2.2.4</b> Clipboard import</a></li>
<li class="chapter" data-level="2.2.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#looking-at-the-imported-elements"><i class="fa fa-check"></i><b>2.2.5</b> Looking at the imported elements</a></li>
<li class="chapter" data-level="2.2.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#numbers-and-factors---changing-categorisation"><i class="fa fa-check"></i><b>2.2.6</b> Numbers and factors - changing categorisation</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-edit-and-merge-datasets"><i class="fa fa-check"></i><b>2.3</b> How to edit and merge datasets</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#edit-using-tidyverse"><i class="fa fa-check"></i><b>2.3.1</b> Edit using Tidyverse</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-save-the-data"><i class="fa fa-check"></i><b>2.4</b> How to save the data</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-export-data-results-to-excel-and-the-like"><i class="fa fa-check"></i><b>2.5</b> How to export data / results to Excel and the like</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-load-your-rdata"><i class="fa fa-check"></i><b>2.6</b> How to load your RData</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-clear-your-environment"><i class="fa fa-check"></i><b>2.7</b> How to clear your environment</a></li>
<li class="chapter" data-level="2.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-r-project"><i class="fa fa-check"></i><b>2.8</b> How to R project</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-create-an-r-project"><i class="fa fa-check"></i><b>2.8.1</b> How to Create an R Project</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="libraries.html"><a href="libraries.html"><i class="fa fa-check"></i><b>3</b> Libraries</a></li>
<li class="chapter" data-level="4" data-path="plotting-data.html"><a href="plotting-data.html"><i class="fa fa-check"></i><b>4</b> Plotting data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="plotting-data.html"><a href="plotting-data.html#histograms-and-boxplots"><i class="fa fa-check"></i><b>4.1</b> Histograms and boxplots</a></li>
<li class="chapter" data-level="4.2" data-path="plotting-data.html"><a href="plotting-data.html#scatter-plots"><i class="fa fa-check"></i><b>4.2</b> Scatter plots</a></li>
<li class="chapter" data-level="4.3" data-path="plotting-data.html"><a href="plotting-data.html#how-to-export-plots"><i class="fa fa-check"></i><b>4.3</b> How to export plots</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html"><i class="fa fa-check"></i><b>5</b> Descriptive statistics</a>
<ul>
<li class="chapter" data-level="5.1" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#descriptives-for-a-continuous-variable"><i class="fa fa-check"></i><b>5.1</b> Descriptives for a continuous variable</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#mean-median"><i class="fa fa-check"></i><b>5.1.1</b> Mean / median</a></li>
<li class="chapter" data-level="5.1.2" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#variance"><i class="fa fa-check"></i><b>5.1.2</b> Variance</a></li>
<li class="chapter" data-level="5.1.3" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#standard-deviation"><i class="fa fa-check"></i><b>5.1.3</b> Standard deviation</a></li>
<li class="chapter" data-level="5.1.4" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#calculations"><i class="fa fa-check"></i><b>5.1.4</b> Calculations</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#distributions-of-count-data"><i class="fa fa-check"></i><b>5.2</b> Distributions of count data</a></li>
<li class="chapter" data-level="5.3" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#aggregate"><i class="fa fa-check"></i><b>5.3</b> Aggregate</a></li>
<li class="chapter" data-level="5.4" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#tidyverse"><i class="fa fa-check"></i><b>5.4</b> Tidyverse</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="inferential-statistics.html"><a href="inferential-statistics.html"><i class="fa fa-check"></i><b>6</b> Inferential statistics</a>
<ul>
<li class="chapter" data-level="6.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#intro"><i class="fa fa-check"></i><b>6.1</b> Intro</a></li>
<li class="chapter" data-level="6.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#hypothesis-testing"><i class="fa fa-check"></i><b>6.2</b> Hypothesis testing</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#power"><i class="fa fa-check"></i><b>6.2.1</b> Power</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="inferential-statistics.html"><a href="inferential-statistics.html#confidence-intervals"><i class="fa fa-check"></i><b>6.3</b> Confidence intervals</a></li>
<li class="chapter" data-level="6.4" data-path="inferential-statistics.html"><a href="inferential-statistics.html#t-test"><i class="fa fa-check"></i><b>6.4</b> T-test</a></li>
<li class="chapter" data-level="6.5" data-path="inferential-statistics.html"><a href="inferential-statistics.html#f-test"><i class="fa fa-check"></i><b>6.5</b> F-test</a></li>
<li class="chapter" data-level="6.6" data-path="inferential-statistics.html"><a href="inferential-statistics.html#analysis-of-variance-anova"><i class="fa fa-check"></i><b>6.6</b> Analysis of Variance (ANOVA)</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#one-way-anova"><i class="fa fa-check"></i><b>6.6.1</b> One-way ANOVA</a></li>
<li class="chapter" data-level="6.6.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#two-way-anova"><i class="fa fa-check"></i><b>6.6.2</b> Two-way ANOVA</a></li>
<li class="chapter" data-level="6.6.3" data-path="inferential-statistics.html"><a href="inferential-statistics.html#post-hoc-test---tukeys-honest-significant-difference"><i class="fa fa-check"></i><b>6.6.3</b> Post hoc test - Tukeyâs Honest Significant Difference</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="inferential-statistics.html"><a href="inferential-statistics.html#introduction-to-linear-and-mixed-models"><i class="fa fa-check"></i><b>6.7</b> Introduction to linear and mixed models</a></li>
<li class="chapter" data-level="6.8" data-path="inferential-statistics.html"><a href="inferential-statistics.html#normal-and-mixed-models"><i class="fa fa-check"></i><b>6.8</b> Normal and Mixed models</a>
<ul>
<li class="chapter" data-level="6.8.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#normal-model"><i class="fa fa-check"></i><b>6.8.1</b> Normal model</a></li>
<li class="chapter" data-level="6.8.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#mixed-model"><i class="fa fa-check"></i><b>6.8.2</b> Mixed model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="introduction-to-pca-and-multivariate-data.html"><a href="introduction-to-pca-and-multivariate-data.html"><i class="fa fa-check"></i><b>7</b> Introduction to PCA and multivariate data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="introduction-to-pca-and-multivariate-data.html"><a href="introduction-to-pca-and-multivariate-data.html#a-bit-of-math"><i class="fa fa-check"></i><b>7.1</b> A bit of math</a></li>
<li class="chapter" data-level="7.2" data-path="introduction-to-pca-and-multivariate-data.html"><a href="introduction-to-pca-and-multivariate-data.html#interpreting-model-output"><i class="fa fa-check"></i><b>7.2</b> Interpreting model output</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="introduction-to-pca-and-multivariate-data.html"><a href="introduction-to-pca-and-multivariate-data.html#biplot"><i class="fa fa-check"></i><b>7.2.1</b> Biplot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html"><i class="fa fa-check"></i><b>8</b> Buffet and survey data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#buffet-data"><i class="fa fa-check"></i><b>8.1</b> Buffet data</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#introduction-to-buffet-data"><i class="fa fa-check"></i><b>8.1.1</b> Introduction to buffet data</a></li>
<li class="chapter" data-level="8.1.2" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#plotting-buffet-data"><i class="fa fa-check"></i><b>8.1.2</b> Plotting buffet data</a></li>
<li class="chapter" data-level="8.1.3" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#mixed-model-for-buffet-data"><i class="fa fa-check"></i><b>8.1.3</b> Mixed model for buffet data</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#survey-data"><i class="fa fa-check"></i><b>8.2</b> Survey data</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#plotting-survey-data"><i class="fa fa-check"></i><b>8.2.1</b> Plotting survey data</a></li>
<li class="chapter" data-level="8.2.2" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#linear-model-for-buffet-data"><i class="fa fa-check"></i><b>8.2.2</b> Linear model for buffet data</a></li>
<li class="chapter" data-level="8.2.3" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#post-hoc-test-for-survey-data"><i class="fa fa-check"></i><b>8.2.3</b> Post-hoc test for survey data</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#combining-consumption-and-survey-data"><i class="fa fa-check"></i><b>8.3</b> Combining consumption and survey data</a></li>
<li class="chapter" data-level="8.4" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#pca-on-survey-answers"><i class="fa fa-check"></i><b>8.4</b> PCA on survey answers</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#wrangle-data"><i class="fa fa-check"></i><b>8.4.1</b> Wrangle data</a></li>
<li class="chapter" data-level="8.4.2" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#build-the-model"><i class="fa fa-check"></i><b>8.4.2</b> Build the model</a></li>
<li class="chapter" data-level="8.4.3" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#bi-plot"><i class="fa fa-check"></i><b>8.4.3</b> Bi-plot</a></li>
<li class="chapter" data-level="8.4.4" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#extract-the-components-and-run-all-associations."><i class="fa fa-check"></i><b>8.4.4</b> Extract the components and run all associations.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="mst-exercises.html"><a href="mst-exercises.html"><i class="fa fa-check"></i><b>9</b> MST exercises</a>
<ul>
<li class="chapter" data-level="9.1" data-path="mst-exercises.html"><a href="mst-exercises.html#exercise-1"><i class="fa fa-check"></i><b>9.1</b> Exercise 1</a></li>
<li class="chapter" data-level="9.2" data-path="mst-exercises.html"><a href="mst-exercises.html#exercise-2"><i class="fa fa-check"></i><b>9.2</b> Exercise 2</a></li>
<li class="chapter" data-level="9.3" data-path="mst-exercises.html"><a href="mst-exercises.html#exercise-3"><i class="fa fa-check"></i><b>9.3</b> Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html"><i class="fa fa-check"></i><b>10</b> Intro to large survey data</a>
<ul>
<li class="chapter" data-level="10.0.1" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#looking-at-the-data-and-checking-formating"><i class="fa fa-check"></i><b>10.0.1</b> Looking at the data and checking formating</a></li>
<li class="chapter" data-level="10.1" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#descriptive-statistics-1"><i class="fa fa-check"></i><b>10.1</b> Descriptive statistics</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#numeric-values"><i class="fa fa-check"></i><b>10.1.1</b> Numeric values</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#plots"><i class="fa fa-check"></i><b>10.2</b> Plots</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#within-groups-of-data"><i class="fa fa-check"></i><b>10.2.1</b> Within groups of data</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#categorical-ordinal-variables"><i class="fa fa-check"></i><b>10.3</b> Categorical / Ordinal variables</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#tables"><i class="fa fa-check"></i><b>10.3.1</b> Tables</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#table-1"><i class="fa fa-check"></i><b>10.4</b> Table 1</a></li>
<li class="chapter" data-level="10.5" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#the-tidyverse-way"><i class="fa fa-check"></i><b>10.5</b> The tidyverse way</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html"><i class="fa fa-check"></i><b>11</b> Consumer segmentation</a>
<ul>
<li class="chapter" data-level="11.1" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#segmentation"><i class="fa fa-check"></i><b>11.1</b> Segmentation</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#using-k-means-for-clustering"><i class="fa fa-check"></i><b>11.1.1</b> Using K-means for clustering</a></li>
<li class="chapter" data-level="11.1.2" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#initial-characterization-of-clusters"><i class="fa fa-check"></i><b>11.1.2</b> Initial characterization of clusters</a></li>
<li class="chapter" data-level="11.1.3" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#vizualization-of-the-clusters"><i class="fa fa-check"></i><b>11.1.3</b> Vizualization of the clusters</a></li>
<li class="chapter" data-level="11.1.4" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#sums-of-squares-from-the-clustering"><i class="fa fa-check"></i><b>11.1.4</b> Sums of Squares from the clustering</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#selecting-the-number-of-clusters---a-data-driven-approach"><i class="fa fa-check"></i><b>11.2</b> Selecting the number of clusters - a data-driven approach</a></li>
<li class="chapter" data-level="11.3" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#segmentation---another-example"><i class="fa fa-check"></i><b>11.3</b> Segmentation - another example</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#cluster-analysis"><i class="fa fa-check"></i><b>11.3.1</b> Cluster analysis</a></li>
<li class="chapter" data-level="11.3.2" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#plot-the-model-using-pca"><i class="fa fa-check"></i><b>11.3.2</b> Plot the model using PCA</a></li>
<li class="chapter" data-level="11.3.3" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#add-to-dataset"><i class="fa fa-check"></i><b>11.3.3</b> Add to dataset</a></li>
<li class="chapter" data-level="11.3.4" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#comments"><i class="fa fa-check"></i><b>11.3.4</b> Comments</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="profiling-segments.html"><a href="profiling-segments.html"><i class="fa fa-check"></i><b>12</b> Profiling segments</a>
<ul>
<li class="chapter" data-level="12.1" data-path="profiling-segments.html"><a href="profiling-segments.html#table-1-as-a-profiling-tool"><i class="fa fa-check"></i><b>12.1</b> Table 1 as a profiling tool</a></li>
<li class="chapter" data-level="12.2" data-path="profiling-segments.html"><a href="profiling-segments.html#visualization-of-consumer-segments"><i class="fa fa-check"></i><b>12.2</b> Visualization of Consumer Segments</a></li>
<li class="chapter" data-level="12.3" data-path="profiling-segments.html"><a href="profiling-segments.html#creating-the-contingency-table"><i class="fa fa-check"></i><b>12.3</b> Creating the contingency table</a></li>
<li class="chapter" data-level="12.4" data-path="profiling-segments.html"><a href="profiling-segments.html#plot-the-numbers"><i class="fa fa-check"></i><b>12.4</b> Plot the numbers</a></li>
<li class="chapter" data-level="12.5" data-path="profiling-segments.html"><a href="profiling-segments.html#contingency-table"><i class="fa fa-check"></i><b>12.5</b> Contingency table</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="profiling-segments.html"><a href="profiling-segments.html#pearson-chi-square-test"><i class="fa fa-check"></i><b>12.5.1</b> Pearson Chi-square test</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="profiling-segments.html"><a href="profiling-segments.html#correspondence-analysis"><i class="fa fa-check"></i><b>12.6</b> Correspondence Analysis</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="logistic-regression.html"><a href="logistic-regression.html"><i class="fa fa-check"></i><b>13</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="13.1" data-path="logistic-regression.html"><a href="logistic-regression.html#segmentationclustering"><i class="fa fa-check"></i><b>13.1</b> Segmentation/Clustering</a></li>
<li class="chapter" data-level="13.2" data-path="logistic-regression.html"><a href="logistic-regression.html#fitting-the-logistic-regression-model"><i class="fa fa-check"></i><b>13.2</b> Fitting the logistic regression-model</a></li>
<li class="chapter" data-level="13.3" data-path="logistic-regression.html"><a href="logistic-regression.html#probabilities-of-segment-membership"><i class="fa fa-check"></i><b>13.3</b> Probabilities of segment membership:</a></li>
<li class="chapter" data-level="13.4" data-path="logistic-regression.html"><a href="logistic-regression.html#odds-ratios"><i class="fa fa-check"></i><b>13.4</b> Odds ratios</a></li>
<li class="chapter" data-level="13.5" data-path="logistic-regression.html"><a href="logistic-regression.html#ors-and-probs"><i class="fa fa-check"></i><b>13.5</b> ORs and Probs</a></li>
<li class="chapter" data-level="13.6" data-path="logistic-regression.html"><a href="logistic-regression.html#effect-of-age"><i class="fa fa-check"></i><b>13.6</b> Effect of Age</a></li>
<li class="chapter" data-level="13.7" data-path="logistic-regression.html"><a href="logistic-regression.html#multivariate-analysis"><i class="fa fa-check"></i><b>13.7</b> Multivariate analysis</a>
<ul>
<li class="chapter" data-level="13.7.1" data-path="logistic-regression.html"><a href="logistic-regression.html#descriptives"><i class="fa fa-check"></i><b>13.7.1</b> Descriptives</a></li>
<li class="chapter" data-level="13.7.2" data-path="logistic-regression.html"><a href="logistic-regression.html#two-nested-models"><i class="fa fa-check"></i><b>13.7.2</b> Two nested models</a></li>
<li class="chapter" data-level="13.7.3" data-path="logistic-regression.html"><a href="logistic-regression.html#coefficients"><i class="fa fa-check"></i><b>13.7.3</b> Coefficients</a></li>
<li class="chapter" data-level="13.7.4" data-path="logistic-regression.html"><a href="logistic-regression.html#re-level"><i class="fa fa-check"></i><b>13.7.4</b> Re-level</a></li>
<li class="chapter" data-level="13.7.5" data-path="logistic-regression.html"><a href="logistic-regression.html#all-pairwise-comparisons"><i class="fa fa-check"></i><b>13.7.5</b> All pairwise comparisons</a></li>
</ul></li>
<li class="chapter" data-level="13.8" data-path="logistic-regression.html"><a href="logistic-regression.html#segment-2-and-3"><i class="fa fa-check"></i><b>13.8</b> Segment 2 and 3</a></li>
<li class="chapter" data-level="13.9" data-path="logistic-regression.html"><a href="logistic-regression.html#a-new-set-of-data"><i class="fa fa-check"></i><b>13.9</b> A new set of data</a></li>
<li class="chapter" data-level="13.10" data-path="logistic-regression.html"><a href="logistic-regression.html#logistic-regression-for-demographic-characterization"><i class="fa fa-check"></i><b>13.10</b> Logistic regression for demographic characterization</a>
<ul>
<li class="chapter" data-level="13.10.1" data-path="logistic-regression.html"><a href="logistic-regression.html#age"><i class="fa fa-check"></i><b>13.10.1</b> Age</a></li>
<li class="chapter" data-level="13.10.2" data-path="logistic-regression.html"><a href="logistic-regression.html#gender"><i class="fa fa-check"></i><b>13.10.2</b> Gender</a></li>
</ul></li>
<li class="chapter" data-level="13.11" data-path="logistic-regression.html"><a href="logistic-regression.html#task"><i class="fa fa-check"></i><b>13.11</b> TASK</a></li>
<li class="chapter" data-level="13.12" data-path="logistic-regression.html"><a href="logistic-regression.html#the-tidyverse-way-1"><i class="fa fa-check"></i><b>13.12</b> The tidyverse way</a></li>
<li class="chapter" data-level="13.13" data-path="logistic-regression.html"><a href="logistic-regression.html#comment"><i class="fa fa-check"></i><b>13.13</b> Comment</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html"><i class="fa fa-check"></i><b>14</b> CATA data (Check-All-That-Apply)</a>
<ul>
<li class="chapter" data-level="14.1" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html#importing-and-looking-at-the-beer-data"><i class="fa fa-check"></i><b>14.1</b> Importing and looking at the beer data</a></li>
<li class="chapter" data-level="14.2" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html#two-versions-of-the-data"><i class="fa fa-check"></i><b>14.2</b> Two versions of the data</a></li>
<li class="chapter" data-level="14.3" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html#cochrans-q-test"><i class="fa fa-check"></i><b>14.3</b> Cochranâs Q test</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html#post-hoc-test"><i class="fa fa-check"></i><b>14.3.1</b> Post hoc test</a></li>
<li class="chapter" data-level="14.3.2" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html#for-all-attributes-in-one-run-nice-to-know"><i class="fa fa-check"></i><b>14.3.2</b> For all attributes in one run (nice to know)</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html#pca-on-cata-data"><i class="fa fa-check"></i><b>14.4</b> PCA on CATA data</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html"><i class="fa fa-check"></i><b>15</b> Hedonic rating (e.g.Â liking scores)</a>
<ul>
<li class="chapter" data-level="15.1" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#plotting-liking-scores"><i class="fa fa-check"></i><b>15.1</b> Plotting liking scores</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#pca-of-hedonic-ratings"><i class="fa fa-check"></i><b>15.1.1</b> PCA of hedonic ratings</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#simple-mixed-models"><i class="fa fa-check"></i><b>15.2</b> Simple mixed models</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#post-hoc-test-1"><i class="fa fa-check"></i><b>15.2.1</b> Post hoc test</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#multivariable-models"><i class="fa fa-check"></i><b>15.3</b> Multivariable models</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#additive-models"><i class="fa fa-check"></i><b>15.3.1</b> Additive models</a></li>
<li class="chapter" data-level="15.3.2" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#effect-modification-and-interactions"><i class="fa fa-check"></i><b>15.3.2</b> Effect modification and Interactions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html"><i class="fa fa-check"></i><b>16</b> CATA and Hedonics</a>
<ul>
<li class="chapter" data-level="16.1" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#individual-attributes-and-liking"><i class="fa fa-check"></i><b>16.1</b> Individual attributes and liking</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#an-example-with-refreshing"><i class="fa fa-check"></i><b>16.1.1</b> An example with Refreshing</a></li>
<li class="chapter" data-level="16.1.2" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#all-attributes"><i class="fa fa-check"></i><b>16.1.2</b> All attributes</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#pca-on-cata-and-liking"><i class="fa fa-check"></i><b>16.2</b> PCA on CATA and Liking</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#a-beer-centric-model"><i class="fa fa-check"></i><b>16.2.1</b> A beer centric model</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#analysis-by-pls"><i class="fa fa-check"></i><b>16.3</b> Analysis by PLS</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#pls-basics"><i class="fa fa-check"></i><b>16.3.1</b> PLS basics</a></li>
<li class="chapter" data-level="16.3.2" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#pls-to-predict-liking-based-on-cata-data"><i class="fa fa-check"></i><b>16.3.2</b> PLS to predict liking based on CATA data</a></li>
<li class="chapter" data-level="16.3.3" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#regression-coefficients"><i class="fa fa-check"></i><b>16.3.3</b> Regression coefficients</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#l-pls-for-the-future"><i class="fa fa-check"></i><b>16.4</b> L-PLS [For the futureâ¦]</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="projective-mapping.html"><a href="projective-mapping.html"><i class="fa fa-check"></i><b>17</b> Projective mapping</a>
<ul>
<li class="chapter" data-level="17.1" data-path="projective-mapping.html"><a href="projective-mapping.html#example-from-mapping-of-xx"><i class="fa fa-check"></i><b>17.1</b> Example from mapping of XX</a></li>
<li class="chapter" data-level="17.2" data-path="projective-mapping.html"><a href="projective-mapping.html#a-collated-version-of-the-data"><i class="fa fa-check"></i><b>17.2</b> A Collated version of the data</a></li>
<li class="chapter" data-level="17.3" data-path="projective-mapping.html"><a href="projective-mapping.html#pca-on-collated-data"><i class="fa fa-check"></i><b>17.3</b> PCA on Collated data</a></li>
<li class="chapter" data-level="17.4" data-path="projective-mapping.html"><a href="projective-mapping.html#section"><i class="fa fa-check"></i><b>17.4</b> </a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="tfih-exercises.html"><a href="tfih-exercises.html"><i class="fa fa-check"></i><b>18</b> TFIH Exercises</a>
<ul>
<li class="chapter" data-level="18.1" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-1-descriptive-statistics-and-plots"><i class="fa fa-check"></i><b>18.1</b> Exercise 1: Descriptive statistics and plots</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="tfih-exercises.html"><a href="tfih-exercises.html#cata-counts"><i class="fa fa-check"></i><b>18.1.1</b> CATA counts</a></li>
<li class="chapter" data-level="18.1.2" data-path="tfih-exercises.html"><a href="tfih-exercises.html#hedonics"><i class="fa fa-check"></i><b>18.1.2</b> Hedonics</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-2-consumer-background-and-pca"><i class="fa fa-check"></i><b>18.2</b> Exercise 2: Consumer background and PCA</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="tfih-exercises.html"><a href="tfih-exercises.html#demographics"><i class="fa fa-check"></i><b>18.2.1</b> Demographics</a></li>
<li class="chapter" data-level="18.2.2" data-path="tfih-exercises.html"><a href="tfih-exercises.html#pca-on-interests"><i class="fa fa-check"></i><b>18.2.2</b> PCA on <em>Interests</em></a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-3-pca-on-cata-counts"><i class="fa fa-check"></i><b>18.3</b> Exercise 3: PCA on CATA counts</a></li>
<li class="chapter" data-level="18.4" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-4-cochrans-q-test-on-cata-binary-data"><i class="fa fa-check"></i><b>18.4</b> Exercise 4: Cochranâs Q test on CATA binary data</a></li>
<li class="chapter" data-level="18.5" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-5-hedonic-ratings-and-consumer-characteristics"><i class="fa fa-check"></i><b>18.5</b> Exercise 5: Hedonic ratings and consumer characteristics</a>
<ul>
<li class="chapter" data-level="18.5.1" data-path="tfih-exercises.html"><a href="tfih-exercises.html#pca-on-joint-data"><i class="fa fa-check"></i><b>18.5.1</b> PCA on joint data</a></li>
<li class="chapter" data-level="18.5.2" data-path="tfih-exercises.html"><a href="tfih-exercises.html#all-demographics"><i class="fa fa-check"></i><b>18.5.2</b> All demographics</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-6-pca-on-cata-counts-and-hedonic-ratings"><i class="fa fa-check"></i><b>18.6</b> Exercise 6: PCA on CATA counts and hedonic ratings</a></li>
<li class="chapter" data-level="18.7" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-7-mixed-modelling-on-hedonic-ratings"><i class="fa fa-check"></i><b>18.7</b> Exercise 7: Mixed modelling on hedonic ratings</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="chapters-to-appear.html"><a href="chapters-to-appear.html"><i class="fa fa-check"></i><b>19</b> CHAPTERS to APPEAR</a></li>
<li class="chapter" data-level="20" data-path="latent-factor-models.html"><a href="latent-factor-models.html"><i class="fa fa-check"></i><b>20</b> Latent Factor Models</a></li>
<li class="chapter" data-level="21" data-path="lpls.html"><a href="lpls.html"><i class="fa fa-check"></i><b>21</b> LPLS</a></li>
<li class="chapter" data-level="22" data-path="confirmatory-factor-analysis-using-lavaan.html"><a href="confirmatory-factor-analysis-using-lavaan.html"><i class="fa fa-check"></i><b>22</b> Confirmatory Factor Analysis using lavaan</a>
<ul>
<li class="chapter" data-level="22.1" data-path="confirmatory-factor-analysis-using-lavaan.html"><a href="confirmatory-factor-analysis-using-lavaan.html#example---food-neophobia"><i class="fa fa-check"></i><b>22.1</b> Example - Food Neophobia</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="structured-equation-modelling.html"><a href="structured-equation-modelling.html"><i class="fa fa-check"></i><b>23</b> Structured Equation Modelling</a>
<ul>
<li class="chapter" data-level="23.1" data-path="structured-equation-modelling.html"><a href="structured-equation-modelling.html#example---theory-of-planned-behaviour"><i class="fa fa-check"></i><b>23.1</b> Example - Theory of Planned Behaviour</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="plsda-on-cata-and-liking.html"><a href="plsda-on-cata-and-liking.html"><i class="fa fa-check"></i><b>24</b> PLSDA on CATA and liking</a></li>
<li class="chapter" data-level="25" data-path="text-mining-of-comsumer-reviews.html"><a href="text-mining-of-comsumer-reviews.html"><i class="fa fa-check"></i><b>25</b> Text mining of comsumer reviews</a></li>
<li class="chapter" data-level="26" data-path="text-mining-of-open-ended-survey-responses.html"><a href="text-mining-of-open-ended-survey-responses.html"><i class="fa fa-check"></i><b>26</b> Text mining of open-ended survey responses</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis in R for Sensory and Consumer Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="buffet-and-survey-data" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Chapter 8</span> Buffet and survey data<a href="buffet-and-survey-data.html#buffet-and-survey-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="buffet-data" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Buffet data<a href="buffet-and-survey-data.html#buffet-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="introduction-to-buffet-data" class="section level3 hasAnchor" number="8.1.1">
<h3><span class="header-section-number">8.1.1</span> Introduction to buffet data<a href="buffet-and-survey-data.html#introduction-to-buffet-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In the Meal Systems and Technologies course, we work with data from the iBuffet and data from a survey. You have to merge the two datasets. You can do this in Excel or in R. For the Excel guide, please see the teaching materials of the course in Absalon. For the R guide, please see <a href="introduction-to-r.html#how-to-edit-and-merge-datasets">How to edit and merge datasets</a></p>
<p>This chapter is missing a âTable 1â, as the data is insufficient in this part.</p>
<p>Our data analysis process for buffet and survey data is described below for a very simple dataset. Please elaborate plots and models to fit your own data.</p>
<p>First, it is a good idea to have a look at the dataset, see what the columns and rows consist of - it could also be a good idea to do some descriptive statistics. All of this is covered in the following chapters: <a href="introduction-to-r.html#looking-at-the-imported-elements">Looking at the imported elements</a> and <a href="descriptive-statistics.html#descriptive-statistics">Descriptive statistics</a>.</p>
<p>Often however, it is much easier to understand the data when they are plotted.</p>
</div>
<div id="plotting-buffet-data" class="section level3 hasAnchor" number="8.1.2">
<h3><span class="header-section-number">8.1.2</span> Plotting buffet data<a href="buffet-and-survey-data.html#plotting-buffet-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Below is one way to plot the data of the consumption from the buffet:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="buffet-and-survey-data.html#cb98-1" tabindex="-1"></a><span class="fu">library</span>(data4consumerscience)</span>
<span id="cb98-2"><a href="buffet-and-survey-data.html#cb98-2" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb98-3"><a href="buffet-and-survey-data.html#cb98-3" tabindex="-1"></a></span>
<span id="cb98-4"><a href="buffet-and-survey-data.html#cb98-4" tabindex="-1"></a><span class="fu">data</span>(pasta)</span>
<span id="cb98-5"><a href="buffet-and-survey-data.html#cb98-5" tabindex="-1"></a></span>
<span id="cb98-6"><a href="buffet-and-survey-data.html#cb98-6" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pasta, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(Day), <span class="at">y =</span> Consumption)) <span class="sc">+</span> </span>
<span id="cb98-7"><a href="buffet-and-survey-data.html#cb98-7" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb98-8"><a href="buffet-and-survey-data.html#cb98-8" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Person)) <span class="sc">+</span> </span>
<span id="cb98-9"><a href="buffet-and-survey-data.html#cb98-9" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> Person, <span class="at">color =</span> Person)) <span class="sc">+</span> </span>
<span id="cb98-10"><a href="buffet-and-survey-data.html#cb98-10" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>StationName) <span class="sc">+</span> </span>
<span id="cb98-11"><a href="buffet-and-survey-data.html#cb98-11" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&#39;Day&#39;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-74-1.png" width="672" /></p>
<p>The plot shows a boxplot of the consumption for each day and for each serving station, and each point is the consumption of one person from one station. The colors are added to make it easier to see, how the consumption of the same person changes from day to day, as well as for each of the stations. For more information on plotting, see <a href="plotting-data.html#plotting-data">Plotting data</a>.</p>
<p>Both the days and the stations look quite similar, but it also looks as if the variation in consumption is dependent on person. To test whether this is the case, we create a mixed model.</p>
</div>
<div id="mixed-model-for-buffet-data" class="section level3 hasAnchor" number="8.1.3">
<h3><span class="header-section-number">8.1.3</span> Mixed model for buffet data<a href="buffet-and-survey-data.html#mixed-model-for-buffet-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The reason we create a mixed model is that we want to isolate the effect of day and station from the variation caused by which person actually consumed the food. This is done in the example below. For more information on mixed models, see <a href="inferential-statistics.html#mixed-model">Mixed model</a>.</p>
<!-- buffet comsumption: et enkelt descr. plot samt henvise til relevante kapitler i starten, sÃ¥ da data er for simple? +mixed model med alt, consumerID=random effekt -->
<p>We use the packages <strong>lme4</strong> and <strong>lmerTest</strong>, and use the data called <strong>pasta</strong> from the <strong>data4consumerscience</strong>-pacakge. The function <strong>lmer</strong> will create a mixed model when set up as below. This will yield how Day and StationName affect Consumption. When using â*â between Day and StationName, we tell R that we want both the effect of Day and StationName alone, as well as their interaction effect - which could be e.g.Â if 10 people tasted the pasta with mushrooms on day 1 and decided that they like this station better, and as a result increase consumption on day 2.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="buffet-and-survey-data.html#cb99-1" tabindex="-1"></a><span class="fu">library</span>(lme4)</span>
<span id="cb99-2"><a href="buffet-and-survey-data.html#cb99-2" tabindex="-1"></a><span class="fu">library</span>(lmerTest)</span>
<span id="cb99-3"><a href="buffet-and-survey-data.html#cb99-3" tabindex="-1"></a><span class="fu">library</span>(data4consumerscience)</span>
<span id="cb99-4"><a href="buffet-and-survey-data.html#cb99-4" tabindex="-1"></a></span>
<span id="cb99-5"><a href="buffet-and-survey-data.html#cb99-5" tabindex="-1"></a><span class="fu">data</span>(pasta)</span>
<span id="cb99-6"><a href="buffet-and-survey-data.html#cb99-6" tabindex="-1"></a></span>
<span id="cb99-7"><a href="buffet-and-survey-data.html#cb99-7" tabindex="-1"></a>mdlmix <span class="ot">&lt;-</span> <span class="fu">lmer</span>(<span class="at">data =</span> pasta, Consumption <span class="sc">~</span> <span class="fu">factor</span>(Day)<span class="sc">*</span>StationName <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Person))</span>
<span id="cb99-8"><a href="buffet-and-survey-data.html#cb99-8" tabindex="-1"></a><span class="fu">summary</span>(mdlmix)</span></code></pre></div>
<pre><code>## Linear mixed model fit by REML. t-tests use Satterthwaite&#39;s method [&#39;lmerModLmerTest&#39;]
## Formula: Consumption ~ factor(Day) * StationName + (1 | Person)
##    Data: pasta
## 
## REML criterion at convergence: 663.5
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -2.4856 -0.6552 -0.1166  0.5527  2.3379 
## 
## Random effects:
##  Groups   Name        Variance Std.Dev.
##  Person   (Intercept) 3263     57.12   
##  Residual             4314     65.68   
## Number of obs: 60, groups:  Person, 15
## 
## Fixed effects:
##                           Estimate Std. Error      df t value Pr(&gt;|t|)    
## (Intercept)                138.000     17.012  14.000   8.112 1.16e-06 ***
## factor(Day)1                -4.333      8.479  42.000  -0.511    0.612    
## StationName1                 6.000      8.479  42.000   0.708    0.483    
## factor(Day)1:StationName1   -7.400      8.479  42.000  -0.873    0.388    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Correlation of Fixed Effects:
##             (Intr) fc(D)1 SttnN1
## factor(Dy)1 0.000               
## StationNam1 0.000  0.000        
## fct(D)1:SN1 0.000  0.000  0.000</code></pre>
<p>What we often look at in an output like this is the p-values (Pr(&gt;|t|)), which indicate whether or not the variable affects the model. The intercept is irrelevant in this case, as it tests whether or not the intercept is 0, and this is not relevant. What we observe is, that none of the p-values are below 0.05, which is the usual significance level used. This means, that neither day nor station has a significant impact on consumption, even when correcting for the variation caused by different people eating at the buffet.</p>
</div>
</div>
<div id="survey-data" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Survey data<a href="buffet-and-survey-data.html#survey-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Survey data are (as the name implies) the result of a survey, where the questions can vary dramatically. The dataset used here does not have a lot of questions, so please feel free to elaborate on plots and models when analyzing your own data.</p>
<p>The same general advice applies here as in the case of the buffet data - inspect your data, calculate some descriptive statistics, and plot the data, to get a better understanding of the data.</p>
<div id="plotting-survey-data" class="section level3 hasAnchor" number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> Plotting survey data<a href="buffet-and-survey-data.html#plotting-survey-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Below are some examples of plots. First, a barplot showing the whether or not the participants of the survey considered the protein content of the dishes, split between day 1 and 2.
Secondly, a histogram of the liking scores for each station, shown as the number of people giving a certain score on the Likert-scale.</p>
<p>The histogram can be created by creating each plot separately, assigning each plot to a variable, and then arranging them next to each other using <strong>grid.arrange</strong> from the <strong>gridExtra</strong>-package.</p>
<p>It can also be created using what is called a âpipe operatorâ (<strong>%&gt;%</strong>), which is a function from within the <strong>tidyverse</strong>-package, and with a little help from the <strong>data.table</strong>-package. The pipe operator is a nice tool to reduce the amount of code and variable names needed, and can be used for a lot of different stuff. For example, <strong>filter</strong> can be used to select specific rows, as is done here, where we select rows in column âQuestionâ, that include the text âlikeâ, and as the questions about liking are the only questions containing this text, these are the rows selected.</p>
<p>To learn more about the pipe operator, see <a href="introduction-to-r.html#edit-using-tidyverse">Edit using Tidyverse</a>. Here, there is also an explanation of the other functions such as <strong>pivot_longer</strong>.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="buffet-and-survey-data.html#cb101-1" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb101-2"><a href="buffet-and-survey-data.html#cb101-2" tabindex="-1"></a><span class="fu">library</span>(data4consumerscience)</span>
<span id="cb101-3"><a href="buffet-and-survey-data.html#cb101-3" tabindex="-1"></a></span>
<span id="cb101-4"><a href="buffet-and-survey-data.html#cb101-4" tabindex="-1"></a><span class="fu">data</span>(pasta)</span>
<span id="cb101-5"><a href="buffet-and-survey-data.html#cb101-5" tabindex="-1"></a></span>
<span id="cb101-6"><a href="buffet-and-survey-data.html#cb101-6" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pasta, <span class="fu">aes</span>(<span class="at">x =</span> Did_you_consider_the_proteincontent_of_the_dishes_you_choose)) <span class="sc">+</span> </span>
<span id="cb101-7"><a href="buffet-and-survey-data.html#cb101-7" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span> </span>
<span id="cb101-8"><a href="buffet-and-survey-data.html#cb101-8" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span><span class="fu">factor</span>(Day))</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-76-1.png" width="672" /></p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="buffet-and-survey-data.html#cb102-1" tabindex="-1"></a><span class="co">#Arranging to plots together</span></span>
<span id="cb102-2"><a href="buffet-and-survey-data.html#cb102-2" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb102-3"><a href="buffet-and-survey-data.html#cb102-3" tabindex="-1"></a></span>
<span id="cb102-4"><a href="buffet-and-survey-data.html#cb102-4" tabindex="-1"></a>legumes <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> pasta, <span class="fu">aes</span>(<span class="at">x =</span> I_like_taste_of_pasta_with_legumes)) <span class="sc">+</span> </span>
<span id="cb102-5"><a href="buffet-and-survey-data.html#cb102-5" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span> </span>
<span id="cb102-6"><a href="buffet-and-survey-data.html#cb102-6" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&#39;Legumes - liking&#39;</span>)</span>
<span id="cb102-7"><a href="buffet-and-survey-data.html#cb102-7" tabindex="-1"></a></span>
<span id="cb102-8"><a href="buffet-and-survey-data.html#cb102-8" tabindex="-1"></a>mushrooms <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> pasta, <span class="fu">aes</span>(<span class="at">x =</span> I_like_taste_of_pasta_with_mushrooms)) <span class="sc">+</span> </span>
<span id="cb102-9"><a href="buffet-and-survey-data.html#cb102-9" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span> </span>
<span id="cb102-10"><a href="buffet-and-survey-data.html#cb102-10" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&#39;Mushrooms - liking&#39;</span>)</span>
<span id="cb102-11"><a href="buffet-and-survey-data.html#cb102-11" tabindex="-1"></a></span>
<span id="cb102-12"><a href="buffet-and-survey-data.html#cb102-12" tabindex="-1"></a><span class="fu">grid.arrange</span>(legumes,mushrooms, <span class="at">nrow =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-76-2.png" width="672" /></p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="buffet-and-survey-data.html#cb103-1" tabindex="-1"></a><span class="co">#The fancy way:</span></span>
<span id="cb103-2"><a href="buffet-and-survey-data.html#cb103-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb103-3"><a href="buffet-and-survey-data.html#cb103-3" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb103-4"><a href="buffet-and-survey-data.html#cb103-4" tabindex="-1"></a></span>
<span id="cb103-5"><a href="buffet-and-survey-data.html#cb103-5" tabindex="-1"></a>pasta <span class="sc">%&gt;%</span> </span>
<span id="cb103-6"><a href="buffet-and-survey-data.html#cb103-6" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> I_like_taste_of_pasta_with_legumes<span class="sc">:</span>Pasta_with_mushrooms_is_visually_appealing, <span class="at">names_to =</span> <span class="st">&#39;Question&#39;</span>,</span>
<span id="cb103-7"><a href="buffet-and-survey-data.html#cb103-7" tabindex="-1"></a>         <span class="at">values_to =</span> <span class="st">&#39;Answer&#39;</span>,</span>
<span id="cb103-8"><a href="buffet-and-survey-data.html#cb103-8" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span></span>
<span id="cb103-9"><a href="buffet-and-survey-data.html#cb103-9" tabindex="-1"></a>  <span class="fu">filter</span>(., Question <span class="sc">%like%</span> <span class="st">&#39;like&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb103-10"><a href="buffet-and-survey-data.html#cb103-10" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data =</span> ., <span class="fu">aes</span>(<span class="at">x =</span> Answer)) <span class="sc">+</span> </span>
<span id="cb103-11"><a href="buffet-and-survey-data.html#cb103-11" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span> </span>
<span id="cb103-12"><a href="buffet-and-survey-data.html#cb103-12" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Question)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-76-3.png" width="672" /></p>
<p>Another nice plot is a bivariate plot, plotting two variables against each other and adding a regression line (using <strong>geom_smooth()</strong>, and specifying <code>method = 'lm'</code> for a linear regression for <code>formula = 'y ~ x')</code>. This has been done below, to see if there is a correlation between the liking and the rating of the visual appearance for pasta with legumes:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="buffet-and-survey-data.html#cb104-1" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb104-2"><a href="buffet-and-survey-data.html#cb104-2" tabindex="-1"></a></span>
<span id="cb104-3"><a href="buffet-and-survey-data.html#cb104-3" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pasta, <span class="fu">aes</span>(<span class="at">x =</span> Pasta_with_legumes_is_visually_appealing, <span class="at">y =</span> I_like_taste_of_pasta_with_legumes)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&#39;lm&#39;</span>, <span class="at">formula =</span> <span class="st">&#39;y ~ x&#39;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-77-1.png" width="672" /></p>
</div>
<div id="linear-model-for-buffet-data" class="section level3 hasAnchor" number="8.2.2">
<h3><span class="header-section-number">8.2.2</span> Linear model for buffet data<a href="buffet-and-survey-data.html#linear-model-for-buffet-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can also create a linear regression model explaining the relationship between liking and visual apperance, as is done below using the <strong>lm()</strong>-function.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="buffet-and-survey-data.html#cb105-1" tabindex="-1"></a>mdl <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> pasta, I_like_taste_of_pasta_with_legumes <span class="sc">~</span> Pasta_with_legumes_is_visually_appealing)</span>
<span id="cb105-2"><a href="buffet-and-survey-data.html#cb105-2" tabindex="-1"></a><span class="fu">summary</span>(mdl)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = I_like_taste_of_pasta_with_legumes ~ Pasta_with_legumes_is_visually_appealing, 
##     data = pasta)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -2.2199 -0.5664  0.1265  0.6068  1.6068 
## 
## Coefficients:
##                                          Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)                               1.08609    0.41462    2.62   0.0112 *  
## Pasta_with_legumes_is_visually_appealing  0.82677    0.07288   11.35 2.36e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.8213 on 58 degrees of freedom
## Multiple R-squared:  0.6893, Adjusted R-squared:  0.684 
## F-statistic: 128.7 on 1 and 58 DF,  p-value: 2.356e-16</code></pre>
<p>The <strong>summary()</strong>-function will give a lot of information about the model, e.g.Â the p-value, which is much lower than 0.05 (it is 2.36e-16), showing that the visual rating and the liking are indeed highly correlated. Also, the estimates of the summary are in fact the estimates of the parameters of the regression line, that follows
<span class="math inline">\(y = a + b\cdot x\)</span>. The estimate is: <span class="math inline">\(\hat{y}=0.82677 \cdot x \ + 1.08609\)</span>. Have a look at the plot and see if it fits with the regression line we created before. To learn more about linear models, see <a href="inferential-statistics.html#normal-and-mixed-models">Normal and Mixed models</a></p>
</div>
<div id="post-hoc-test-for-survey-data" class="section level3 hasAnchor" number="8.2.3">
<h3><span class="header-section-number">8.2.3</span> Post-hoc test for survey data<a href="buffet-and-survey-data.html#post-hoc-test-for-survey-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>One can also investigate whether two or more discrete groups are different from one another. The model is created the same way as above for the linear model, with the exception that our x is now discrete (<code>Why_did_you_consider_the_proteincontent</code>).</p>
<p>A very useful outcome of a model like this is the pairwise comparison between groups - in this case the different considerations about the protein content of the dish. The pairwise comparison compares all the groups (here the considerations), and the result is a letter assigned to each group. If two groups have different letters, the two groups are significantly different from each other, whereas if two groups have the same letter, they are not.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="buffet-and-survey-data.html#cb107-1" tabindex="-1"></a><span class="fu">library</span>(multcomp)</span>
<span id="cb107-2"><a href="buffet-and-survey-data.html#cb107-2" tabindex="-1"></a>pasta<span class="sc">$</span>Why_did_you_consider_the_proteincontent <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(pasta<span class="sc">$</span>Why_did_you_consider_the_proteincontent)</span>
<span id="cb107-3"><a href="buffet-and-survey-data.html#cb107-3" tabindex="-1"></a></span>
<span id="cb107-4"><a href="buffet-and-survey-data.html#cb107-4" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> pasta, I_like_taste_of_pasta_with_legumes <span class="sc">~</span> Why_did_you_consider_the_proteincontent)</span>
<span id="cb107-5"><a href="buffet-and-survey-data.html#cb107-5" tabindex="-1"></a></span>
<span id="cb107-6"><a href="buffet-and-survey-data.html#cb107-6" tabindex="-1"></a><span class="fu">cld</span>(<span class="fu">glht</span>(model, <span class="at">linfct =</span> <span class="fu">mcp</span>(<span class="at">Why_did_you_consider_the_proteincontent =</span> <span class="st">&quot;Tukey&quot;</span>)))</span></code></pre></div>
<pre><code>## Because I know that I need protein for my overall health 
##                                                      &quot;a&quot; 
##   Because I try to follow the Danish Dietary GuidelinesÂ  
##                                                      &quot;a&quot; 
##                                 I did not consider thisÂ  
##                                                      &quot;a&quot;</code></pre>
<p>In our case, the consideration about protein content did not affect the liking of pasta with legumes, as all groups have been assigned with the same letter. For more information on the post-hoc test, see <a href="inferential-statistics.html#post-hoc-test---tukeys-honest-significant-difference">Post hoc test - Tukeyâs Honest Significant Difference</a>.</p>
</div>
</div>
<div id="combining-consumption-and-survey-data" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Combining consumption and survey data<a href="buffet-and-survey-data.html#combining-consumption-and-survey-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>It is of course interesting to investigate how the consumption and the survey correlate. One example of how to look at this can be seen below. First, the data from the âPasta with legumesâ-station are plotted in a bivariate plot, where consumption is plotted against liking of pasta with legumes.</p>
<p>Next, a linear model is created to test whether the correlation is significant, and to see the estimates.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="buffet-and-survey-data.html#cb109-1" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb109-2"><a href="buffet-and-survey-data.html#cb109-2" tabindex="-1"></a><span class="co">#Bivariate plot</span></span>
<span id="cb109-3"><a href="buffet-and-survey-data.html#cb109-3" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pasta[pasta<span class="sc">$</span>StationName<span class="sc">==</span><span class="st">&#39;Pasta with legumes&#39;</span>,], <span class="fu">aes</span>(<span class="at">x =</span> I_like_taste_of_pasta_with_legumes, <span class="at">y =</span> Consumption)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&#39;lm&#39;</span>, <span class="at">formula =</span> <span class="st">&#39;y ~ x&#39;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-80-1.png" width="672" /></p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="buffet-and-survey-data.html#cb110-1" tabindex="-1"></a><span class="co">#Model</span></span>
<span id="cb110-2"><a href="buffet-and-survey-data.html#cb110-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb110-3"><a href="buffet-and-survey-data.html#cb110-3" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb110-4"><a href="buffet-and-survey-data.html#cb110-4" tabindex="-1"></a>fullmodel <span class="ot">&lt;-</span> pasta <span class="sc">%&gt;%</span></span>
<span id="cb110-5"><a href="buffet-and-survey-data.html#cb110-5" tabindex="-1"></a>  <span class="fu">filter</span>(.,StationName <span class="sc">%like%</span> <span class="st">&#39;legumes&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb110-6"><a href="buffet-and-survey-data.html#cb110-6" tabindex="-1"></a>  <span class="fu">lm</span>(<span class="at">data =</span> ., Consumption <span class="sc">~</span> I_like_taste_of_pasta_with_legumes)</span>
<span id="cb110-7"><a href="buffet-and-survey-data.html#cb110-7" tabindex="-1"></a><span class="fu">summary</span>(fullmodel)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Consumption ~ I_like_taste_of_pasta_with_legumes, 
##     data = .)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -108.274  -63.415   -9.345   36.944  187.726 
## 
## Coefficients:
##                                    Estimate Std. Error t value Pr(&gt;|t|)   
## (Intercept)                         -46.740     57.942  -0.807  0.42665   
## I_like_taste_of_pasta_with_legumes   33.859      9.961   3.399  0.00205 **
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 79.05 on 28 degrees of freedom
## Multiple R-squared:  0.2921, Adjusted R-squared:  0.2668 
## F-statistic: 11.55 on 1 and 28 DF,  p-value: 0.002048</code></pre>
<p>The model shows, that indeed, the liking of pasta with legumes affects the consumption of pasta with legumes (as the p-value is 0.00205, which is below 0.05).</p>
<p>Also shown are the estimates of the regression: <span class="math inline">\(\hat{y}= 33.859\cdot x \ -46.740\)</span></p>
<!-- julius:  -->
<!-- survey: barplot med en gang ja/nej svar, distribution af 1-7 for de to liking i hvert sit plot, sÃ¥ledes man kan sammeligne to stationer. MÃ¥ske kort beregning af gns og spredning. linaer model pÃ¥ hvad der har effekt pÃ¥ liking? linar model pÃ¥ om de er forksel i liking mellem de to stationer. bogstaver pÃ¥ (tukey) ift. effekt.  -->
<!-- kombi de to datasÃ¦ts? hvordan hÃ¦nger liking sammen med consumption per station? er der nogen spÃ¸rgsmÃ¥l i survey som pÃ¥vikrer comsumption.  -->
<!-- sÃ¸rg for der henvises fx funktionerne. filter, plot-funktioner, conf int for linÃ¦re modeller med merged datasÃ¦t -->

</div>
<div id="pca-on-survey-answers" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> PCA on survey answers<a href="buffet-and-survey-data.html#pca-on-survey-answers" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We use the ggbiplot package for plotting the PCA model (See <a href="introduction-to-pca-and-multivariate-data.html#biplot">Biplot</a> for details).</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="buffet-and-survey-data.html#cb112-1" tabindex="-1"></a><span class="fu">library</span>(data4consumerscience)</span>
<span id="cb112-2"><a href="buffet-and-survey-data.html#cb112-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb112-3"><a href="buffet-and-survey-data.html#cb112-3" tabindex="-1"></a><span class="fu">library</span>(ggbiplot)</span></code></pre></div>
<div id="wrangle-data" class="section level3 hasAnchor" number="8.4.1">
<h3><span class="header-section-number">8.4.1</span> Wrangle data<a href="buffet-and-survey-data.html#wrangle-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>PCA takes numerical data as input, so we use the likert-scales in the form of 1 to 7.
Further the yes/no answers are included, and also needs to be changed.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="buffet-and-survey-data.html#cb113-1" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&#39;pasta&#39;</span>)</span>
<span id="cb113-2"><a href="buffet-and-survey-data.html#cb113-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> pasta <span class="sc">%&gt;%</span> </span>
<span id="cb113-3"><a href="buffet-and-survey-data.html#cb113-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Did_you_take_food_from_both_Dish1_and_Dish2 =</span> </span>
<span id="cb113-4"><a href="buffet-and-survey-data.html#cb113-4" tabindex="-1"></a>           Did_you_take_food_from_both_Dish1_and_Dish2 <span class="sc">%&gt;%</span> factor <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>(),</span>
<span id="cb113-5"><a href="buffet-and-survey-data.html#cb113-5" tabindex="-1"></a>         <span class="at">Did_you_consider_the_proteincontent_of_the_dishes_you_choose =</span> </span>
<span id="cb113-6"><a href="buffet-and-survey-data.html#cb113-6" tabindex="-1"></a>           Did_you_consider_the_proteincontent_of_the_dishes_you_choose <span class="sc">%&gt;%</span> </span>
<span id="cb113-7"><a href="buffet-and-survey-data.html#cb113-7" tabindex="-1"></a>           <span class="fu">factor</span>() <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb113-8"><a href="buffet-and-survey-data.html#cb113-8" tabindex="-1"></a>  <span class="fu">mutate_if</span>(is.factor, as.numeric) <span class="sc">%&gt;%</span> </span>
<span id="cb113-9"><a href="buffet-and-survey-data.html#cb113-9" tabindex="-1"></a>  <span class="fu">filter</span>(Day<span class="sc">==</span><span class="dv">1</span>) <span class="sc">%&gt;%</span>  <span class="co"># the survey part is the same for both days and both stations. That is what we keep. </span></span>
<span id="cb113-10"><a href="buffet-and-survey-data.html#cb113-10" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(StationName,<span class="st">&#39;leg&#39;</span>))</span></code></pre></div>
</div>
<div id="build-the-model" class="section level3 hasAnchor" number="8.4.2">
<h3><span class="header-section-number">8.4.2</span> Build the model<a href="buffet-and-survey-data.html#build-the-model" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="buffet-and-survey-data.html#cb114-1" tabindex="-1"></a>PCAmdl <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(x[,<span class="fu">c</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>,<span class="dv">8</span><span class="sc">:</span><span class="dv">11</span>)],<span class="at">scale. =</span> T)</span></code></pre></div>
</div>
<div id="bi-plot" class="section level3 hasAnchor" number="8.4.3">
<h3><span class="header-section-number">8.4.3</span> Bi-plot<a href="buffet-and-survey-data.html#bi-plot" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>And a plot of the model</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="buffet-and-survey-data.html#cb115-1" tabindex="-1"></a><span class="fu">ggbiplot</span>(PCAmdl, <span class="at">varname.size =</span> <span class="dv">5</span>) <span class="sc">+</span> <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">4</span>,<span class="dv">4</span>)) <span class="sc">+</span> <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>,<span class="dv">5</span>))</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-84-1.png" width="672" /></p>
<p>What does component 1 (PC1) reflect? What does PC2 reflect?</p>
<p>Lets plot the model and color the samples according to the consumption (of legumes) cutted at the median.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="buffet-and-survey-data.html#cb116-1" tabindex="-1"></a><span class="fu">ggbiplot</span>(PCAmdl, <span class="at">groups =</span> <span class="fu">factor</span>(x<span class="sc">$</span>Consumption<span class="sc">&gt;</span><span class="dv">130</span>), <span class="at">ellipse =</span> T,</span>
<span id="cb116-2"><a href="buffet-and-survey-data.html#cb116-2" tabindex="-1"></a>         <span class="at">varname.size =</span> <span class="dv">5</span>) <span class="sc">+</span> <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">4</span>,<span class="dv">4</span>)) <span class="sc">+</span> <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>,<span class="dv">5</span>))</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-85-1.png" width="672" /></p>
</div>
<div id="extract-the-components-and-run-all-associations." class="section level3 hasAnchor" number="8.4.4">
<h3><span class="header-section-number">8.4.4</span> Extract the components and run all associations.<a href="buffet-and-survey-data.html#extract-the-components-and-run-all-associations." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We are interested in if any of the likert/survey traits reflected by PCA is correlated with consumption.
It is a little complicated, but here goes</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="buffet-and-survey-data.html#cb117-1" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb117-2"><a href="buffet-and-survey-data.html#cb117-2" tabindex="-1"></a><span class="fu">library</span>(broom.mixed)</span>
<span id="cb117-3"><a href="buffet-and-survey-data.html#cb117-3" tabindex="-1"></a><span class="fu">library</span>(lme4)</span>
<span id="cb117-4"><a href="buffet-and-survey-data.html#cb117-4" tabindex="-1"></a></span>
<span id="cb117-5"><a href="buffet-and-survey-data.html#cb117-5" tabindex="-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Person =</span> x<span class="sc">$</span>Person, PCAmdl<span class="sc">$</span>x[,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]) <span class="co"># take out the first two components. </span></span>
<span id="cb117-6"><a href="buffet-and-survey-data.html#cb117-6" tabindex="-1"></a>tbmixed <span class="ot">&lt;-</span> pasta <span class="sc">%&gt;%</span> </span>
<span id="cb117-7"><a href="buffet-and-survey-data.html#cb117-7" tabindex="-1"></a>  <span class="fu">left_join</span>(scores, <span class="at">by =</span> <span class="st">&#39;Person&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb117-8"><a href="buffet-and-survey-data.html#cb117-8" tabindex="-1"></a>  <span class="fu">gather</span>(comp,score,PC1<span class="sc">:</span>PC2) <span class="sc">%&gt;%</span> </span>
<span id="cb117-9"><a href="buffet-and-survey-data.html#cb117-9" tabindex="-1"></a>  <span class="fu">group_by</span>(StationName,comp) <span class="sc">%&gt;%</span> </span>
<span id="cb117-10"><a href="buffet-and-survey-data.html#cb117-10" tabindex="-1"></a>  <span class="fu">do</span>(<span class="fu">lmer</span>(<span class="at">data =</span> ., Consumption<span class="sc">~</span>score <span class="sc">+</span> Day <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Person)) <span class="sc">%&gt;%</span> <span class="fu">tidy</span>(<span class="at">conf.int =</span> T))</span></code></pre></div>
<p>â¦ Make a table and a plot of the results.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="buffet-and-survey-data.html#cb118-1" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb118-2"><a href="buffet-and-survey-data.html#cb118-2" tabindex="-1"></a>tbmixed <span class="sc">%&gt;%</span> </span>
<span id="cb118-3"><a href="buffet-and-survey-data.html#cb118-3" tabindex="-1"></a>  <span class="fu">filter</span>(term<span class="sc">==</span><span class="st">&#39;score&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb118-4"><a href="buffet-and-survey-data.html#cb118-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>effect,<span class="sc">-</span>group) <span class="sc">%&gt;%</span> </span>
<span id="cb118-5"><a href="buffet-and-survey-data.html#cb118-5" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">x =</span> .,<span class="at">caption =</span> <span class="st">&#39;Slopes according to components&#39;</span>, <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">format =</span> <span class="st">&#39;simple&#39;</span>)</span></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-87">Table 8.1: </span>Slopes according to components</caption>
<thead>
<tr class="header">
<th align="left">StationName</th>
<th align="left">comp</th>
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">df</th>
<th align="right">p.value</th>
<th align="right">conf.low</th>
<th align="right">conf.high</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Pasta with legumes</td>
<td align="left">PC1</td>
<td align="left">score</td>
<td align="right">14.28</td>
<td align="right">13.26</td>
<td align="right">1.08</td>
<td align="right">13</td>
<td align="right">0.30</td>
<td align="right">-14.36</td>
<td align="right">42.93</td>
</tr>
<tr class="even">
<td align="left">Pasta with legumes</td>
<td align="left">PC2</td>
<td align="left">score</td>
<td align="right">-19.47</td>
<td align="right">17.80</td>
<td align="right">-1.09</td>
<td align="right">13</td>
<td align="right">0.29</td>
<td align="right">-57.91</td>
<td align="right">18.98</td>
</tr>
<tr class="odd">
<td align="left">Pasta with mushroom</td>
<td align="left">PC1</td>
<td align="left">score</td>
<td align="right">5.15</td>
<td align="right">10.69</td>
<td align="right">0.48</td>
<td align="right">13</td>
<td align="right">0.64</td>
<td align="right">-17.94</td>
<td align="right">28.25</td>
</tr>
<tr class="even">
<td align="left">Pasta with mushroom</td>
<td align="left">PC2</td>
<td align="left">score</td>
<td align="right">-4.93</td>
<td align="right">14.43</td>
<td align="right">-0.34</td>
<td align="right">13</td>
<td align="right">0.74</td>
<td align="right">-36.11</td>
<td align="right">26.24</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="buffet-and-survey-data.html#cb119-1" tabindex="-1"></a>tbmixed <span class="sc">%&gt;%</span> </span>
<span id="cb119-2"><a href="buffet-and-survey-data.html#cb119-2" tabindex="-1"></a>  <span class="fu">filter</span>(term<span class="sc">==</span><span class="st">&#39;score&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb119-3"><a href="buffet-and-survey-data.html#cb119-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data =</span> ., <span class="fu">aes</span>(comp,estimate,<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high)) <span class="sc">+</span> </span>
<span id="cb119-4"><a href="buffet-and-survey-data.html#cb119-4" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="at">width =</span> <span class="fl">0.1</span>) <span class="sc">+</span><span class="fu">geom_point</span>()<span class="sc">+</span> </span>
<span id="cb119-5"><a href="buffet-and-survey-data.html#cb119-5" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>) <span class="sc">+</span> </span>
<span id="cb119-6"><a href="buffet-and-survey-data.html#cb119-6" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span>StationName) <span class="sc">+</span> </span>
<span id="cb119-7"><a href="buffet-and-survey-data.html#cb119-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&#39;bottom&#39;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-87-1.png" width="672" /></p>
<p>Interpret the results.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-to-pca-and-multivariate-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="mst-exercises.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/mortenarendt/dataanalyssisconsumerscience/edit/master/08_BuffetAndSurveyData.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/mortenarendt/dataanalyssisconsumerscience/blob/master/08_BuffetAndSurveyData.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
