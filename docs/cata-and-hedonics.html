<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 16 CATA and Hedonics | Data Analysis in R for Sensory and Consumer Science</title>
  <meta name="description" content="Chapter 16 CATA and Hedonics | Data Analysis in R for Sensory and Consumer Science" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 16 CATA and Hedonics | Data Analysis in R for Sensory and Consumer Science" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 16 CATA and Hedonics | Data Analysis in R for Sensory and Consumer Science" />
  
  
  

<meta name="author" content="Morten Arendt Rasmussen, Julius Jessen Terp, Mads Rønnow Staffe, Helene C. Reinbach and Bodil H. Allesen-Holm" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="hedonic-rating-e.g.-liking-scores.html"/>
<link rel="next" href="projective-mapping.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/vembedr-0.1.5/css/vembedr.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.28/datatables.js"></script>
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Analysis in R for Consumer Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction to the book</a></li>
<li class="chapter" data-level="2" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-get-started---understanding-r-and-rstudio"><i class="fa fa-check"></i><b>2.1</b> How to get started - understanding R (and RStudio)</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#organise-and-save-scripts"><i class="fa fa-check"></i><b>2.1.1</b> Organise and save scripts</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-import-data"><i class="fa fa-check"></i><b>2.2</b> How to import data</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#import-data-from-r-package"><i class="fa fa-check"></i><b>2.2.1</b> Import data from R-package</a></li>
<li class="chapter" data-level="2.2.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#importing-a-csv-file"><i class="fa fa-check"></i><b>2.2.2</b> Importing a csv file</a></li>
<li class="chapter" data-level="2.2.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#importing-an-excel-filesheet"><i class="fa fa-check"></i><b>2.2.3</b> Importing an Excel file/sheet</a></li>
<li class="chapter" data-level="2.2.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#clipboard-import"><i class="fa fa-check"></i><b>2.2.4</b> Clipboard import</a></li>
<li class="chapter" data-level="2.2.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#looking-at-the-imported-elements"><i class="fa fa-check"></i><b>2.2.5</b> Looking at the imported elements</a></li>
<li class="chapter" data-level="2.2.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#numbers-and-factors---changing-categorisation"><i class="fa fa-check"></i><b>2.2.6</b> Numbers and factors - changing categorisation</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-edit-and-merge-datasets"><i class="fa fa-check"></i><b>2.3</b> How to edit and merge datasets</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#edit-using-tidyverse"><i class="fa fa-check"></i><b>2.3.1</b> Edit using Tidyverse</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-save-the-data"><i class="fa fa-check"></i><b>2.4</b> How to save the data</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-export-data-results-to-excel-and-the-like"><i class="fa fa-check"></i><b>2.5</b> How to export data / results to Excel and the like</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-load-your-rdata"><i class="fa fa-check"></i><b>2.6</b> How to load your RData</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-clear-your-environment"><i class="fa fa-check"></i><b>2.7</b> How to clear your environment</a></li>
<li class="chapter" data-level="2.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-r-project"><i class="fa fa-check"></i><b>2.8</b> How to R project</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-create-an-r-project"><i class="fa fa-check"></i><b>2.8.1</b> How to Create an R Project</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="libraries.html"><a href="libraries.html"><i class="fa fa-check"></i><b>3</b> Libraries</a></li>
<li class="chapter" data-level="4" data-path="plotting-data.html"><a href="plotting-data.html"><i class="fa fa-check"></i><b>4</b> Plotting data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="plotting-data.html"><a href="plotting-data.html#histograms-and-boxplots"><i class="fa fa-check"></i><b>4.1</b> Histograms and boxplots</a></li>
<li class="chapter" data-level="4.2" data-path="plotting-data.html"><a href="plotting-data.html#scatter-plots"><i class="fa fa-check"></i><b>4.2</b> Scatter plots</a></li>
<li class="chapter" data-level="4.3" data-path="plotting-data.html"><a href="plotting-data.html#how-to-export-plots"><i class="fa fa-check"></i><b>4.3</b> How to export plots</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html"><i class="fa fa-check"></i><b>5</b> Descriptive statistics</a>
<ul>
<li class="chapter" data-level="5.1" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#descriptives-for-a-continuous-variable"><i class="fa fa-check"></i><b>5.1</b> Descriptives for a continuous variable</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#mean-median"><i class="fa fa-check"></i><b>5.1.1</b> Mean / median</a></li>
<li class="chapter" data-level="5.1.2" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#variance"><i class="fa fa-check"></i><b>5.1.2</b> Variance</a></li>
<li class="chapter" data-level="5.1.3" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#standard-deviation"><i class="fa fa-check"></i><b>5.1.3</b> Standard deviation</a></li>
<li class="chapter" data-level="5.1.4" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#calculations"><i class="fa fa-check"></i><b>5.1.4</b> Calculations</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#distributions-of-count-data"><i class="fa fa-check"></i><b>5.2</b> Distributions of count data</a></li>
<li class="chapter" data-level="5.3" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#aggregate"><i class="fa fa-check"></i><b>5.3</b> Aggregate</a></li>
<li class="chapter" data-level="5.4" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#tidyverse"><i class="fa fa-check"></i><b>5.4</b> Tidyverse</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="inferential-statistics.html"><a href="inferential-statistics.html"><i class="fa fa-check"></i><b>6</b> Inferential statistics</a>
<ul>
<li class="chapter" data-level="6.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#intro"><i class="fa fa-check"></i><b>6.1</b> Intro</a></li>
<li class="chapter" data-level="6.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#hypothesis-testing"><i class="fa fa-check"></i><b>6.2</b> Hypothesis testing</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#power"><i class="fa fa-check"></i><b>6.2.1</b> Power</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="inferential-statistics.html"><a href="inferential-statistics.html#confidence-intervals"><i class="fa fa-check"></i><b>6.3</b> Confidence intervals</a></li>
<li class="chapter" data-level="6.4" data-path="inferential-statistics.html"><a href="inferential-statistics.html#t-test"><i class="fa fa-check"></i><b>6.4</b> T-test</a></li>
<li class="chapter" data-level="6.5" data-path="inferential-statistics.html"><a href="inferential-statistics.html#f-test"><i class="fa fa-check"></i><b>6.5</b> F-test</a></li>
<li class="chapter" data-level="6.6" data-path="inferential-statistics.html"><a href="inferential-statistics.html#analysis-of-variance-anova"><i class="fa fa-check"></i><b>6.6</b> Analysis of Variance (ANOVA)</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#one-way-anova"><i class="fa fa-check"></i><b>6.6.1</b> One-way ANOVA</a></li>
<li class="chapter" data-level="6.6.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#two-way-anova"><i class="fa fa-check"></i><b>6.6.2</b> Two-way ANOVA</a></li>
<li class="chapter" data-level="6.6.3" data-path="inferential-statistics.html"><a href="inferential-statistics.html#post-hoc-test---tukeys-honest-significant-difference"><i class="fa fa-check"></i><b>6.6.3</b> Post hoc test - Tukey’s Honest Significant Difference</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="inferential-statistics.html"><a href="inferential-statistics.html#introduction-to-linear-and-mixed-models"><i class="fa fa-check"></i><b>6.7</b> Introduction to linear and mixed models</a></li>
<li class="chapter" data-level="6.8" data-path="inferential-statistics.html"><a href="inferential-statistics.html#normal-and-mixed-models"><i class="fa fa-check"></i><b>6.8</b> Normal and Mixed models</a>
<ul>
<li class="chapter" data-level="6.8.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#normal-model"><i class="fa fa-check"></i><b>6.8.1</b> Normal model</a></li>
<li class="chapter" data-level="6.8.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#mixed-model"><i class="fa fa-check"></i><b>6.8.2</b> Mixed model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="introduction-to-pca-and-multivariate-data.html"><a href="introduction-to-pca-and-multivariate-data.html"><i class="fa fa-check"></i><b>7</b> Introduction to PCA and multivariate data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="introduction-to-pca-and-multivariate-data.html"><a href="introduction-to-pca-and-multivariate-data.html#a-bit-of-math"><i class="fa fa-check"></i><b>7.1</b> A bit of math</a></li>
<li class="chapter" data-level="7.2" data-path="introduction-to-pca-and-multivariate-data.html"><a href="introduction-to-pca-and-multivariate-data.html#interpreting-model-output"><i class="fa fa-check"></i><b>7.2</b> Interpreting model output</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="introduction-to-pca-and-multivariate-data.html"><a href="introduction-to-pca-and-multivariate-data.html#biplot"><i class="fa fa-check"></i><b>7.2.1</b> Biplot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html"><i class="fa fa-check"></i><b>8</b> Buffet and survey data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#buffet-data"><i class="fa fa-check"></i><b>8.1</b> Buffet data</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#introduction-to-buffet-data"><i class="fa fa-check"></i><b>8.1.1</b> Introduction to buffet data</a></li>
<li class="chapter" data-level="8.1.2" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#plotting-buffet-data"><i class="fa fa-check"></i><b>8.1.2</b> Plotting buffet data</a></li>
<li class="chapter" data-level="8.1.3" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#mixed-model-for-buffet-data"><i class="fa fa-check"></i><b>8.1.3</b> Mixed model for buffet data</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#survey-data"><i class="fa fa-check"></i><b>8.2</b> Survey data</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#plotting-survey-data"><i class="fa fa-check"></i><b>8.2.1</b> Plotting survey data</a></li>
<li class="chapter" data-level="8.2.2" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#linear-model-for-buffet-data"><i class="fa fa-check"></i><b>8.2.2</b> Linear model for buffet data</a></li>
<li class="chapter" data-level="8.2.3" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#post-hoc-test-for-survey-data"><i class="fa fa-check"></i><b>8.2.3</b> Post-hoc test for survey data</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#combining-consumption-and-survey-data"><i class="fa fa-check"></i><b>8.3</b> Combining consumption and survey data</a></li>
<li class="chapter" data-level="8.4" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#pca-on-survey-answers"><i class="fa fa-check"></i><b>8.4</b> PCA on survey answers</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#wrangle-data"><i class="fa fa-check"></i><b>8.4.1</b> Wrangle data</a></li>
<li class="chapter" data-level="8.4.2" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#build-the-model"><i class="fa fa-check"></i><b>8.4.2</b> Build the model</a></li>
<li class="chapter" data-level="8.4.3" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#bi-plot"><i class="fa fa-check"></i><b>8.4.3</b> Bi-plot</a></li>
<li class="chapter" data-level="8.4.4" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#extract-the-components-and-run-all-associations."><i class="fa fa-check"></i><b>8.4.4</b> Extract the components and run all associations.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="mst-exercises.html"><a href="mst-exercises.html"><i class="fa fa-check"></i><b>9</b> MST exercises</a>
<ul>
<li class="chapter" data-level="9.1" data-path="mst-exercises.html"><a href="mst-exercises.html#exercise-1---cleaning-compusense-data-with-r"><i class="fa fa-check"></i><b>9.1</b> Exercise 1 - cleaning Compusense data with R</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="mst-exercises.html"><a href="mst-exercises.html#exercise-1---solution"><i class="fa fa-check"></i><b>9.1.1</b> Exercise 1 - Solution</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="mst-exercises.html"><a href="mst-exercises.html#exercise-2---creating-a-tableone-and-visualization"><i class="fa fa-check"></i><b>9.2</b> Exercise 2 - creating a tableone and visualization</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="mst-exercises.html"><a href="mst-exercises.html#exercise-2---solution"><i class="fa fa-check"></i><b>9.2.1</b> Exercise 2 - solution</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="mst-exercises.html"><a href="mst-exercises.html#exercise-3---creating-an-outcome-table"><i class="fa fa-check"></i><b>9.3</b> Exercise 3 - Creating an outcome table</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="mst-exercises.html"><a href="mst-exercises.html#exercise-3---solution"><i class="fa fa-check"></i><b>9.3.1</b> Exercise 3 - Solution</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html"><i class="fa fa-check"></i><b>10</b> Intro to large survey data</a>
<ul>
<li class="chapter" data-level="10.0.1" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#looking-at-the-data-and-checking-formating"><i class="fa fa-check"></i><b>10.0.1</b> Looking at the data and checking formating</a></li>
<li class="chapter" data-level="10.1" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#descriptive-statistics-1"><i class="fa fa-check"></i><b>10.1</b> Descriptive statistics</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#numeric-values"><i class="fa fa-check"></i><b>10.1.1</b> Numeric values</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#plots"><i class="fa fa-check"></i><b>10.2</b> Plots</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#within-groups-of-data"><i class="fa fa-check"></i><b>10.2.1</b> Within groups of data</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#categorical-ordinal-variables"><i class="fa fa-check"></i><b>10.3</b> Categorical / Ordinal variables</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#tables"><i class="fa fa-check"></i><b>10.3.1</b> Tables</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#table-1"><i class="fa fa-check"></i><b>10.4</b> Table 1</a></li>
<li class="chapter" data-level="10.5" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#the-tidyverse-way"><i class="fa fa-check"></i><b>10.5</b> The tidyverse way</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html"><i class="fa fa-check"></i><b>11</b> Consumer segmentation</a>
<ul>
<li class="chapter" data-level="11.1" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#segmentation"><i class="fa fa-check"></i><b>11.1</b> Segmentation</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#using-k-means-for-clustering"><i class="fa fa-check"></i><b>11.1.1</b> Using K-means for clustering</a></li>
<li class="chapter" data-level="11.1.2" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#initial-characterization-of-clusters"><i class="fa fa-check"></i><b>11.1.2</b> Initial characterization of clusters</a></li>
<li class="chapter" data-level="11.1.3" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#vizualization-of-the-clusters"><i class="fa fa-check"></i><b>11.1.3</b> Vizualization of the clusters</a></li>
<li class="chapter" data-level="11.1.4" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#sums-of-squares-from-the-clustering"><i class="fa fa-check"></i><b>11.1.4</b> Sums of Squares from the clustering</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#selecting-the-number-of-clusters---a-data-driven-approach"><i class="fa fa-check"></i><b>11.2</b> Selecting the number of clusters - a data-driven approach</a></li>
<li class="chapter" data-level="11.3" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#segmentation---another-example"><i class="fa fa-check"></i><b>11.3</b> Segmentation - another example</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#cluster-analysis"><i class="fa fa-check"></i><b>11.3.1</b> Cluster analysis</a></li>
<li class="chapter" data-level="11.3.2" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#plot-the-model-using-pca"><i class="fa fa-check"></i><b>11.3.2</b> Plot the model using PCA</a></li>
<li class="chapter" data-level="11.3.3" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#add-to-dataset"><i class="fa fa-check"></i><b>11.3.3</b> Add to dataset</a></li>
<li class="chapter" data-level="11.3.4" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#comments"><i class="fa fa-check"></i><b>11.3.4</b> Comments</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="profiling-segments.html"><a href="profiling-segments.html"><i class="fa fa-check"></i><b>12</b> Profiling segments</a>
<ul>
<li class="chapter" data-level="12.1" data-path="profiling-segments.html"><a href="profiling-segments.html#table-1-as-a-profiling-tool"><i class="fa fa-check"></i><b>12.1</b> Table 1 as a profiling tool</a></li>
<li class="chapter" data-level="12.2" data-path="profiling-segments.html"><a href="profiling-segments.html#visualization-of-consumer-segments"><i class="fa fa-check"></i><b>12.2</b> Visualization of Consumer Segments</a></li>
<li class="chapter" data-level="12.3" data-path="profiling-segments.html"><a href="profiling-segments.html#creating-the-contingency-table"><i class="fa fa-check"></i><b>12.3</b> Creating the contingency table</a></li>
<li class="chapter" data-level="12.4" data-path="profiling-segments.html"><a href="profiling-segments.html#plot-the-numbers"><i class="fa fa-check"></i><b>12.4</b> Plot the numbers</a></li>
<li class="chapter" data-level="12.5" data-path="profiling-segments.html"><a href="profiling-segments.html#contingency-table"><i class="fa fa-check"></i><b>12.5</b> Contingency table</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="profiling-segments.html"><a href="profiling-segments.html#pearson-chi-square-test"><i class="fa fa-check"></i><b>12.5.1</b> Pearson Chi-square test</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="profiling-segments.html"><a href="profiling-segments.html#correspondence-analysis"><i class="fa fa-check"></i><b>12.6</b> Correspondence Analysis</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="logistic-regression.html"><a href="logistic-regression.html"><i class="fa fa-check"></i><b>13</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="13.1" data-path="logistic-regression.html"><a href="logistic-regression.html#segmentationclustering"><i class="fa fa-check"></i><b>13.1</b> Segmentation/Clustering</a></li>
<li class="chapter" data-level="13.2" data-path="logistic-regression.html"><a href="logistic-regression.html#fitting-the-logistic-regression-model"><i class="fa fa-check"></i><b>13.2</b> Fitting the logistic regression-model</a></li>
<li class="chapter" data-level="13.3" data-path="logistic-regression.html"><a href="logistic-regression.html#probabilities-of-segment-membership"><i class="fa fa-check"></i><b>13.3</b> Probabilities of segment membership:</a></li>
<li class="chapter" data-level="13.4" data-path="logistic-regression.html"><a href="logistic-regression.html#odds-ratios"><i class="fa fa-check"></i><b>13.4</b> Odds ratios</a></li>
<li class="chapter" data-level="13.5" data-path="logistic-regression.html"><a href="logistic-regression.html#ors-and-probs"><i class="fa fa-check"></i><b>13.5</b> ORs and Probs</a></li>
<li class="chapter" data-level="13.6" data-path="logistic-regression.html"><a href="logistic-regression.html#effect-of-age"><i class="fa fa-check"></i><b>13.6</b> Effect of Age</a></li>
<li class="chapter" data-level="13.7" data-path="logistic-regression.html"><a href="logistic-regression.html#multivariate-analysis"><i class="fa fa-check"></i><b>13.7</b> Multivariate analysis</a>
<ul>
<li class="chapter" data-level="13.7.1" data-path="logistic-regression.html"><a href="logistic-regression.html#descriptives"><i class="fa fa-check"></i><b>13.7.1</b> Descriptives</a></li>
<li class="chapter" data-level="13.7.2" data-path="logistic-regression.html"><a href="logistic-regression.html#two-nested-models"><i class="fa fa-check"></i><b>13.7.2</b> Two nested models</a></li>
<li class="chapter" data-level="13.7.3" data-path="logistic-regression.html"><a href="logistic-regression.html#coefficients"><i class="fa fa-check"></i><b>13.7.3</b> Coefficients</a></li>
<li class="chapter" data-level="13.7.4" data-path="logistic-regression.html"><a href="logistic-regression.html#re-level"><i class="fa fa-check"></i><b>13.7.4</b> Re-level</a></li>
<li class="chapter" data-level="13.7.5" data-path="logistic-regression.html"><a href="logistic-regression.html#all-pairwise-comparisons"><i class="fa fa-check"></i><b>13.7.5</b> All pairwise comparisons</a></li>
</ul></li>
<li class="chapter" data-level="13.8" data-path="logistic-regression.html"><a href="logistic-regression.html#segment-2-and-3"><i class="fa fa-check"></i><b>13.8</b> Segment 2 and 3</a></li>
<li class="chapter" data-level="13.9" data-path="logistic-regression.html"><a href="logistic-regression.html#a-new-set-of-data"><i class="fa fa-check"></i><b>13.9</b> A new set of data</a></li>
<li class="chapter" data-level="13.10" data-path="logistic-regression.html"><a href="logistic-regression.html#logistic-regression-for-demographic-characterization"><i class="fa fa-check"></i><b>13.10</b> Logistic regression for demographic characterization</a>
<ul>
<li class="chapter" data-level="13.10.1" data-path="logistic-regression.html"><a href="logistic-regression.html#age"><i class="fa fa-check"></i><b>13.10.1</b> Age</a></li>
<li class="chapter" data-level="13.10.2" data-path="logistic-regression.html"><a href="logistic-regression.html#gender"><i class="fa fa-check"></i><b>13.10.2</b> Gender</a></li>
</ul></li>
<li class="chapter" data-level="13.11" data-path="logistic-regression.html"><a href="logistic-regression.html#task"><i class="fa fa-check"></i><b>13.11</b> TASK</a></li>
<li class="chapter" data-level="13.12" data-path="logistic-regression.html"><a href="logistic-regression.html#the-tidyverse-way-1"><i class="fa fa-check"></i><b>13.12</b> The tidyverse way</a></li>
<li class="chapter" data-level="13.13" data-path="logistic-regression.html"><a href="logistic-regression.html#comment"><i class="fa fa-check"></i><b>13.13</b> Comment</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html"><i class="fa fa-check"></i><b>14</b> CATA data (Check-All-That-Apply)</a>
<ul>
<li class="chapter" data-level="14.1" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html#importing-and-looking-at-the-beer-data"><i class="fa fa-check"></i><b>14.1</b> Importing and looking at the beer data</a></li>
<li class="chapter" data-level="14.2" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html#two-versions-of-the-data"><i class="fa fa-check"></i><b>14.2</b> Two versions of the data</a></li>
<li class="chapter" data-level="14.3" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html#cochrans-q-test"><i class="fa fa-check"></i><b>14.3</b> Cochran’s Q test</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html#post-hoc-test"><i class="fa fa-check"></i><b>14.3.1</b> Post hoc test</a></li>
<li class="chapter" data-level="14.3.2" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html#for-all-attributes-in-one-run-nice-to-know"><i class="fa fa-check"></i><b>14.3.2</b> For all attributes in one run (nice to know)</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html#pca-on-cata-data"><i class="fa fa-check"></i><b>14.4</b> PCA on CATA data</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html"><i class="fa fa-check"></i><b>15</b> Hedonic rating (e.g. liking scores)</a>
<ul>
<li class="chapter" data-level="15.1" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#plotting-liking-scores"><i class="fa fa-check"></i><b>15.1</b> Plotting liking scores</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#pca-of-hedonic-ratings"><i class="fa fa-check"></i><b>15.1.1</b> PCA of hedonic ratings</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#simple-mixed-models"><i class="fa fa-check"></i><b>15.2</b> Simple mixed models</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#post-hoc-test-1"><i class="fa fa-check"></i><b>15.2.1</b> Post hoc test</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#multivariable-models"><i class="fa fa-check"></i><b>15.3</b> Multivariable models</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#additive-models"><i class="fa fa-check"></i><b>15.3.1</b> Additive models</a></li>
<li class="chapter" data-level="15.3.2" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#effect-modification-and-interactions"><i class="fa fa-check"></i><b>15.3.2</b> Effect modification and Interactions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html"><i class="fa fa-check"></i><b>16</b> CATA and Hedonics</a>
<ul>
<li class="chapter" data-level="16.1" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#individual-attributes-and-liking"><i class="fa fa-check"></i><b>16.1</b> Individual attributes and liking</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#an-example-with-refreshing"><i class="fa fa-check"></i><b>16.1.1</b> An example with Refreshing</a></li>
<li class="chapter" data-level="16.1.2" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#all-attributes"><i class="fa fa-check"></i><b>16.1.2</b> All attributes</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#pca-on-cata-and-liking"><i class="fa fa-check"></i><b>16.2</b> PCA on CATA and Liking</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#a-beer-centric-model"><i class="fa fa-check"></i><b>16.2.1</b> A beer centric model</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#analysis-by-pls"><i class="fa fa-check"></i><b>16.3</b> Analysis by PLS</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#pls-basics"><i class="fa fa-check"></i><b>16.3.1</b> PLS basics</a></li>
<li class="chapter" data-level="16.3.2" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#pls-to-predict-liking-based-on-cata-data"><i class="fa fa-check"></i><b>16.3.2</b> PLS to predict liking based on CATA data</a></li>
<li class="chapter" data-level="16.3.3" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#regression-coefficients"><i class="fa fa-check"></i><b>16.3.3</b> Regression coefficients</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#l-pls"><i class="fa fa-check"></i><b>16.4</b> L-PLS</a></li>
<li class="chapter" data-level="16.5" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#creating-x1-x2-x3."><i class="fa fa-check"></i><b>16.5</b> Creating X1, X2, X3.</a></li>
<li class="chapter" data-level="16.6" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#building-the-model-the-l-pls-model-can-be-built-using-the-lpls"><i class="fa fa-check"></i><b>16.6</b> Building the model: The L-PLS model can be built, using the <em>lpls</em></a>
<ul>
<li class="chapter" data-level="16.6.1" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#finding-the-explained-variance-for-exo-l-pls"><i class="fa fa-check"></i><b>16.6.1</b> Finding the explained variance for exo L-PLS</a></li>
<li class="chapter" data-level="16.6.2" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#cross-validation-next-let-us-have-a-look-how-many-components-we"><i class="fa fa-check"></i><b>16.6.2</b> Cross-validation Next let us have a look how many components we</a></li>
<li class="chapter" data-level="16.6.3" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#vizulization-now-we-would-like-to-visuzlalize-our-l-pls-model.-when"><i class="fa fa-check"></i><b>16.6.3</b> Vizulization Now we would like to visuzlalize our L-PLS model. When</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="projective-mapping.html"><a href="projective-mapping.html"><i class="fa fa-check"></i><b>17</b> Projective mapping</a>
<ul>
<li class="chapter" data-level="17.1" data-path="projective-mapping.html"><a href="projective-mapping.html#example-from-mapping-of-xx"><i class="fa fa-check"></i><b>17.1</b> Example from mapping of XX</a></li>
<li class="chapter" data-level="17.2" data-path="projective-mapping.html"><a href="projective-mapping.html#a-collated-version-of-the-data"><i class="fa fa-check"></i><b>17.2</b> A Collated version of the data</a></li>
<li class="chapter" data-level="17.3" data-path="projective-mapping.html"><a href="projective-mapping.html#pca-on-collated-data"><i class="fa fa-check"></i><b>17.3</b> PCA on Collated data</a></li>
<li class="chapter" data-level="17.4" data-path="projective-mapping.html"><a href="projective-mapping.html#section"><i class="fa fa-check"></i><b>17.4</b> </a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="tfih-exercises.html"><a href="tfih-exercises.html"><i class="fa fa-check"></i><b>18</b> TFIH Exercises</a>
<ul>
<li class="chapter" data-level="18.1" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-1-descriptive-statistics-and-plots"><i class="fa fa-check"></i><b>18.1</b> Exercise 1: Descriptive statistics and plots</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="tfih-exercises.html"><a href="tfih-exercises.html#cata-counts"><i class="fa fa-check"></i><b>18.1.1</b> CATA counts</a></li>
<li class="chapter" data-level="18.1.2" data-path="tfih-exercises.html"><a href="tfih-exercises.html#hedonics"><i class="fa fa-check"></i><b>18.1.2</b> Hedonics</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-2-consumer-background-and-pca"><i class="fa fa-check"></i><b>18.2</b> Exercise 2: Consumer background and PCA</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="tfih-exercises.html"><a href="tfih-exercises.html#demographics"><i class="fa fa-check"></i><b>18.2.1</b> Demographics</a></li>
<li class="chapter" data-level="18.2.2" data-path="tfih-exercises.html"><a href="tfih-exercises.html#pca-on-interests"><i class="fa fa-check"></i><b>18.2.2</b> PCA on <em>Interests</em></a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-3-pca-on-cata-counts"><i class="fa fa-check"></i><b>18.3</b> Exercise 3: PCA on CATA counts</a></li>
<li class="chapter" data-level="18.4" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-4-cochrans-q-test-on-cata-binary-data"><i class="fa fa-check"></i><b>18.4</b> Exercise 4: Cochran’s Q test on CATA binary data</a></li>
<li class="chapter" data-level="18.5" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-5-hedonic-ratings-and-consumer-characteristics"><i class="fa fa-check"></i><b>18.5</b> Exercise 5: Hedonic ratings and consumer characteristics</a>
<ul>
<li class="chapter" data-level="18.5.1" data-path="tfih-exercises.html"><a href="tfih-exercises.html#pca-on-joint-data"><i class="fa fa-check"></i><b>18.5.1</b> PCA on joint data</a></li>
<li class="chapter" data-level="18.5.2" data-path="tfih-exercises.html"><a href="tfih-exercises.html#all-demographics"><i class="fa fa-check"></i><b>18.5.2</b> All demographics</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-6-pca-on-cata-counts-and-hedonic-ratings"><i class="fa fa-check"></i><b>18.6</b> Exercise 6: PCA on CATA counts and hedonic ratings</a></li>
<li class="chapter" data-level="18.7" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-7-mixed-modelling-on-hedonic-ratings"><i class="fa fa-check"></i><b>18.7</b> Exercise 7: Mixed modelling on hedonic ratings</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="chapters-to-appear.html"><a href="chapters-to-appear.html"><i class="fa fa-check"></i><b>19</b> CHAPTERS to APPEAR</a></li>
<li class="chapter" data-level="20" data-path="latent-factor-models.html"><a href="latent-factor-models.html"><i class="fa fa-check"></i><b>20</b> Latent Factor Models</a></li>
<li class="chapter" data-level="21" data-path="lpls.html"><a href="lpls.html"><i class="fa fa-check"></i><b>21</b> LPLS</a></li>
<li class="chapter" data-level="22" data-path="confirmatory-factor-analysis-using-lavaan.html"><a href="confirmatory-factor-analysis-using-lavaan.html"><i class="fa fa-check"></i><b>22</b> Confirmatory Factor Analysis using lavaan</a>
<ul>
<li class="chapter" data-level="22.1" data-path="confirmatory-factor-analysis-using-lavaan.html"><a href="confirmatory-factor-analysis-using-lavaan.html#example---food-neophobia"><i class="fa fa-check"></i><b>22.1</b> Example - Food Neophobia</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="structured-equation-modelling.html"><a href="structured-equation-modelling.html"><i class="fa fa-check"></i><b>23</b> Structured Equation Modelling</a>
<ul>
<li class="chapter" data-level="23.1" data-path="structured-equation-modelling.html"><a href="structured-equation-modelling.html#example---theory-of-planned-behaviour"><i class="fa fa-check"></i><b>23.1</b> Example - Theory of Planned Behaviour</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="plsda-on-cata-and-liking.html"><a href="plsda-on-cata-and-liking.html"><i class="fa fa-check"></i><b>24</b> PLSDA on CATA and liking</a></li>
<li class="chapter" data-level="25" data-path="text-mining-of-comsumer-reviews.html"><a href="text-mining-of-comsumer-reviews.html"><i class="fa fa-check"></i><b>25</b> Text mining of comsumer reviews</a></li>
<li class="chapter" data-level="26" data-path="text-mining-of-open-ended-survey-responses.html"><a href="text-mining-of-open-ended-survey-responses.html"><i class="fa fa-check"></i><b>26</b> Text mining of open-ended survey responses</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis in R for Sensory and Consumer Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="cata-and-hedonics" class="section level1 hasAnchor" number="16">
<h1><span class="header-section-number">Chapter 16</span> CATA and Hedonics<a href="cata-and-hedonics.html#cata-and-hedonics" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Certain attributes like floral is wanted in beer, while others may be unwanted, and hence detection of these attributes can have hedonic impact. This analysis can be evaluated for each attribute separately or all collectively using PCA.</p>
<p>These data appears as two separate dataset, and hence need to be joint:</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="cata-and-hedonics.html#cb333-1" tabindex="-1"></a><span class="fu">library</span>(data4consumerscience)</span>
<span id="cb333-2"><a href="cata-and-hedonics.html#cb333-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb333-3"><a href="cata-and-hedonics.html#cb333-3" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;beercata&quot;</span>)</span>
<span id="cb333-4"><a href="cata-and-hedonics.html#cb333-4" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;beerliking&quot;</span>)</span>
<span id="cb333-5"><a href="cata-and-hedonics.html#cb333-5" tabindex="-1"></a>xbeer <span class="ot">&lt;-</span> beerliking <span class="sc">%&gt;%</span> </span>
<span id="cb333-6"><a href="cata-and-hedonics.html#cb333-6" tabindex="-1"></a>  <span class="fu">left_join</span>(beercata, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;Beer&#39;</span>,<span class="st">&#39;Consumer.ID&#39;</span>))</span></code></pre></div>
<div id="individual-attributes-and-liking" class="section level2 hasAnchor" number="16.1">
<h2><span class="header-section-number">16.1</span> Individual attributes and liking<a href="cata-and-hedonics.html#individual-attributes-and-liking" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="an-example-with-refreshing" class="section level3 hasAnchor" number="16.1.1">
<h3><span class="header-section-number">16.1.1</span> An example with Refreshing<a href="cata-and-hedonics.html#an-example-with-refreshing" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="cata-and-hedonics.html#cb334-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> xbeer, <span class="fu">aes</span>(Beer,  Liking, <span class="at">fill =</span> <span class="fu">factor</span>(S_Refreshing))) <span class="sc">+</span> </span>
<span id="cb334-2"><a href="cata-and-hedonics.html#cb334-2" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() </span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-225-1.png" width="672" /></p>
<p>From this plot it seems as if checking of the attribute <em>Refreshing</em> leads to higher liking score.
Further, this is even more so for light-colored beers like <em>Wheat IPA</em> and <em>Porse Bock</em>.</p>
<p>A model capturing this phenomena could be a linear model with interactions:</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="cata-and-hedonics.html#cb335-1" tabindex="-1"></a><span class="fu">library</span>(lme4)</span>
<span id="cb335-2"><a href="cata-and-hedonics.html#cb335-2" tabindex="-1"></a><span class="fu">library</span>(lmerTest)</span>
<span id="cb335-3"><a href="cata-and-hedonics.html#cb335-3" tabindex="-1"></a>mdl <span class="ot">&lt;-</span> lmerTest<span class="sc">::</span><span class="fu">lmer</span>(<span class="at">data =</span> xbeer, Liking<span class="sc">~</span><span class="fu">factor</span>(S_Refreshing)<span class="sc">*</span>Beer <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Consumer.ID))</span>
<span id="cb335-4"><a href="cata-and-hedonics.html#cb335-4" tabindex="-1"></a><span class="fu">anova</span>(mdl)</span></code></pre></div>
<pre><code>## Type III Analysis of Variance Table with Satterthwaite&#39;s method
##                           Sum Sq Mean Sq NumDF  DenDF  F value    Pr(&gt;F)    
## factor(S_Refreshing)      316.30  316.30     1 901.60 141.9478 &lt; 2.2e-16 ***
## Beer                       75.61   15.12     5 783.91   6.7864 3.309e-06 ***
## factor(S_Refreshing):Beer  48.91    9.78     5 877.05   4.3894 0.0005933 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>All terms are significant and we are interested in the individual beer effects. We re-parametrice the model by removing the intercept (adding -1 at the end of the formula) and not including the main effect of S_Refreshing (change * to : in interaction, and add Beer as main effect).</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="cata-and-hedonics.html#cb337-1" tabindex="-1"></a>mdl2 <span class="ot">&lt;-</span> lmerTest<span class="sc">::</span><span class="fu">lmer</span>(<span class="at">data =</span> xbeer, Liking<span class="sc">~</span>Beer <span class="sc">+</span> <span class="fu">factor</span>(S_Refreshing)<span class="sc">:</span>Beer <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Consumer.ID) <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb337-2"><a href="cata-and-hedonics.html#cb337-2" tabindex="-1"></a><span class="fu">summary</span>(mdl2)</span></code></pre></div>
<pre><code>## Linear mixed model fit by REML. t-tests use Satterthwaite&#39;s method [&#39;lmerModLmerTest&#39;]
## Formula: Liking ~ Beer + factor(S_Refreshing):Beer + (1 | Consumer.ID) -      1
##    Data: xbeer
## 
## REML criterion at convergence: 3446.5
## 
## Scaled residuals: 
##      Min       1Q   Median       3Q      Max 
## -2.87114 -0.67445  0.08872  0.70059  2.46378 
## 
## Random effects:
##  Groups      Name        Variance Std.Dev.
##  Consumer.ID (Intercept) 0.2706   0.5202  
##  Residual                2.2283   1.4928  
## Number of obs: 920, groups:  Consumer.ID, 155
## 
## Fixed effects:
##                                         Estimate Std. Error       df t value Pr(&gt;|t|)    
## BeerBrown Ale                             5.1235     0.1713 905.0570  29.905  &lt; 2e-16 ***
## BeerNY Lager                              4.5212     0.1471 891.2430  30.733  &lt; 2e-16 ***
## BeerPorse Bock                            4.2747     0.1322 869.6115  32.335  &lt; 2e-16 ***
## BeerRavnsborg Red                         4.9078     0.1350 874.8096  36.349  &lt; 2e-16 ***
## BeerRiver Beer                            4.2451     0.1332 872.0429  31.864  &lt; 2e-16 ***
## BeerWheat IPA                             4.2981     0.1329 871.0139  32.332  &lt; 2e-16 ***
## BeerBrown Ale:factor(S_Refreshing)1      -0.3340     0.1694 883.0668  -1.972 0.048964 *  
## BeerNY Lager:factor(S_Refreshing)1       -0.5176     0.1449 882.6727  -3.573 0.000372 ***
## BeerPorse Bock:factor(S_Refreshing)1     -0.7714     0.1297 883.4564  -5.947 3.92e-09 ***
## BeerRavnsborg Red:factor(S_Refreshing)1  -0.7095     0.1326 883.8535  -5.352 1.11e-07 ***
## BeerRiver Beer:factor(S_Refreshing)1     -0.6040     0.1308 884.3471  -4.618 4.44e-06 ***
## BeerWheat IPA:factor(S_Refreshing)1      -1.2025     0.1304 882.8483  -9.219  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Correlation of Fixed Effects:
##             BrBrwA BrNYLg BrPrsB BrRvnR BrRvrB BrWIPA BBA:(S BNYL:( BPB:(S BRR:(S BRB:(S
## BeerNYLager  0.069                                                                      
## BeerPorsBck  0.080  0.090                                                               
## BrRvnsbrgRd  0.079  0.089  0.099                                                        
## BeerRiverBr  0.076  0.090  0.099  0.096                                                 
## BeerWhetIPA  0.078  0.091  0.100  0.099  0.099                                          
## BrBA:(S_R)1 -0.664  0.000 -0.004 -0.005  0.000 -0.001                                   
## BNYL:(S_R)1  0.001 -0.496  0.001 -0.002 -0.001 -0.002  0.000                            
## BrPB:(S_R)1 -0.009  0.002 -0.268 -0.003 -0.002  0.000  0.014 -0.005                     
## BrRR:(S_R)1 -0.009 -0.003 -0.003 -0.332  0.003 -0.004  0.014  0.006  0.010              
## BrRB:(S_R)1  0.003 -0.002 -0.001  0.004 -0.293 -0.001 -0.001  0.004  0.008 -0.009       
## BWIPA:(S_R) -0.002 -0.003  0.001 -0.004 -0.001 -0.276  0.003  0.006 -0.002  0.012  0.004</code></pre>
<p>Here we see that the attribute will increase the liking by <span class="math inline">\(0.7\)</span> points for <em>Brown Ale</em> and up to <span class="math inline">\(2.4\)</span> points for <em>Wheat IPA</em>.</p>
</div>
<div id="all-attributes" class="section level3 hasAnchor" number="16.1.2">
<h3><span class="header-section-number">16.1.2</span> All attributes<a href="cata-and-hedonics.html#all-attributes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can visualize for all attributes:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="cata-and-hedonics.html#cb339-1" tabindex="-1"></a>g1 <span class="ot">&lt;-</span> xbeer <span class="sc">%&gt;%</span> </span>
<span id="cb339-2"><a href="cata-and-hedonics.html#cb339-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">names_to =</span> <span class="st">&#39;cata&#39;</span>,<span class="at">values_to =</span> <span class="st">&#39;val&#39;</span>,<span class="at">cols =</span> S_Flowers<span class="sc">:</span>S_Vinous) <span class="sc">%&gt;%</span> </span>
<span id="cb339-3"><a href="cata-and-hedonics.html#cb339-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data =</span> ., <span class="fu">aes</span>(Beer,  Liking, <span class="at">fill =</span> <span class="fu">factor</span>(val))) <span class="sc">+</span> </span>
<span id="cb339-4"><a href="cata-and-hedonics.html#cb339-4" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb339-5"><a href="cata-and-hedonics.html#cb339-5" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">79</span>, <span class="at">hjust =</span> <span class="dv">1</span>), <span class="at">legend.position =</span> <span class="st">&#39;bottom&#39;</span>) <span class="sc">+</span> </span>
<span id="cb339-6"><a href="cata-and-hedonics.html#cb339-6" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>cata, <span class="at">ncol =</span> <span class="dv">4</span>)</span>
<span id="cb339-7"><a href="cata-and-hedonics.html#cb339-7" tabindex="-1"></a>g1 </span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-228-1.png" width="672" /></p>
<p>For each attribute an interaction model will be used to qualify further analysis.</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="cata-and-hedonics.html#cb340-1" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb340-2"><a href="cata-and-hedonics.html#cb340-2" tabindex="-1"></a><span class="fu">library</span>(broom.mixed)</span>
<span id="cb340-3"><a href="cata-and-hedonics.html#cb340-3" tabindex="-1"></a>tb <span class="ot">&lt;-</span> xbeer <span class="sc">%&gt;%</span> </span>
<span id="cb340-4"><a href="cata-and-hedonics.html#cb340-4" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">names_to =</span> <span class="st">&#39;cata&#39;</span>,<span class="at">values_to =</span> <span class="st">&#39;val&#39;</span>,<span class="at">cols =</span> S_Flowers<span class="sc">:</span>S_Vinous) <span class="sc">%&gt;%</span> </span>
<span id="cb340-5"><a href="cata-and-hedonics.html#cb340-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(cata) <span class="sc">%&gt;%</span> </span>
<span id="cb340-6"><a href="cata-and-hedonics.html#cb340-6" tabindex="-1"></a>  <span class="fu">do</span>(<span class="fu">lmer</span>(<span class="at">data =</span> ., Liking<span class="sc">~</span><span class="fu">factor</span>(val)<span class="sc">*</span>Beer <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Consumer.ID)) <span class="sc">%&gt;%</span> anova <span class="sc">%&gt;%</span> tidy)</span></code></pre></div>
<p>This table has both main effect of the beer and cata-attribute as well their interaction.</p>
<p>This print out shows the attributes related to liking - overall.</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="cata-and-hedonics.html#cb341-1" tabindex="-1"></a>tb <span class="sc">%&gt;%</span> </span>
<span id="cb341-2"><a href="cata-and-hedonics.html#cb341-2" tabindex="-1"></a>  <span class="fu">filter</span>(term<span class="sc">==</span><span class="st">&#39;factor(val)&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb341-3"><a href="cata-and-hedonics.html#cb341-3" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value)</span></code></pre></div>
<pre><code>## # A tibble: 27 × 8
## # Groups:   cata [27]
##    cata              term        sumsq meansq NumDF DenDF statistic  p.value
##    &lt;chr&gt;             &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
##  1 S_Refreshing      factor(val) 316.   316.      1  902.    142.   1.70e-30
##  2 S_Sour            factor(val) 129.   129.      1  905.     51.2  1.73e-12
##  3 S_Caramel         factor(val)  23.6   23.6     1  899.      8.92 2.90e- 3
##  4 S_Herbs           factor(val)  23.3   23.3     1  905.      8.84 3.02e- 3
##  5 S_Sweet           factor(val)  21.8   21.8     1  897.      8.22 4.25e- 3
##  6 S_Regional spices factor(val)  19.4   19.4     1  903.      7.43 6.54e- 3
##  7 S_Sparkling       factor(val)  19.3   19.3     1  865.      7.33 6.90e- 3
##  8 S_Bitter          factor(val)  17.9   17.9     1  907.      6.76 9.45e- 3
##  9 S_Dessert spices  factor(val)  16.5   16.5     1  908.      6.28 1.24e- 2
## 10 S_Liquor          factor(val)  16.0   16.0     1  908.      6.00 1.45e- 2
## # ℹ 17 more rows</code></pre>
<p>The strongest ones are S_Refreshing, S_Sour, etc. while the presence of S_Warming, S_Pungent etc. has no effect on liking.</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="cata-and-hedonics.html#cb343-1" tabindex="-1"></a>tb <span class="sc">%&gt;%</span> </span>
<span id="cb343-2"><a href="cata-and-hedonics.html#cb343-2" tabindex="-1"></a>  <span class="fu">filter</span>(term<span class="sc">==</span><span class="st">&#39;factor(val):Beer&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb343-3"><a href="cata-and-hedonics.html#cb343-3" tabindex="-1"></a>  <span class="fu">arrange</span>(p.value) <span class="sc">%&gt;%</span> </span>
<span id="cb343-4"><a href="cata-and-hedonics.html#cb343-4" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">6</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 8
## # Groups:   cata [6]
##   cata              term             sumsq meansq NumDF DenDF statistic  p.value
##   &lt;chr&gt;             &lt;chr&gt;            &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 S_Refreshing      factor(val):Beer  48.9   9.78     5  877.      4.39 0.000593
## 2 S_Fruity          factor(val):Beer  55.8  11.2      5  873.      4.30 0.000711
## 3 S_Nuts            factor(val):Beer  32.2   6.44     5  872.      2.44 0.0329  
## 4 S_Smoked          factor(val):Beer  30.2   6.05     5  876.      2.29 0.0441  
## 5 S_Citrus fruit    factor(val):Beer  29.2   5.84     5  879.      2.21 0.0510  
## 6 S_Regional spices factor(val):Beer  27.8   5.57     5  873.      2.13 0.0595</code></pre>
<p>This table shows that S_Refreshing, S_Fruity, etc. has differential impact on the liking dependent on the beer it is detected in.</p>
<p>A deep dive into the effect can be done using the setup with a single variable above using the <em>tidyverse</em> and <em>broom</em> framework.</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="cata-and-hedonics.html#cb345-1" tabindex="-1"></a>tb2 <span class="ot">&lt;-</span> xbeer <span class="sc">%&gt;%</span> </span>
<span id="cb345-2"><a href="cata-and-hedonics.html#cb345-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">names_to =</span> <span class="st">&#39;cata&#39;</span>,<span class="at">values_to =</span> <span class="st">&#39;val&#39;</span>,<span class="at">cols =</span> S_Flowers<span class="sc">:</span>S_Vinous) <span class="sc">%&gt;%</span> </span>
<span id="cb345-3"><a href="cata-and-hedonics.html#cb345-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(cata) <span class="sc">%&gt;%</span> </span>
<span id="cb345-4"><a href="cata-and-hedonics.html#cb345-4" tabindex="-1"></a>  <span class="fu">do</span>(<span class="fu">lmer</span>(<span class="at">data =</span> ., Liking<span class="sc">~</span>Beer <span class="sc">+</span> <span class="fu">factor</span>(val)<span class="sc">:</span>Beer <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>Consumer.ID) <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">tidy</span>(<span class="at">conf.int =</span> T))</span></code></pre></div>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="cata-and-hedonics.html#cb346-1" tabindex="-1"></a>tb2 <span class="sc">%&gt;%</span> </span>
<span id="cb346-2"><a href="cata-and-hedonics.html#cb346-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(term,<span class="st">&#39;factor&#39;</span>)) <span class="sc">%&gt;%</span>  <span class="co"># filter to get individual beer differences. </span></span>
<span id="cb346-3"><a href="cata-and-hedonics.html#cb346-3" tabindex="-1"></a>  <span class="fu">filter</span>(cata <span class="sc">%in%</span> tb<span class="sc">$</span>cata[tb<span class="sc">$</span>term<span class="sc">==</span><span class="st">&#39;factor(val):Beer&#39;</span> <span class="sc">&amp;</span> tb<span class="sc">$</span>p.value<span class="sc">&lt;</span><span class="fl">0.05</span>]) <span class="sc">%&gt;%</span> <span class="co"># include only interesting ones. </span></span>
<span id="cb346-4"><a href="cata-and-hedonics.html#cb346-4" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data =</span> ., <span class="fu">aes</span>(<span class="fu">substr</span>(term,<span class="dv">5</span>,<span class="dv">14</span>), estimate, <span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high)) <span class="sc">+</span> </span>
<span id="cb346-5"><a href="cata-and-hedonics.html#cb346-5" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb346-6"><a href="cata-and-hedonics.html#cb346-6" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>() <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>cata) <span class="sc">+</span> </span>
<span id="cb346-7"><a href="cata-and-hedonics.html#cb346-7" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">79</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb346-8"><a href="cata-and-hedonics.html#cb346-8" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&#39;Beer&#39;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-233-1.png" width="672" /></p>
<p>The interpretation is that detecting <em>Smoked</em> in e.g. <em>Ravnsborg Red</em> tends to be positive, while it is pretty bad in <em>Wheat IPA</em>.
Similarly, <em>Fruity</em> is related to higher liking in <em>Wheat IPA</em> and <em>Porse Bock</em> but a bad thing in <em>River Beer</em>.
<em>Nutty</em> only matters on liking in <em>Ravnsborg Red</em> and <em>River beer</em>.</p>
</div>
</div>
<div id="pca-on-cata-and-liking" class="section level2 hasAnchor" number="16.2">
<h2><span class="header-section-number">16.2</span> PCA on CATA and Liking<a href="cata-and-hedonics.html#pca-on-cata-and-liking" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A PCA on the agglomerated CATA counts including the liking will reveal the attributes associated with the individual products, and which attributes are correlated with the liking.</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="cata-and-hedonics.html#cb347-1" tabindex="-1"></a>xbeeragglom <span class="ot">&lt;-</span> xbeer <span class="sc">%&gt;%</span> </span>
<span id="cb347-2"><a href="cata-and-hedonics.html#cb347-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">names_to =</span> <span class="st">&#39;cata&#39;</span>,<span class="at">values_to =</span> <span class="st">&#39;val&#39;</span>,<span class="at">cols =</span> <span class="fu">c</span>(S_Flowers<span class="sc">:</span>S_Vinous, Liking)) <span class="sc">%&gt;%</span> <span class="co">#looong format for all variables</span></span>
<span id="cb347-3"><a href="cata-and-hedonics.html#cb347-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(Beer,cata) <span class="sc">%&gt;%</span> <span class="co"># summarize for each beer type</span></span>
<span id="cb347-4"><a href="cata-and-hedonics.html#cb347-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">yy =</span> <span class="fu">mean</span>(val, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb347-5"><a href="cata-and-hedonics.html#cb347-5" tabindex="-1"></a>  <span class="fu">spread</span>(cata,yy) <span class="co"># wide format</span></span></code></pre></div>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="cata-and-hedonics.html#cb348-1" tabindex="-1"></a>mdlPCAcataliking <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(xbeeragglom[,<span class="sc">-</span><span class="dv">1</span>], <span class="at">scale. =</span> T)</span>
<span id="cb348-2"><a href="cata-and-hedonics.html#cb348-2" tabindex="-1"></a>ggbiplot<span class="sc">::</span><span class="fu">ggbiplot</span>(mdlPCAcataliking, <span class="at">labels =</span> xbeeragglom<span class="sc">$</span>Beer)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-235-1.png" width="672" /></p>
<p>The attributes Bean, Caramel, Warming, Aromatic etc is associated to the beer <em>Brown ale</em>, while Berrie, Dessert, Pungent, etc. is characteristic of <em>Wheat IPA</em>. Further, <em>Liking</em> is associated with all attributes on the first component, such as Aromatic, Warming, etc.</p>
<div id="a-beer-centric-model" class="section level3 hasAnchor" number="16.2.1">
<h3><span class="header-section-number">16.2.1</span> A beer centric model<a href="cata-and-hedonics.html#a-beer-centric-model" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The above PCA shows general good- and bad attributes in terms of liking. However, the univariate analysis indicated that for some beers e.g. Smoked was a good thing while for others not so much.</p>
<p>For that reason we can build a PCA for each beer to see which attributes that drives liking</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="cata-and-hedonics.html#cb349-1" tabindex="-1"></a>xbeer_pca <span class="ot">&lt;-</span> xbeer[<span class="fu">complete.cases</span>(xbeer),]</span>
<span id="cb349-2"><a href="cata-and-hedonics.html#cb349-2" tabindex="-1"></a>PCAmdl_RR <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(xbeer_pca[xbeer_pca<span class="sc">$</span>Beer<span class="sc">==</span><span class="st">&#39;Ravnsborg Red&#39;</span>,<span class="dv">14</span><span class="sc">:</span><span class="dv">41</span>], <span class="at">scale. =</span> T)</span>
<span id="cb349-3"><a href="cata-and-hedonics.html#cb349-3" tabindex="-1"></a>ggbiplot<span class="sc">::</span><span class="fu">ggbiplot</span>(PCAmdl_RR)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-236-1.png" width="672" /></p>
<p>Caramel, Savoury spices and Reefreshing is promoting liking, while Sour is not.</p>

</div>
</div>
<div id="analysis-by-pls" class="section level2 hasAnchor" number="16.3">
<h2><span class="header-section-number">16.3</span> Analysis by PLS<a href="cata-and-hedonics.html#analysis-by-pls" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The data used in this section is from the paper: <em>Giacalone, Davide,
Wender L.P. Bredie, and Michael Bom Frøst. “‘All-In-One Test’ (AI1): A
Rapid and Easily Applicable Approach to Consumer Product Testing.” Food
quality and preference 27.2 (2013): 108–119. Web.</em>. Data can be found
in the <em>data4consumerscience-package</em> as <strong>beercata</strong>, <strong>beerliking</strong></p>
<div id="pls-basics" class="section level3 hasAnchor" number="16.3.1">
<h3><span class="header-section-number">16.3.1</span> PLS basics<a href="cata-and-hedonics.html#pls-basics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Partial Least Squares regression (PLS) is a linear regression approach
that shares similarities with Principal Component Analysis (PCA), as
data is decomposed using latent variables. In the case of PLS there are
two matrices: predictors(<span class="math inline">\(\boldsymbol{X}\)</span>) and
response(<span class="math inline">\(\boldsymbol{Y}\)</span>). The X-matrix is used to predict the
Y-matrix. For both matrices the scores and loadings and resiudals are
computed:</p>
<p><span class="math display">\[X = TP^T + E_x\]</span> <span class="math display">\[Y = UQ^T + E_y\]</span></p>
<p>PLS orient latent variables to optimize covariance between X-scores
(<span class="math inline">\(\boldsymbol{T}\)</span>) and Y-scores (<span class="math inline">\(\boldsymbol{U}\)</span>), overcoming
limitations of traditional Multiple Linear Regression, such as handling
cases where variables outnumber observations or when X-variables are
mutually correlated.</p>
</div>
<div id="pls-to-predict-liking-based-on-cata-data" class="section level3 hasAnchor" number="16.3.2">
<h3><span class="header-section-number">16.3.2</span> PLS to predict liking based on CATA data<a href="cata-and-hedonics.html#pls-to-predict-liking-based-on-cata-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The object of this section is to find which descriptors e.g. sour, is
relevant for the liking, and which are irrelevant.</p>
<p>When dealing with CATA data, it’s reasonable to anticipate a low
explained variance in the model due to the high degree of uncertainty
within the CATA data itself. This means that as PLS attempts to
distinguish information from noise, the noise will account for a large
amount of variation in the data.</p>
<p>As preparation for the PLS, the two datasets <em>beerliking</em> and <em>beercata</em>
is combined:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="cata-and-hedonics.html#cb350-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb350-2"><a href="cata-and-hedonics.html#cb350-2" tabindex="-1"></a><span class="fu">library</span>(data4consumerscience)</span>
<span id="cb350-3"><a href="cata-and-hedonics.html#cb350-3" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;beerliking&quot;</span>)</span>
<span id="cb350-4"><a href="cata-and-hedonics.html#cb350-4" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;beercata&quot;</span>)</span>
<span id="cb350-5"><a href="cata-and-hedonics.html#cb350-5" tabindex="-1"></a></span>
<span id="cb350-6"><a href="cata-and-hedonics.html#cb350-6" tabindex="-1"></a><span class="co">#Merge the two datasets:</span></span>
<span id="cb350-7"><a href="cata-and-hedonics.html#cb350-7" tabindex="-1"></a>beer <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(<span class="fu">left_join</span>(beercata, beerliking, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;Consumer.ID&quot;</span>, <span class="st">&quot;Beer&quot;</span>)))</span></code></pre></div>
<p>A dataframe is created by merging the two previously mentioned datasets, by the function <em>left_join</em>, based on the common columns <em>Consumer.ID</em> and <em>Beer</em>. <em>na.omit</em> is used to remove rows containing missing values, as the PLS function to be used later on, can not handle missing values in the variables used.</p>
<p>The PLS model can be built with relative ease using the <em>mdatools</em>
package:</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="cata-and-hedonics.html#cb351-1" tabindex="-1"></a><span class="fu">library</span>(mdatools)</span>
<span id="cb351-2"><a href="cata-and-hedonics.html#cb351-2" tabindex="-1"></a><span class="co">#Create the PLS object:</span></span>
<span id="cb351-3"><a href="cata-and-hedonics.html#cb351-3" tabindex="-1"></a>beerPLS <span class="ot">&lt;-</span> <span class="fu">pls</span>(<span class="at">x =</span> beer[,<span class="dv">3</span><span class="sc">:</span><span class="dv">29</span>],<span class="at">y =</span> beer<span class="sc">$</span>Liking ,<span class="at">center =</span> T,<span class="at">scale =</span> F,<span class="at">ncomp =</span> <span class="dv">10</span>)</span>
<span id="cb351-4"><a href="cata-and-hedonics.html#cb351-4" tabindex="-1"></a></span>
<span id="cb351-5"><a href="cata-and-hedonics.html#cb351-5" tabindex="-1"></a><span class="fu">summary</span>(beerPLS)</span></code></pre></div>
<pre><code>## 
## PLS model (class pls) summary
## -------------------------------
## Info: 
## Number of selected components: 10
## Cross-validation: none
## 
##     X cumexpvar Y cumexpvar    R2  RMSE Slope Bias  RPD
## Cal      49.051      23.667 0.237 1.535 0.237    0 1.15</code></pre>
<p>The <em>pls</em> function is used, and the predictors is put as the x-value,
i.e. the CATA variables in column 3 to 29. and the response i.e. liking.
Both the y and x matrices are mean-centered, by specifying <em>center = T</em>, the <em>scale</em> argument specifies if the data should be Auto-scaled.
<em>ncomp</em> argument specifies how many components should be calculated - in this case 4.</p>
<p>The model gives a warning of no validation results found. This is
referring to the cross-validation that can be done, to find the optimal number of components needed to describe the optimal complexity of the model. Let us add cross-validation to the model:</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="cata-and-hedonics.html#cb353-1" tabindex="-1"></a><span class="co">#Create the PLS object:</span></span>
<span id="cb353-2"><a href="cata-and-hedonics.html#cb353-2" tabindex="-1"></a>beerPLSCV <span class="ot">&lt;-</span> <span class="fu">pls</span>(<span class="at">x =</span> beer[,<span class="dv">3</span><span class="sc">:</span><span class="dv">29</span>],<span class="at">y =</span> beer<span class="sc">$</span>Liking ,<span class="at">center =</span> T,<span class="at">scale =</span> F,<span class="at">ncomp =</span> <span class="dv">10</span>,<span class="at">cv =</span> <span class="fu">rep</span>(<span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(beer<span class="sc">$</span>Consumer.ID)), <span class="at">each =</span> <span class="dv">6</span>), <span class="at">length.out =</span> <span class="fu">nrow</span>(beer)))</span></code></pre></div>
<p>The cross-validation used is specified in the <em>cv</em> argument. The
argument takes a vast majority of inputs. Perhaps the easiest to use is
Leave-One-Out cross-validation that is specified by <em>cv = 1</em>, but might
also leave to overoptimistic results. In this case we cross-validate
based on the consumer, i.e. we obtain a vector containing
1,1,1,1,1,1…155,155,155,155,155,155 corresponding to the 6-times each
consumer answered.</p>
<p>The summary function can be used to see various information about the
PLS model:</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="cata-and-hedonics.html#cb354-1" tabindex="-1"></a><span class="fu">summary</span>(beerPLSCV)</span></code></pre></div>
<pre><code>## 
## PLS model (class pls) summary
## -------------------------------
## Info: 
## Number of selected components: 2
## Cross-validation: user defined with 154 segments
## 
##     X cumexpvar Y cumexpvar    R2  RMSE Slope   Bias  RPD
## Cal     15.8701    23.04695 0.230 1.541 0.230  0e+00 1.14
## Cv           NA          NA 0.192 1.579 0.209 -4e-04 1.11</code></pre>
<p>The summary seems to think 2 components is the optimal amount.</p>
<p>Let us plot the RMSE and see if this correct:</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="cata-and-hedonics.html#cb356-1" tabindex="-1"></a><span class="fu">plotRMSE</span>(beerPLSCV)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-243-1.png" width="672" /></p>
<p>The increase in the RMSECV from components 2 to 3, seems to indicate
that the optimal number of components is indeed 2.</p>
</div>
<div id="regression-coefficients" class="section level3 hasAnchor" number="16.3.3">
<h3><span class="header-section-number">16.3.3</span> Regression coefficients<a href="cata-and-hedonics.html#regression-coefficients" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In Partial Least Squares (PLS) regression, a regression vector refers to
the set of coefficients that are used to model the relationship between
the predictor variables (<span class="math inline">\(\boldsymbol{X}\)</span>) and the response variable
(<span class="math inline">\(\boldsymbol{Y}\)</span>). These coefficients define how much each predictor
variable contributes to predicting the response variable (in this case
liking).</p>
<p>The regression coefficients can easily be visualized using the
<em>mdatools</em> package:</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="cata-and-hedonics.html#cb357-1" tabindex="-1"></a><span class="fu">plotRegcoeffs</span>(beerPLSCV,<span class="at">show.labels =</span> T, <span class="at">show.ci =</span> T, <span class="at">ncomp =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-244-1.png" width="672" /></p>
<p>The function <em>plotRegcoeffs</em> is used, and the PLS object is specified.
<em>show.labels = T</em> specifies the labels from <span class="math inline">\(\boldsymbol{X}\)</span> is printed
on the bars. <em>show.ci = T</em> specifies that the confidence interval is
displayed on the bars. <em>ncomp</em> specifies the component the regression
coefficents should be displayed for.</p>
<p>From the regression vector plot, it seems the attributes S_Sour, S_Herbs
and S_Regional_Spices significantly lowers the liking of the beers. The
attributes S-Refreshing, S_aromatic, S_caramel among others seems to
significantly increase the liking of the beers. In addition there are
irrelevant non-significant attributes (i.e. confidence interval crossing
0) such as S_foamy and S_Berries among many other attributes.</p>
<p>The significance of the attributes can also be displayed in a table with coefficients, t-values, p-values and confidence interval:</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="cata-and-hedonics.html#cb358-1" tabindex="-1"></a><span class="fu">summary</span>(beerPLSCV<span class="sc">$</span>coeffs, <span class="at">ncomp =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## 
## Regression coefficients for y1 (ncomp = 2)
## ------------------------------------------
##                        Coeffs  Std. err. t-value p-value        2.5%         97.5%
## S_Flowers         -0.23158042 0.12595803   -1.84   0.068 -0.48042189  0.0172610442
## S_Beans            0.26714365 0.12975840    2.06   0.041  0.01079422  0.5234930834
## S_Intense berries -0.22999841 0.13533738   -1.70   0.091 -0.49736963  0.0373728119
## S_Caramel          0.58173722 0.12272329    4.74   0.000  0.33928627  0.8241881690
## S_Nuts             0.26746273 0.11940662    2.24   0.027  0.03156418  0.5033612878
## S_Savoury spices  -0.07635781 0.14161814   -0.54   0.590 -0.35613724  0.2034216103
## S_Dessert spices   0.14026558 0.10791024    1.30   0.196 -0.07292084  0.3534519969
## S_Regional spices -0.24669084 0.12451962   -1.98   0.049 -0.49269060 -0.0006910843
## S_Herbs           -0.33669422 0.12705252   -2.65   0.009 -0.58769796 -0.0856904922
## S_Citrus fruit     0.14651136 0.12850156    1.14   0.256 -0.10735509  0.4003778041
## S_Berries         -0.03738398 0.07788665   -0.48   0.632 -0.19125610  0.1164881319
## S_Fruit           -0.10048664 0.10640048   -0.95   0.346 -0.31069041  0.1097171243
## S_Dried fruit     -0.14333307 0.11675004   -1.23   0.221 -0.37398332  0.0873171737
## S_Liquor          -0.08094431 0.11402110   -0.71   0.479 -0.30620328  0.1443146697
## S_Bitter          -0.02127784 0.11270667   -0.19   0.851 -0.24394004  0.2013843604
## S_Sparkling        0.20738928 0.12043143    1.72   0.087 -0.03053389  0.4453124582
## S_Refreshing       1.31766090 0.09824734   13.41   0.000  1.12356440  1.5117574043
## S_Fruity           0.01962225 0.12319224    0.16   0.874 -0.22375515  0.2629996473
## S_Aromatic         0.51375513 0.13593047    3.78   0.000  0.24521221  0.7822980524
## S_Pungent          0.01840210 0.13739938    0.13   0.894 -0.25304279  0.2898469894
## S_Still            0.08924425 0.11883316    0.75   0.454 -0.14552139  0.3240098869
## S_Smoked           0.04938012 0.14238940    0.35   0.729 -0.23192299  0.3306832346
## S_Foamy            0.20780879 0.14847629    1.40   0.164 -0.08551954  0.5011371156
## S_Sour            -0.79570400 0.11338898   -7.02   0.000 -1.01971417 -0.5716938406
## S_Sweet            0.33782992 0.13330829    2.53   0.012  0.07446735  0.6011924920
## S_Warming          0.28930069 0.12015252    2.41   0.017  0.05192853  0.5266728446
## S_Vinous          -0.06800759 0.08998145   -0.76   0.451 -0.24577407  0.1097588894
## 
## Degrees of freedom (Jack-Knifing): 153</code></pre>
<p>These results are in line, with the visual interpretation above.</p>
<p>There are many other interesting plot methods, which can be found here:
<a href="https://mdatools.com/docs/pls--plotting-methods.html">mdatools.com</a></p>
</div>
</div>
<div id="l-pls" class="section level2 hasAnchor" number="16.4">
<h2><span class="header-section-number">16.4</span> L-PLS<a href="cata-and-hedonics.html#l-pls" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The data used in this section is from the paper: <em>Giacalone, Davide,
Wender L.P. Bredie, and Michael Bom Frøst. “‘All-In-One Test’ (AI1): A
Rapid and Easily Applicable Approach to Consumer Product Testing.” Food
quality and preference 27.2 (2013): 108–119. Web.</em>. Data can be found
in the <em>data4consumerscience-package</em> as <strong>beercata</strong>, <strong>beerdemo</strong>,
<strong>beerliking</strong></p>
<p><em>L-PLS</em> is a valuable tool in identifying the sensory attributes and
consumer background characteristics that contribute to a consumer’s
liking of a product, such as beer.</p>
<p>A L-PLS model is created using three data blocks: <strong>X1</strong>, <strong>X2</strong>, and
<strong>X3</strong>. <strong>X1</strong> is an IxN matrix that contains consumer liking scores for
each sample, X2 is an IxJ matrix that includes sensory attributes for
each sample, and X3 is a KxN matrix that comprises consumer background
data. I represents the number of samples (beer), N represents the number
of consumers, J represents the number of sensory variables, and K
represents the number of consumer background variables.</p>
<p>There are two ways to perform L-PLS: exo and endo. In the exo-LPLSR
model, X1 serves as the regressor, while in the endo-LPLSR model, X2 and
X3 are the regressors. The exo-LPLSR model typically explains more of X
than the endo-LPLSR model because the exo-LPLSR derives its bilinear
components from X, whereas the endo-LPLSR derives its components from Y
and Z. The difference in the plot’s appearance can be predicted from the
explained variance of each model type.</p>
<p>If both plots are similar in nature and in terms of the interpretation
of the correlation loading plots, it may indicate consistent
co-variation between the three matrices.</p>
<p>The exo version will only be showcased here, but the principle is the
same, and endo can be useful for data exploration.</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="cata-and-hedonics.html#cb360-1" tabindex="-1"></a><span class="fu">library</span>(data4consumerscience)</span>
<span id="cb360-2"><a href="cata-and-hedonics.html#cb360-2" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;beercata&quot;</span>)</span>
<span id="cb360-3"><a href="cata-and-hedonics.html#cb360-3" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;beerdemo&quot;</span>)</span>
<span id="cb360-4"><a href="cata-and-hedonics.html#cb360-4" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;beerliking&quot;</span>)</span></code></pre></div>
</div>
<div id="creating-x1-x2-x3." class="section level2 hasAnchor" number="16.5">
<h2><span class="header-section-number">16.5</span> Creating X1, X2, X3.<a href="cata-and-hedonics.html#creating-x1-x2-x3." class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The preparation of the data, requires quite a lot of data manipulation.</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="cata-and-hedonics.html#cb361-1" tabindex="-1"></a><span class="co"># Load necessary libraries</span></span>
<span id="cb361-2"><a href="cata-and-hedonics.html#cb361-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb361-3"><a href="cata-and-hedonics.html#cb361-3" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb361-4"><a href="cata-and-hedonics.html#cb361-4" tabindex="-1"></a></span>
<span id="cb361-5"><a href="cata-and-hedonics.html#cb361-5" tabindex="-1"></a><span class="co"># Prepare data for LPLS analysis</span></span>
<span id="cb361-6"><a href="cata-and-hedonics.html#cb361-6" tabindex="-1"></a></span>
<span id="cb361-7"><a href="cata-and-hedonics.html#cb361-7" tabindex="-1"></a><span class="do">## Y - Beer Liking data</span></span>
<span id="cb361-8"><a href="cata-and-hedonics.html#cb361-8" tabindex="-1"></a>X1 <span class="ot">&lt;-</span> beerliking <span class="sc">%&gt;%</span></span>
<span id="cb361-9"><a href="cata-and-hedonics.html#cb361-9" tabindex="-1"></a>  <span class="fu">select</span>(Beer, Liking, Consumer.ID) <span class="sc">%&gt;%</span></span>
<span id="cb361-10"><a href="cata-and-hedonics.html#cb361-10" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Consumer.ID, <span class="at">values_from =</span> Liking) <span class="sc">%&gt;%</span></span>
<span id="cb361-11"><a href="cata-and-hedonics.html#cb361-11" tabindex="-1"></a>  <span class="fu">column_to_rownames</span>(<span class="st">&quot;Beer&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb361-12"><a href="cata-and-hedonics.html#cb361-12" tabindex="-1"></a>  <span class="fu">select_if</span>(<span class="sc">~!</span><span class="fu">any</span>(<span class="fu">is.na</span>(.)))</span>
<span id="cb361-13"><a href="cata-and-hedonics.html#cb361-13" tabindex="-1"></a></span>
<span id="cb361-14"><a href="cata-and-hedonics.html#cb361-14" tabindex="-1"></a><span class="do">## X - Beer Attributes data</span></span>
<span id="cb361-15"><a href="cata-and-hedonics.html#cb361-15" tabindex="-1"></a><span class="fu">colnames</span>(beercata) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;S_&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="fu">colnames</span>(beercata))</span>
<span id="cb361-16"><a href="cata-and-hedonics.html#cb361-16" tabindex="-1"></a>X2 <span class="ot">&lt;-</span> beercata <span class="sc">%&gt;%</span></span>
<span id="cb361-17"><a href="cata-and-hedonics.html#cb361-17" tabindex="-1"></a>  <span class="fu">select</span>(Beer, Flowers<span class="sc">:</span>Vinous) <span class="sc">%&gt;%</span></span>
<span id="cb361-18"><a href="cata-and-hedonics.html#cb361-18" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">!</span>Beer, <span class="at">names_to =</span> <span class="st">&quot;Attribute&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;Value&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb361-19"><a href="cata-and-hedonics.html#cb361-19" tabindex="-1"></a>  <span class="fu">group_by</span>(Beer, Attribute) <span class="sc">%&gt;%</span></span>
<span id="cb361-20"><a href="cata-and-hedonics.html#cb361-20" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">Sum_value =</span> <span class="fu">sum</span>(Value)) <span class="sc">%&gt;%</span></span>
<span id="cb361-21"><a href="cata-and-hedonics.html#cb361-21" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;Attribute&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;Sum_value&quot;</span>, <span class="at">values_fill =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb361-22"><a href="cata-and-hedonics.html#cb361-22" tabindex="-1"></a>  <span class="fu">column_to_rownames</span>(<span class="st">&quot;Beer&quot;</span>)</span>
<span id="cb361-23"><a href="cata-and-hedonics.html#cb361-23" tabindex="-1"></a></span>
<span id="cb361-24"><a href="cata-and-hedonics.html#cb361-24" tabindex="-1"></a><span class="do">## Z - Consumer Demographics data</span></span>
<span id="cb361-25"><a href="cata-and-hedonics.html#cb361-25" tabindex="-1"></a><span class="co"># select subset of columns and create binary columns for categorical variables</span></span>
<span id="cb361-26"><a href="cata-and-hedonics.html#cb361-26" tabindex="-1"></a>binary_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Gender&quot;</span>, <span class="st">&quot;Age&quot;</span>, <span class="st">&quot;Income&quot;</span>, <span class="st">&quot;Householdsize&quot;</span>, <span class="st">&quot;Beer types/month&quot;</span>)</span>
<span id="cb361-27"><a href="cata-and-hedonics.html#cb361-27" tabindex="-1"></a><span class="cf">for</span> (col <span class="cf">in</span> binary_cols) {</span>
<span id="cb361-28"><a href="cata-and-hedonics.html#cb361-28" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.factor</span>(beerdemo[[col]]) <span class="sc">|</span> <span class="fu">is.character</span>(beerdemo[[col]])) {</span>
<span id="cb361-29"><a href="cata-and-hedonics.html#cb361-29" tabindex="-1"></a>    levels <span class="ot">&lt;-</span> <span class="fu">unique</span>(beerdemo[[col]])</span>
<span id="cb361-30"><a href="cata-and-hedonics.html#cb361-30" tabindex="-1"></a>    <span class="cf">for</span> (level <span class="cf">in</span> levels) {</span>
<span id="cb361-31"><a href="cata-and-hedonics.html#cb361-31" tabindex="-1"></a>      new_col <span class="ot">&lt;-</span> <span class="fu">paste</span>(col, level, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span>
<span id="cb361-32"><a href="cata-and-hedonics.html#cb361-32" tabindex="-1"></a>      beerdemo[[new_col]] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(beerdemo[[col]] <span class="sc">==</span> level, <span class="st">&quot;1&quot;</span>, <span class="st">&quot;0&quot;</span>)</span>
<span id="cb361-33"><a href="cata-and-hedonics.html#cb361-33" tabindex="-1"></a>    }</span>
<span id="cb361-34"><a href="cata-and-hedonics.html#cb361-34" tabindex="-1"></a>  }</span>
<span id="cb361-35"><a href="cata-and-hedonics.html#cb361-35" tabindex="-1"></a>}</span>
<span id="cb361-36"><a href="cata-and-hedonics.html#cb361-36" tabindex="-1"></a></span>
<span id="cb361-37"><a href="cata-and-hedonics.html#cb361-37" tabindex="-1"></a><span class="co"># pivot longer and summarize to calculate sum values for each Consumer ID-Attribute combination</span></span>
<span id="cb361-38"><a href="cata-and-hedonics.html#cb361-38" tabindex="-1"></a>X3 <span class="ot">&lt;-</span> beerdemo <span class="sc">%&gt;%</span></span>
<span id="cb361-39"><a href="cata-and-hedonics.html#cb361-39" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>(Gender<span class="sc">:</span><span class="st">`</span><span class="at">Beer types/month</span><span class="st">`</span>),<span class="st">`</span><span class="at">Interest in food</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">Beer types/month_9 - 16</span><span class="st">`</span>,<span class="st">`</span><span class="at">Consumer ID</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb361-40"><a href="cata-and-hedonics.html#cb361-40" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Consumer ID</span><span class="st">`</span>), </span>
<span id="cb361-41"><a href="cata-and-hedonics.html#cb361-41" tabindex="-1"></a>            <span class="at">.funs =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="fu">as.factor</span>(.) <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>())) <span class="sc">%&gt;%</span></span>
<span id="cb361-42"><a href="cata-and-hedonics.html#cb361-42" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span><span class="st">`</span><span class="at">Interest in food</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">Beer types/month_9 - 16</span><span class="st">`</span> , <span class="at">names_to =</span> <span class="st">&quot;Attribute&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;Value&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb361-43"><a href="cata-and-hedonics.html#cb361-43" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="st">`</span><span class="at">Consumer ID</span><span class="st">`</span>, Attribute) <span class="sc">%&gt;%</span></span>
<span id="cb361-44"><a href="cata-and-hedonics.html#cb361-44" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">sum_Value =</span> <span class="fu">sum</span>(Value)) <span class="sc">%&gt;%</span></span>
<span id="cb361-45"><a href="cata-and-hedonics.html#cb361-45" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;Consumer ID&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;sum_Value&quot;</span>, <span class="at">values_fill =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb361-46"><a href="cata-and-hedonics.html#cb361-46" tabindex="-1"></a>  <span class="fu">column_to_rownames</span>(<span class="st">&quot;Attribute&quot;</span>)</span>
<span id="cb361-47"><a href="cata-and-hedonics.html#cb361-47" tabindex="-1"></a></span>
<span id="cb361-48"><a href="cata-and-hedonics.html#cb361-48" tabindex="-1"></a><span class="co"># keep only columns in Y</span></span>
<span id="cb361-49"><a href="cata-and-hedonics.html#cb361-49" tabindex="-1"></a>col_names <span class="ot">&lt;-</span> <span class="fu">names</span>(X1)</span>
<span id="cb361-50"><a href="cata-and-hedonics.html#cb361-50" tabindex="-1"></a>X3 <span class="ot">&lt;-</span> X3[,col_names]</span>
<span id="cb361-51"><a href="cata-and-hedonics.html#cb361-51" tabindex="-1"></a></span>
<span id="cb361-52"><a href="cata-and-hedonics.html#cb361-52" tabindex="-1"></a><span class="co"># LPLS function only accepts matrix. Convert data frames to matrices.</span></span>
<span id="cb361-53"><a href="cata-and-hedonics.html#cb361-53" tabindex="-1"></a>X1_mat <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(X1)</span>
<span id="cb361-54"><a href="cata-and-hedonics.html#cb361-54" tabindex="-1"></a>X2_mat <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(X2)</span>
<span id="cb361-55"><a href="cata-and-hedonics.html#cb361-55" tabindex="-1"></a>X3_mat <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(X3)</span></code></pre></div>
</div>
<div id="building-the-model-the-l-pls-model-can-be-built-using-the-lpls" class="section level2 hasAnchor" number="16.6">
<h2><span class="header-section-number">16.6</span> Building the model: The L-PLS model can be built, using the <em>lpls</em><a href="cata-and-hedonics.html#building-the-model-the-l-pls-model-can-be-built-using-the-lpls" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>function from the <em>multiblock</em> package.</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="cata-and-hedonics.html#cb362-1" tabindex="-1"></a><span class="fu">library</span>(multiblock)</span>
<span id="cb362-2"><a href="cata-and-hedonics.html#cb362-2" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb362-3"><a href="cata-and-hedonics.html#cb362-3" tabindex="-1"></a><span class="co">#Scale the Z-matrix as we have semi-contious and binary data. </span></span>
<span id="cb362-4"><a href="cata-and-hedonics.html#cb362-4" tabindex="-1"></a>lp_exo <span class="ot">&lt;-</span> <span class="fu">lpls</span>(X1_mat,X2_mat,X3_mat,<span class="at">type =</span> <span class="st">&quot;exo&quot;</span>,<span class="at">scale =</span> <span class="fu">c</span>(F,F,T),<span class="at">doublecenter =</span> T,<span class="at">ncomp =</span> <span class="dv">5</span>)</span></code></pre></div>
<div id="finding-the-explained-variance-for-exo-l-pls" class="section level3 hasAnchor" number="16.6.1">
<h3><span class="header-section-number">16.6.1</span> Finding the explained variance for exo L-PLS<a href="cata-and-hedonics.html#finding-the-explained-variance-for-exo-l-pls" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The explained variance for the exo L-PLS can easily be sacked from the
model object, and displayed nicely in a table using the <em>kableExtra</em>
package.</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="cata-and-hedonics.html#cb363-1" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb363-2"><a href="cata-and-hedonics.html#cb363-2" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb363-3"><a href="cata-and-hedonics.html#cb363-3" tabindex="-1"></a>expVarExo <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">as.data.frame</span>(lp_exo<span class="sc">$</span>vars)<span class="sc">*</span><span class="dv">100</span>)</span>
<span id="cb363-4"><a href="cata-and-hedonics.html#cb363-4" tabindex="-1"></a><span class="fu">colnames</span>(expVarExo) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;Comp &quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb363-5"><a href="cata-and-hedonics.html#cb363-5" tabindex="-1"></a><span class="fu">rownames</span>(expVarExo) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;X&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb363-6"><a href="cata-and-hedonics.html#cb363-6" tabindex="-1"></a></span>
<span id="cb363-7"><a href="cata-and-hedonics.html#cb363-7" tabindex="-1"></a><span class="co">#Create a table</span></span>
<span id="cb363-8"><a href="cata-and-hedonics.html#cb363-8" tabindex="-1"></a><span class="fu">kbl</span>(expVarExo, <span class="at">caption =</span> <span class="st">&quot;Explained Variance by Component (%)&quot;</span>,<span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb363-9"><a href="cata-and-hedonics.html#cb363-9" tabindex="-1"></a>  <span class="fu">kable_paper</span>(<span class="st">&quot;hover&quot;</span>,<span class="at">full_width =</span> F)</span></code></pre></div>
<p>The explained variance is first sacked from the L-PLS object, and stored
in a data-frame, from where it is transposed, and converted to
percentage (%). <em>kbl</em> function is then used to get a nice table.</p>
<p>From looking at the table, one would expect the consumer descriptors to
be close to origin in terms of scores. One could have a look at the endo
version of the L-PLS to get a better understanding of the consumer
descriptors.</p>
</div>
<div id="cross-validation-next-let-us-have-a-look-how-many-components-we" class="section level3 hasAnchor" number="16.6.2">
<h3><span class="header-section-number">16.6.2</span> Cross-validation Next let us have a look how many components we<a href="cata-and-hedonics.html#cross-validation-next-let-us-have-a-look-how-many-components-we" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>should look at, by doing a jack-knifing cross-validation on the
consumers:</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="cata-and-hedonics.html#cb364-1" tabindex="-1"></a>lp.cv2 <span class="ot">&lt;-</span> <span class="fu">lplsCV</span>(lp_exo, <span class="at">segments2 =</span> <span class="fu">as.list</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">dim</span>(X1)[<span class="dv">2</span>]))</span>
<span id="cb364-2"><a href="cata-and-hedonics.html#cb364-2" tabindex="-1"></a>lp.cv2<span class="sc">$</span>rmsep</span></code></pre></div>
<p>It looks like 2 components is sufficient.</p>
</div>
<div id="vizulization-now-we-would-like-to-visuzlalize-our-l-pls-model.-when" class="section level3 hasAnchor" number="16.6.3">
<h3><span class="header-section-number">16.6.3</span> Vizulization Now we would like to visuzlalize our L-PLS model. When<a href="cata-and-hedonics.html#vizulization-now-we-would-like-to-visuzlalize-our-l-pls-model.-when" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>using L-PLS for vizulization one should use the orthognoal exo, as this
will give the orthogonal scores. We build the orthogonal exo in the same
way as before, but chainging the type.</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="cata-and-hedonics.html#cb365-1" tabindex="-1"></a>lp_exo_ort <span class="ot">&lt;-</span> <span class="fu">lpls</span>(X1_mat,X2_mat,X3_mat,<span class="at">type =</span> <span class="st">&quot;exo_ort&quot;</span>,<span class="at">scale =</span> <span class="fu">c</span>(F,F,T),<span class="at">doublecenter =</span> T,<span class="at">ncomp =</span> <span class="dv">5</span>)</span></code></pre></div>
<p>Now we plot the L-PLS model. One can chose to plot, the X1, X2 or X3
correlations, or perhaps a combination of 2, or all.</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="cata-and-hedonics.html#cb366-1" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</span>
<span id="cb366-2"><a href="cata-and-hedonics.html#cb366-2" tabindex="-1"></a><span class="fu">plot</span>(lp_exo,<span class="at">doplot =</span> <span class="fu">c</span>(F,F,T)) <span class="co">#X3 correlations</span></span>
<span id="cb366-3"><a href="cata-and-hedonics.html#cb366-3" tabindex="-1"></a><span class="fu">plot</span>(lp_exo,<span class="at">doplot =</span> <span class="fu">c</span>(F,T,F)) <span class="co">#X1 correlations</span></span>
<span id="cb366-4"><a href="cata-and-hedonics.html#cb366-4" tabindex="-1"></a><span class="fu">plot</span>(lp_exo,<span class="at">doplot =</span> <span class="fu">c</span>(T,T,F)) <span class="co">#X2 and X1 correlations</span></span>
<span id="cb366-5"><a href="cata-and-hedonics.html#cb366-5" tabindex="-1"></a><span class="fu">plot</span>(lp_exo,<span class="at">doplot =</span> <span class="fu">c</span>(F,T,T)) <span class="co">#X1 and X3 correlations</span></span></code></pre></div>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="cata-and-hedonics.html#cb367-1" tabindex="-1"></a><span class="fu">plot</span>(lp_exo,<span class="at">doplot =</span> <span class="fu">c</span>(T,T,T)) <span class="co">#combined</span></span></code></pre></div>
<p>From the plots, the sensory attribute <em>Berries</em> is correlated with the
sensory attribute <em>Herbs</em>. These two sensory attributes is in turn
correlated with the beer <em>River Beer</em>. In turn <em>River Beer</em> is opposite
of the beer <em>Brown Ale</em>, which seems to be very <em>Foamy</em>. In this case
our consumer background descriptors do not seem to explain a whole lot.
But it does seem like a young age <em>Age 18-25</em> is associated with a low
income (<em>Income 0-10.000</em>). Where a consumer of such description tends
to like <em>Porse Bock</em>.</p>
<p>It is always a good idea to confirm the observed correlations by
plotting the raw data. Lets have a look at some of them.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="hedonic-rating-e.g.-liking-scores.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="projective-mapping.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/mortenarendt/dataanalyssisconsumerscience/edit/master/15_CATA_and_liking.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/mortenarendt/dataanalyssisconsumerscience/blob/master/15_CATA_and_liking.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
