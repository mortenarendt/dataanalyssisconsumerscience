<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 11 Consumer segmentation | Data Analysis in R for Sensory and Consumer Science</title>
  <meta name="description" content="Chapter 11 Consumer segmentation | Data Analysis in R for Sensory and Consumer Science" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 11 Consumer segmentation | Data Analysis in R for Sensory and Consumer Science" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 11 Consumer segmentation | Data Analysis in R for Sensory and Consumer Science" />
  
  
  

<meta name="author" content="Morten Arendt Rasmussen, Julius Jessen Terp, Helene C. Reinbach and Bodil H. Allesen-Holm" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro-to-large-survey-data.html"/>
<link rel="next" href="profiling-segments.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/vembedr-0.1.5/css/vembedr.css" rel="stylesheet" />
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Analysis in R for Consumer Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction to the book</a></li>
<li class="chapter" data-level="2" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-get-started---understanding-r-and-rstudio"><i class="fa fa-check"></i><b>2.1</b> How to get started - understanding R (and RStudio)</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#organise-and-save-scripts"><i class="fa fa-check"></i><b>2.1.1</b> Organise and save scripts</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-import-data"><i class="fa fa-check"></i><b>2.2</b> How to import data</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#import-data-from-r-package"><i class="fa fa-check"></i><b>2.2.1</b> Import data from R-package</a></li>
<li class="chapter" data-level="2.2.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#importing-a-csv-file"><i class="fa fa-check"></i><b>2.2.2</b> Importing a csv file</a></li>
<li class="chapter" data-level="2.2.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#importing-an-excel-filesheet"><i class="fa fa-check"></i><b>2.2.3</b> Importing an Excel file/sheet</a></li>
<li class="chapter" data-level="2.2.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#clipboard-import"><i class="fa fa-check"></i><b>2.2.4</b> Clipboard import</a></li>
<li class="chapter" data-level="2.2.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#looking-at-the-imported-elements"><i class="fa fa-check"></i><b>2.2.5</b> Looking at the imported elements</a></li>
<li class="chapter" data-level="2.2.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#numbers-and-factors---changing-categorisation"><i class="fa fa-check"></i><b>2.2.6</b> Numbers and factors - changing categorisation</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-edit-and-merge-datasets"><i class="fa fa-check"></i><b>2.3</b> How to edit and merge datasets</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-save-the-data"><i class="fa fa-check"></i><b>2.4</b> How to save the data</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-export-data-results"><i class="fa fa-check"></i><b>2.5</b> How to export data / results</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-load-your-rdata"><i class="fa fa-check"></i><b>2.6</b> How to load your RData</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#how-to-clear-your-environment"><i class="fa fa-check"></i><b>2.7</b> How to clear your environment</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="libraries.html"><a href="libraries.html"><i class="fa fa-check"></i><b>3</b> Libraries</a></li>
<li class="chapter" data-level="4" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html"><i class="fa fa-check"></i><b>4</b> Descriptive statistics</a>
<ul>
<li class="chapter" data-level="4.1" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#descriptives-for-a-continuous-variable"><i class="fa fa-check"></i><b>4.1</b> Descriptives for a continuous variable</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#mean-median"><i class="fa fa-check"></i><b>4.1.1</b> Mean / median</a></li>
<li class="chapter" data-level="4.1.2" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#variance"><i class="fa fa-check"></i><b>4.1.2</b> Variance</a></li>
<li class="chapter" data-level="4.1.3" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#standard-deviation"><i class="fa fa-check"></i><b>4.1.3</b> Standard deviation</a></li>
<li class="chapter" data-level="4.1.4" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#calculations"><i class="fa fa-check"></i><b>4.1.4</b> Calculations</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#distributions-of-count-data"><i class="fa fa-check"></i><b>4.2</b> Distributions of count data</a></li>
<li class="chapter" data-level="4.3" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#aggregate"><i class="fa fa-check"></i><b>4.3</b> Aggregate</a></li>
<li class="chapter" data-level="4.4" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#tidyverse"><i class="fa fa-check"></i><b>4.4</b> Tidyverse</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="inferential-statistics.html"><a href="inferential-statistics.html"><i class="fa fa-check"></i><b>5</b> Inferential statistics</a>
<ul>
<li class="chapter" data-level="5.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#intro"><i class="fa fa-check"></i><b>5.1</b> Intro</a></li>
<li class="chapter" data-level="5.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#hypothesis-testing"><i class="fa fa-check"></i><b>5.2</b> Hypothesis testing</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#power"><i class="fa fa-check"></i><b>5.2.1</b> Power</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="inferential-statistics.html"><a href="inferential-statistics.html#confidence-intervals"><i class="fa fa-check"></i><b>5.3</b> Confidence intervals</a></li>
<li class="chapter" data-level="5.4" data-path="inferential-statistics.html"><a href="inferential-statistics.html#t-test"><i class="fa fa-check"></i><b>5.4</b> T-test</a></li>
<li class="chapter" data-level="5.5" data-path="inferential-statistics.html"><a href="inferential-statistics.html#f-test"><i class="fa fa-check"></i><b>5.5</b> F-test</a></li>
<li class="chapter" data-level="5.6" data-path="inferential-statistics.html"><a href="inferential-statistics.html#analysis-of-variance-anova"><i class="fa fa-check"></i><b>5.6</b> Analysis of Variance (ANOVA)</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#one-way-anova"><i class="fa fa-check"></i><b>5.6.1</b> One-way ANOVA</a></li>
<li class="chapter" data-level="5.6.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#two-way-anova"><i class="fa fa-check"></i><b>5.6.2</b> Two-way ANOVA</a></li>
<li class="chapter" data-level="5.6.3" data-path="inferential-statistics.html"><a href="inferential-statistics.html#post-hoc-test---tukeys-honest-significant-difference"><i class="fa fa-check"></i><b>5.6.3</b> Post hoc test - Tukey’s Honest Significant Difference</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="inferential-statistics.html"><a href="inferential-statistics.html#introduction-to-linear-and-mixed-models"><i class="fa fa-check"></i><b>5.7</b> Introduction to linear and mixed models</a></li>
<li class="chapter" data-level="5.8" data-path="inferential-statistics.html"><a href="inferential-statistics.html#normal-and-mixed-models"><i class="fa fa-check"></i><b>5.8</b> Normal and Mixed models</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#normal-model"><i class="fa fa-check"></i><b>5.8.1</b> Normal model</a></li>
<li class="chapter" data-level="5.8.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#mixed-model"><i class="fa fa-check"></i><b>5.8.2</b> Mixed model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="plotting-data.html"><a href="plotting-data.html"><i class="fa fa-check"></i><b>6</b> Plotting data</a>
<ul>
<li class="chapter" data-level="6.1" data-path="plotting-data.html"><a href="plotting-data.html#histograms-and-boxplots"><i class="fa fa-check"></i><b>6.1</b> Histograms and boxplots</a></li>
<li class="chapter" data-level="6.2" data-path="plotting-data.html"><a href="plotting-data.html#scatter-plots"><i class="fa fa-check"></i><b>6.2</b> Scatter plots</a></li>
<li class="chapter" data-level="6.3" data-path="plotting-data.html"><a href="plotting-data.html#how-to-export-plots"><i class="fa fa-check"></i><b>6.3</b> How to export plots</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="introduction-to-pca-and-multivariate-data.html"><a href="introduction-to-pca-and-multivariate-data.html"><i class="fa fa-check"></i><b>7</b> Introduction to PCA and multivariate data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="introduction-to-pca-and-multivariate-data.html"><a href="introduction-to-pca-and-multivariate-data.html#a-bit-of-math"><i class="fa fa-check"></i><b>7.1</b> A bit of math</a></li>
<li class="chapter" data-level="7.2" data-path="introduction-to-pca-and-multivariate-data.html"><a href="introduction-to-pca-and-multivariate-data.html#interpreting-model-output"><i class="fa fa-check"></i><b>7.2</b> Interpreting model output</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="introduction-to-pca-and-multivariate-data.html"><a href="introduction-to-pca-and-multivariate-data.html#biplot"><i class="fa fa-check"></i><b>7.2.1</b> Biplot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html"><i class="fa fa-check"></i><b>8</b> Buffet and survey data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#buffet-data"><i class="fa fa-check"></i><b>8.1</b> Buffet data</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#introduction-to-buffet-data"><i class="fa fa-check"></i><b>8.1.1</b> Introduction to buffet data</a></li>
<li class="chapter" data-level="8.1.2" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#plotting-buffet-data"><i class="fa fa-check"></i><b>8.1.2</b> Plotting buffet data</a></li>
<li class="chapter" data-level="8.1.3" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#mixed-model-for-buffet-data"><i class="fa fa-check"></i><b>8.1.3</b> Mixed model for buffet data</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#survey-data"><i class="fa fa-check"></i><b>8.2</b> Survey data</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#plotting-survey-data"><i class="fa fa-check"></i><b>8.2.1</b> Plotting survey data</a></li>
<li class="chapter" data-level="8.2.2" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#linear-model-for-buffet-data"><i class="fa fa-check"></i><b>8.2.2</b> Linear model for buffet data</a></li>
<li class="chapter" data-level="8.2.3" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#post-hoc-test-for-survey-data"><i class="fa fa-check"></i><b>8.2.3</b> Post-hoc test for survey data</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#combining-consumption-and-survey-data"><i class="fa fa-check"></i><b>8.3</b> Combining consumption and survey data</a></li>
<li class="chapter" data-level="8.4" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#pca-on-survey-answers"><i class="fa fa-check"></i><b>8.4</b> PCA on survey answers</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#wrangle-data"><i class="fa fa-check"></i><b>8.4.1</b> Wrangle data</a></li>
<li class="chapter" data-level="8.4.2" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#build-the-model"><i class="fa fa-check"></i><b>8.4.2</b> Build the model</a></li>
<li class="chapter" data-level="8.4.3" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#bi-plot"><i class="fa fa-check"></i><b>8.4.3</b> Bi-plot</a></li>
<li class="chapter" data-level="8.4.4" data-path="buffet-and-survey-data.html"><a href="buffet-and-survey-data.html#extract-the-components-and-run-all-associations."><i class="fa fa-check"></i><b>8.4.4</b> Extract the components and run all associations.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="mst-exercises.html"><a href="mst-exercises.html"><i class="fa fa-check"></i><b>9</b> MST exercises</a>
<ul>
<li class="chapter" data-level="9.1" data-path="mst-exercises.html"><a href="mst-exercises.html#exercise-1"><i class="fa fa-check"></i><b>9.1</b> Exercise 1</a></li>
<li class="chapter" data-level="9.2" data-path="mst-exercises.html"><a href="mst-exercises.html#exercise-2"><i class="fa fa-check"></i><b>9.2</b> Exercise 2</a></li>
<li class="chapter" data-level="9.3" data-path="mst-exercises.html"><a href="mst-exercises.html#exercise-3"><i class="fa fa-check"></i><b>9.3</b> Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html"><i class="fa fa-check"></i><b>10</b> Intro to large survey data</a>
<ul>
<li class="chapter" data-level="10.0.1" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#looking-at-the-data-and-checking-formating"><i class="fa fa-check"></i><b>10.0.1</b> Looking at the data and checking formating</a></li>
<li class="chapter" data-level="10.1" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#descriptive-statistics-1"><i class="fa fa-check"></i><b>10.1</b> Descriptive statistics</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#numeric-values"><i class="fa fa-check"></i><b>10.1.1</b> Numeric values</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#plots"><i class="fa fa-check"></i><b>10.2</b> Plots</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#within-groups-of-data"><i class="fa fa-check"></i><b>10.2.1</b> Within groups of data</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#categorical-ordinal-variables"><i class="fa fa-check"></i><b>10.3</b> Categorical / Ordinal variables</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#tables"><i class="fa fa-check"></i><b>10.3.1</b> Tables</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#table-1"><i class="fa fa-check"></i><b>10.4</b> Table 1</a></li>
<li class="chapter" data-level="10.5" data-path="intro-to-large-survey-data.html"><a href="intro-to-large-survey-data.html#the-tidyverse-way"><i class="fa fa-check"></i><b>10.5</b> The tidyverse way</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html"><i class="fa fa-check"></i><b>11</b> Consumer segmentation</a>
<ul>
<li class="chapter" data-level="11.1" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#segmentation"><i class="fa fa-check"></i><b>11.1</b> Segmentation</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#k-means"><i class="fa fa-check"></i><b>11.1.1</b> K-means</a></li>
<li class="chapter" data-level="11.1.2" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#initial-characterization-of-clusters"><i class="fa fa-check"></i><b>11.1.2</b> Initial characterization of clusters</a></li>
<li class="chapter" data-level="11.1.3" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#vizualization"><i class="fa fa-check"></i><b>11.1.3</b> Vizualization</a></li>
<li class="chapter" data-level="11.1.4" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#sums-of-squares-from-the-clustering"><i class="fa fa-check"></i><b>11.1.4</b> Sums of Squares from the clustering</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#selecting-the-number-of-clusters"><i class="fa fa-check"></i><b>11.2</b> Selecting the number of clusters</a></li>
<li class="chapter" data-level="11.3" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#segmentation---another-example"><i class="fa fa-check"></i><b>11.3</b> Segmentation - another example</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#cluster-analysis"><i class="fa fa-check"></i><b>11.3.1</b> Cluster analysis</a></li>
<li class="chapter" data-level="11.3.2" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#plot-the-model-using-pca"><i class="fa fa-check"></i><b>11.3.2</b> Plot the model using PCA</a></li>
<li class="chapter" data-level="11.3.3" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#add-to-dataset"><i class="fa fa-check"></i><b>11.3.3</b> Add to dataset</a></li>
<li class="chapter" data-level="11.3.4" data-path="consumer-segmentation.html"><a href="consumer-segmentation.html#comments"><i class="fa fa-check"></i><b>11.3.4</b> Comments</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="profiling-segments.html"><a href="profiling-segments.html"><i class="fa fa-check"></i><b>12</b> Profiling segments</a>
<ul>
<li class="chapter" data-level="12.1" data-path="profiling-segments.html"><a href="profiling-segments.html#table-1-as-a-profiling-tool"><i class="fa fa-check"></i><b>12.1</b> Table 1 as a profiling tool</a></li>
<li class="chapter" data-level="12.2" data-path="profiling-segments.html"><a href="profiling-segments.html#visualization-of-consumer-segments"><i class="fa fa-check"></i><b>12.2</b> Visualization of Consumer Segments</a></li>
<li class="chapter" data-level="12.3" data-path="profiling-segments.html"><a href="profiling-segments.html#creating-the-contingency-table"><i class="fa fa-check"></i><b>12.3</b> Creating the contingency table</a></li>
<li class="chapter" data-level="12.4" data-path="profiling-segments.html"><a href="profiling-segments.html#plot-the-numbers"><i class="fa fa-check"></i><b>12.4</b> Plot the numbers</a></li>
<li class="chapter" data-level="12.5" data-path="profiling-segments.html"><a href="profiling-segments.html#contingency-table"><i class="fa fa-check"></i><b>12.5</b> Contingency table</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="profiling-segments.html"><a href="profiling-segments.html#pearson-chi-square-test"><i class="fa fa-check"></i><b>12.5.1</b> Pearson Chi-square test</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="profiling-segments.html"><a href="profiling-segments.html#correspondence-analysis"><i class="fa fa-check"></i><b>12.6</b> Correspondence Analysis</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="logistic-regression.html"><a href="logistic-regression.html"><i class="fa fa-check"></i><b>13</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="13.1" data-path="logistic-regression.html"><a href="logistic-regression.html#segmentationclustering"><i class="fa fa-check"></i><b>13.1</b> Segmentation/Clustering</a></li>
<li class="chapter" data-level="13.2" data-path="logistic-regression.html"><a href="logistic-regression.html#fitting-the-logistic-regression-model"><i class="fa fa-check"></i><b>13.2</b> Fitting the logistic regression-model</a></li>
<li class="chapter" data-level="13.3" data-path="logistic-regression.html"><a href="logistic-regression.html#probabilities-of-segment-membership"><i class="fa fa-check"></i><b>13.3</b> Probabilities of segment membership:</a></li>
<li class="chapter" data-level="13.4" data-path="logistic-regression.html"><a href="logistic-regression.html#odds-ratios"><i class="fa fa-check"></i><b>13.4</b> Odds ratios</a></li>
<li class="chapter" data-level="13.5" data-path="logistic-regression.html"><a href="logistic-regression.html#ors-and-probs"><i class="fa fa-check"></i><b>13.5</b> ORs and Probs</a></li>
<li class="chapter" data-level="13.6" data-path="logistic-regression.html"><a href="logistic-regression.html#effect-of-age"><i class="fa fa-check"></i><b>13.6</b> Effect of Age</a></li>
<li class="chapter" data-level="13.7" data-path="logistic-regression.html"><a href="logistic-regression.html#multivariate-analysis"><i class="fa fa-check"></i><b>13.7</b> Multivariate analysis</a>
<ul>
<li class="chapter" data-level="13.7.1" data-path="logistic-regression.html"><a href="logistic-regression.html#descriptives"><i class="fa fa-check"></i><b>13.7.1</b> Descriptives</a></li>
<li class="chapter" data-level="13.7.2" data-path="logistic-regression.html"><a href="logistic-regression.html#two-nested-models"><i class="fa fa-check"></i><b>13.7.2</b> Two nested models</a></li>
<li class="chapter" data-level="13.7.3" data-path="logistic-regression.html"><a href="logistic-regression.html#coefficients"><i class="fa fa-check"></i><b>13.7.3</b> Coefficients</a></li>
<li class="chapter" data-level="13.7.4" data-path="logistic-regression.html"><a href="logistic-regression.html#re-level"><i class="fa fa-check"></i><b>13.7.4</b> Re-level</a></li>
<li class="chapter" data-level="13.7.5" data-path="logistic-regression.html"><a href="logistic-regression.html#all-pairwise-comparisons"><i class="fa fa-check"></i><b>13.7.5</b> All pairwise comparisons</a></li>
</ul></li>
<li class="chapter" data-level="13.8" data-path="logistic-regression.html"><a href="logistic-regression.html#segment-2-and-3"><i class="fa fa-check"></i><b>13.8</b> Segment 2 and 3</a></li>
<li class="chapter" data-level="13.9" data-path="logistic-regression.html"><a href="logistic-regression.html#a-new-set-of-data"><i class="fa fa-check"></i><b>13.9</b> A new set of data</a></li>
<li class="chapter" data-level="13.10" data-path="logistic-regression.html"><a href="logistic-regression.html#logistic-regression-for-demographic-characterization"><i class="fa fa-check"></i><b>13.10</b> Logistic regression for demographic characterization</a>
<ul>
<li class="chapter" data-level="13.10.1" data-path="logistic-regression.html"><a href="logistic-regression.html#age"><i class="fa fa-check"></i><b>13.10.1</b> Age</a></li>
<li class="chapter" data-level="13.10.2" data-path="logistic-regression.html"><a href="logistic-regression.html#gender"><i class="fa fa-check"></i><b>13.10.2</b> Gender</a></li>
</ul></li>
<li class="chapter" data-level="13.11" data-path="logistic-regression.html"><a href="logistic-regression.html#task"><i class="fa fa-check"></i><b>13.11</b> TASK</a></li>
<li class="chapter" data-level="13.12" data-path="logistic-regression.html"><a href="logistic-regression.html#the-tidyverse-way-1"><i class="fa fa-check"></i><b>13.12</b> The tidyverse way</a></li>
<li class="chapter" data-level="13.13" data-path="logistic-regression.html"><a href="logistic-regression.html#comment"><i class="fa fa-check"></i><b>13.13</b> Comment</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html"><i class="fa fa-check"></i><b>14</b> CATA data (Check-All-That-Apply)</a>
<ul>
<li class="chapter" data-level="14.1" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html#importing-and-looking-at-the-beer-data"><i class="fa fa-check"></i><b>14.1</b> Importing and looking at the beer data</a></li>
<li class="chapter" data-level="14.2" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html#two-versions-of-the-data"><i class="fa fa-check"></i><b>14.2</b> Two versions of the data</a></li>
<li class="chapter" data-level="14.3" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html#cochrans-q-test"><i class="fa fa-check"></i><b>14.3</b> Cochran’s Q test</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html#post-hoc-test"><i class="fa fa-check"></i><b>14.3.1</b> Post hoc test</a></li>
<li class="chapter" data-level="14.3.2" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html#for-all-attributes-in-one-run-nice-to-know"><i class="fa fa-check"></i><b>14.3.2</b> For all attributes in one run (nice to know)</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="cata-data-check-all-that-apply.html"><a href="cata-data-check-all-that-apply.html#pca-on-cata-data"><i class="fa fa-check"></i><b>14.4</b> PCA on CATA data</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html"><i class="fa fa-check"></i><b>15</b> CATA and Hedonics</a>
<ul>
<li class="chapter" data-level="15.1" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#individual-attributes-and-liking"><i class="fa fa-check"></i><b>15.1</b> Individual attributes and liking</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#an-example-with-refreshing"><i class="fa fa-check"></i><b>15.1.1</b> An example with Refreshing</a></li>
<li class="chapter" data-level="15.1.2" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#all-attributes"><i class="fa fa-check"></i><b>15.1.2</b> All attributes</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#pca-on-cata-and-liking"><i class="fa fa-check"></i><b>15.2</b> PCA on CATA and Liking</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="cata-and-hedonics.html"><a href="cata-and-hedonics.html#a-beer-centric-model"><i class="fa fa-check"></i><b>15.2.1</b> A beer centric model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="preference-mapping.html"><a href="preference-mapping.html"><i class="fa fa-check"></i><b>16</b> Preference Mapping</a>
<ul>
<li class="chapter" data-level="16.1" data-path="preference-mapping.html"><a href="preference-mapping.html#example-of-preference-mapping"><i class="fa fa-check"></i><b>16.1</b> Example of Preference Mapping</a></li>
<li class="chapter" data-level="16.2" data-path="preference-mapping.html"><a href="preference-mapping.html#pca"><i class="fa fa-check"></i><b>16.2</b> PCA</a></li>
<li class="chapter" data-level="16.3" data-path="preference-mapping.html"><a href="preference-mapping.html#analysis-by-pls"><i class="fa fa-check"></i><b>16.3</b> Analysis by PLS</a></li>
<li class="chapter" data-level="16.4" data-path="preference-mapping.html"><a href="preference-mapping.html#l-pls-for-the-future"><i class="fa fa-check"></i><b>16.4</b> L-PLS [For the future…]</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html"><i class="fa fa-check"></i><b>17</b> Hedonic rating (e.g. liking scores)</a>
<ul>
<li class="chapter" data-level="17.1" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#plotting-liking-scores"><i class="fa fa-check"></i><b>17.1</b> Plotting liking scores</a></li>
<li class="chapter" data-level="17.2" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#simple-mixed-models"><i class="fa fa-check"></i><b>17.2</b> Simple mixed models</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#post-hoc-test-1"><i class="fa fa-check"></i><b>17.2.1</b> Post hoc test</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#multivariable-models"><i class="fa fa-check"></i><b>17.3</b> Multivariable models</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#additive-models"><i class="fa fa-check"></i><b>17.3.1</b> Additive models</a></li>
<li class="chapter" data-level="17.3.2" data-path="hedonic-rating-e.g.-liking-scores.html"><a href="hedonic-rating-e.g.-liking-scores.html#effect-modification-and-interactions"><i class="fa fa-check"></i><b>17.3.2</b> Effect modification and Interactions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="projective-mapping.html"><a href="projective-mapping.html"><i class="fa fa-check"></i><b>18</b> Projective mapping</a>
<ul>
<li class="chapter" data-level="18.1" data-path="projective-mapping.html"><a href="projective-mapping.html#example-from-mapping-of-xx"><i class="fa fa-check"></i><b>18.1</b> Example from mapping of XX</a></li>
<li class="chapter" data-level="18.2" data-path="projective-mapping.html"><a href="projective-mapping.html#a-collated-version-of-the-data"><i class="fa fa-check"></i><b>18.2</b> A Collated version of the data</a></li>
<li class="chapter" data-level="18.3" data-path="projective-mapping.html"><a href="projective-mapping.html#pca-on-collated-data"><i class="fa fa-check"></i><b>18.3</b> PCA on Collated data</a></li>
<li class="chapter" data-level="18.4" data-path="projective-mapping.html"><a href="projective-mapping.html#section"><i class="fa fa-check"></i><b>18.4</b> </a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="tfih-exercises.html"><a href="tfih-exercises.html"><i class="fa fa-check"></i><b>19</b> TFIH Exercises</a>
<ul>
<li class="chapter" data-level="19.1" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-1-descriptive-statistics-and-plots"><i class="fa fa-check"></i><b>19.1</b> Exercise 1: Descriptive statistics and plots</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="tfih-exercises.html"><a href="tfih-exercises.html#cata-counts"><i class="fa fa-check"></i><b>19.1.1</b> CATA counts</a></li>
<li class="chapter" data-level="19.1.2" data-path="tfih-exercises.html"><a href="tfih-exercises.html#hedonics"><i class="fa fa-check"></i><b>19.1.2</b> Hedonics</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-2-consumer-background-and-pca"><i class="fa fa-check"></i><b>19.2</b> Exercise 2: Consumer background and PCA</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="tfih-exercises.html"><a href="tfih-exercises.html#demographics"><i class="fa fa-check"></i><b>19.2.1</b> Demographics</a></li>
<li class="chapter" data-level="19.2.2" data-path="tfih-exercises.html"><a href="tfih-exercises.html#pca-on-interests"><i class="fa fa-check"></i><b>19.2.2</b> PCA on <em>Interests</em></a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-3-pca-on-cata-counts"><i class="fa fa-check"></i><b>19.3</b> Exercise 3: PCA on CATA counts</a></li>
<li class="chapter" data-level="19.4" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-4-cochrans-q-test-on-cata-binary-data"><i class="fa fa-check"></i><b>19.4</b> Exercise 4: Cochran’s Q test on CATA binary data</a></li>
<li class="chapter" data-level="19.5" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-5-hedonic-ratings-and-consumer-characteristics"><i class="fa fa-check"></i><b>19.5</b> Exercise 5: Hedonic ratings and consumer characteristics</a>
<ul>
<li class="chapter" data-level="19.5.1" data-path="tfih-exercises.html"><a href="tfih-exercises.html#pca-on-joint-data"><i class="fa fa-check"></i><b>19.5.1</b> PCA on joint data</a></li>
<li class="chapter" data-level="19.5.2" data-path="tfih-exercises.html"><a href="tfih-exercises.html#all-demographics"><i class="fa fa-check"></i><b>19.5.2</b> All demographics</a></li>
</ul></li>
<li class="chapter" data-level="19.6" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-6-pca-on-cata-counts-and-hedonic-ratings"><i class="fa fa-check"></i><b>19.6</b> Exercise 6: PCA on CATA counts and hedonic ratings</a></li>
<li class="chapter" data-level="19.7" data-path="tfih-exercises.html"><a href="tfih-exercises.html#exercise-7-mixed-modelling-on-hedonic-ratings"><i class="fa fa-check"></i><b>19.7</b> Exercise 7: Mixed modelling on hedonic ratings</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="chapters-to-appear.html"><a href="chapters-to-appear.html"><i class="fa fa-check"></i><b>20</b> CHAPTERS to APPEAR</a></li>
<li class="chapter" data-level="21" data-path="latent-factor-models.html"><a href="latent-factor-models.html"><i class="fa fa-check"></i><b>21</b> Latent Factor Models</a></li>
<li class="chapter" data-level="22" data-path="lpls.html"><a href="lpls.html"><i class="fa fa-check"></i><b>22</b> LPLS</a></li>
<li class="chapter" data-level="23" data-path="confirmatory-factor-analysis-using-lavaan.html"><a href="confirmatory-factor-analysis-using-lavaan.html"><i class="fa fa-check"></i><b>23</b> Confirmatory Factor Analysis using lavaan</a>
<ul>
<li class="chapter" data-level="23.1" data-path="confirmatory-factor-analysis-using-lavaan.html"><a href="confirmatory-factor-analysis-using-lavaan.html#example---food-neophobia"><i class="fa fa-check"></i><b>23.1</b> Example - Food Neophobia</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="structured-equation-modelling.html"><a href="structured-equation-modelling.html"><i class="fa fa-check"></i><b>24</b> Structured Equation Modelling</a>
<ul>
<li class="chapter" data-level="24.1" data-path="structured-equation-modelling.html"><a href="structured-equation-modelling.html#example---theory-of-planned-behaviour"><i class="fa fa-check"></i><b>24.1</b> Example - Theory of Planned Behaviour</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="plsda-on-cata-and-liking.html"><a href="plsda-on-cata-and-liking.html"><i class="fa fa-check"></i><b>25</b> PLSDA on CATA and liking</a></li>
<li class="chapter" data-level="26" data-path="text-mining-of-comsumer-reviews.html"><a href="text-mining-of-comsumer-reviews.html"><i class="fa fa-check"></i><b>26</b> Text mining of comsumer reviews</a></li>
<li class="chapter" data-level="27" data-path="text-mining-of-open-ended-survey-responses.html"><a href="text-mining-of-open-ended-survey-responses.html"><i class="fa fa-check"></i><b>27</b> Text mining of open-ended survey responses</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis in R for Sensory and Consumer Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="consumer-segmentation" class="section level1 hasAnchor" number="11">
<h1><span class="header-section-number">Chapter 11</span> Consumer segmentation<a href="consumer-segmentation.html#consumer-segmentation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The data used in the first part of this chapter is from the paper: <em>Verbeke, Wim, Federico JA Pérez-Cueto, and Klaus G. Grunert. “To eat or not to eat pork, how frequently and how varied? Insights from the quantitative Q-PorkChains consumer survey in four European countries.” Meat science 88.4 (2011): 619-626.</em> and can be found in the <em>data4consumerscience</em>-package as <strong>pork</strong>.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="consumer-segmentation.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data4consumerscience)</span>
<span id="cb161-2"><a href="consumer-segmentation.html#cb161-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(pork)</span></code></pre></div>
<div id="segmentation" class="section level2 hasAnchor" number="11.1">
<h2><span class="header-section-number">11.1</span> Segmentation<a href="consumer-segmentation.html#segmentation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To create the consumer segments, a cluster analysis, based on behavioral data (frequency and variety of consumption), will be carried out.</p>
<p>This example shows k-means clustering as the clustering analysis, but there are many more options out there - some more data-driven and some using common sense or domain knowledge. Both types of segmentation can be valid, as long as the scientific reasoning behind makes sense.</p>
<div id="k-means" class="section level3 hasAnchor" number="11.1.1">
<h3><span class="header-section-number">11.1.1</span> K-means<a href="consumer-segmentation.html#k-means" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>K-means is a popular algorithm used for clustering, which is a fancy word for grouping. This means, that we can group un-grouped data, if the different attributes create such groups.</p>
<p>The algorithm works by you selecting a value for “k,” which is the number of clusters/groups that the algorithm will attempt to group the data points into. Then, it randomly selects “k” points from the dataset as the initial centroids. These centroids represent the centers of each cluster.</p>
<p>Next, the algorithm iteratively assigns each data point to the nearest centroid based on the squared Euclidean distance between the point and the centroid (also known as the “Within Cluster Sum of Squares”(WCSS)). After all data points have been assigned, the centroid for each cluster is recalculated by taking the mean of all the points assigned to that cluster. This step updates the center of each cluster.</p>
<p>The algorithm repeats the previous two steps until the centroids no longer move or the maximum number of iterations is reached. The final result is a set of “k” clusters, where each data point belongs to the cluster with the closest centroid.</p>
<p>K-means in R is pretty simple - only one line of code is needed to perform the analysis, if the data are ready for analysis.</p>
<p>First, we <strong>set.seed</strong>. As k-means is an iterative algorithm, that starts in a random point, it matters where this point is. Usually, the only thing happening if the seed is changed, is that the order of the clusters change - but this can be annoying enough that you would want to avoid it! To ensure, that we get the same results every time we run the algorithm, we set the seed, and keep it that way throughout the analysis.</p>
<p>As a start, we only use two variables (specified in the code as “VarietyTotal” &amp; “TotalPorkWeek”, from the dataset <em>pork</em>), as this is easy to interpret.
Below is shown an example with both 2 and 3 clusters (“centers = _“).</p>
<p>The “nstart”-input specifies, that the clustering will start at 25 different random points, and selects the best. Doing this will help getting the same result every time, especially if data are less clustered by nature. For details on the algorithm type <em>?kmeans</em> to get help.</p>
<p>Note, the <em>set.seed(123)</em> is only for reproducibility and hence only nice-to-know.</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="consumer-segmentation.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb162-2"><a href="consumer-segmentation.html#cb162-2" aria-hidden="true" tabindex="-1"></a>km.cluster3 <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(pork[, <span class="fu">c</span>(<span class="st">&quot;VarietyTotal&quot;</span>, <span class="st">&quot;TotalPorkWeek&quot;</span>)], <span class="at">centers =</span> <span class="dv">3</span>,<span class="at">nstart =</span> <span class="dv">25</span>)</span>
<span id="cb162-3"><a href="consumer-segmentation.html#cb162-3" aria-hidden="true" tabindex="-1"></a>km.cluster2 <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(pork[, <span class="fu">c</span>(<span class="st">&quot;VarietyTotal&quot;</span>, <span class="st">&quot;TotalPorkWeek&quot;</span>)], <span class="at">centers =</span> <span class="dv">2</span>,<span class="at">nstart =</span> <span class="dv">25</span>)</span></code></pre></div>
<p>First, we run a clustering with the function <em>kmeans</em> for the dataset <em>pork</em>. We will use the two variables “VarietyTotal” &amp; “TotalPorkWeek” to calculate the three best clusters, and we will choose the random centers 25 times. You can off course change this number yourself. We save it as <em>km.cluster3</em> (remember you choose this name). Secondly, we run almost the same clustering, changing only the name and the number of centers.</p>
</div>
<div id="initial-characterization-of-clusters" class="section level3 hasAnchor" number="11.1.2">
<h3><span class="header-section-number">11.1.2</span> Initial characterization of clusters<a href="consumer-segmentation.html#initial-characterization-of-clusters" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Below are some of the outputs, that you can get from the clustering. Here you can see the size of the clusters as well as the positions of their centroids. Positions here means the value of the centroid for each variable. For example, below we see, that the cluster 1’s centriod has a value for VarietyTotal of 25.04562. Size means the number of members in each cluster.</p>
<p>Here for 2 clusters:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="consumer-segmentation.html#cb163-1" aria-hidden="true" tabindex="-1"></a>km.cluster2<span class="sc">$</span>centers</span></code></pre></div>
<pre><code>##   VarietyTotal TotalPorkWeek
## 1     25.04562      7.571986
## 2     27.28738     20.140544</code></pre>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="consumer-segmentation.html#cb165-1" aria-hidden="true" tabindex="-1"></a>km.cluster2<span class="sc">$</span>size</span></code></pre></div>
<pre><code>## [1] 1118  515</code></pre>
<p>… and for 3 clusters:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="consumer-segmentation.html#cb167-1" aria-hidden="true" tabindex="-1"></a>km.cluster3<span class="sc">$</span>centers</span></code></pre></div>
<pre><code>##   VarietyTotal TotalPorkWeek
## 1     22.85949      4.957372
## 2     27.26288     11.343699
## 3     27.10061     22.969634</code></pre>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="consumer-segmentation.html#cb169-1" aria-hidden="true" tabindex="-1"></a>km.cluster3<span class="sc">$</span>size</span></code></pre></div>
<pre><code>## [1] 548 757 328</code></pre>
<p>Centers will give you the average values for the variables “VarietyTotal” &amp; “TotalPorkWeek” in the center of each of the three (in km.cluster3) clusters. Size will give you the the number of members per cluster. It is a good idea to check that the clusters are not too uneven in number of members. The third line above is just another way of asking for the size of the clusters in km.cluster3. All command are repeated for the km.cluster2; that is the cluster analysis with two clusters, you made and saved above.</p>
</div>
<div id="vizualization" class="section level3 hasAnchor" number="11.1.3">
<h3><span class="header-section-number">11.1.3</span> Vizualization<a href="consumer-segmentation.html#vizualization" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>It is, however, a lot easier to understand clustering, when it is visualized. Below is shown two different ways of plotting the clusters - one using the build-in plotting function, and one using the package <strong>ggplot2</strong>. <strong>ggplot2</strong> maybe looks a bit more complicated, but has a lot of functions built into it, which means that it can be nice to learn!</p>
<p>Try to make the plot yourself, and try to see what happens if you change different inputs.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="consumer-segmentation.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb171-2"><a href="consumer-segmentation.html#cb171-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Basic R-plotting</span></span>
<span id="cb171-3"><a href="consumer-segmentation.html#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(TotalPorkWeek <span class="sc">~</span> VarietyTotal, <span class="at">data =</span> pork, <span class="at">col =</span> km.cluster3[[<span class="st">&quot;cluster&quot;</span>]] <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb171-4"><a href="consumer-segmentation.html#cb171-4" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(km.cluster3[[<span class="st">&quot;centers&quot;</span>]], <span class="at">pch =</span> <span class="dv">20</span>, <span class="at">cex =</span> <span class="fl">1.3</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-104-1.png" width="672" /></p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="consumer-segmentation.html#cb172-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(km.cluster3[[<span class="st">&quot;centers&quot;</span>]])</span>
<span id="cb172-2"><a href="consumer-segmentation.html#cb172-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(km.cluster2[[<span class="st">&quot;centers&quot;</span>]])</span>
<span id="cb172-3"><a href="consumer-segmentation.html#cb172-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-4"><a href="consumer-segmentation.html#cb172-4" aria-hidden="true" tabindex="-1"></a><span class="co">#ggplot 2</span></span>
<span id="cb172-5"><a href="consumer-segmentation.html#cb172-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pork, <span class="fu">aes</span>(<span class="at">x =</span> VarietyTotal, <span class="at">y =</span> TotalPorkWeek)) <span class="sc">+</span> </span>
<span id="cb172-6"><a href="consumer-segmentation.html#cb172-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="fu">factor</span>(km.cluster3<span class="sc">$</span>cluster))) <span class="sc">+</span> </span>
<span id="cb172-7"><a href="consumer-segmentation.html#cb172-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="st">&#39;Cluster&#39;</span>)) <span class="sc">+</span> </span>
<span id="cb172-8"><a href="consumer-segmentation.html#cb172-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> df, </span>
<span id="cb172-9"><a href="consumer-segmentation.html#cb172-9" aria-hidden="true" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x =</span> VarietyTotal, <span class="at">y =</span> TotalPorkWeek), </span>
<span id="cb172-10"><a href="consumer-segmentation.html#cb172-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&#39;black&#39;</span>, </span>
<span id="cb172-11"><a href="consumer-segmentation.html#cb172-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb172-12"><a href="consumer-segmentation.html#cb172-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-104-2.png" width="672" /></p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="consumer-segmentation.html#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pork, <span class="fu">aes</span>(<span class="at">x =</span> VarietyTotal, <span class="at">y =</span> TotalPorkWeek)) <span class="sc">+</span> </span>
<span id="cb173-2"><a href="consumer-segmentation.html#cb173-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="fu">factor</span>(km.cluster2<span class="sc">$</span>cluster))) <span class="sc">+</span> </span>
<span id="cb173-3"><a href="consumer-segmentation.html#cb173-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="st">&#39;Cluster&#39;</span>)) <span class="sc">+</span> </span>
<span id="cb173-4"><a href="consumer-segmentation.html#cb173-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> df2, </span>
<span id="cb173-5"><a href="consumer-segmentation.html#cb173-5" aria-hidden="true" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x =</span> VarietyTotal, <span class="at">y =</span> TotalPorkWeek), </span>
<span id="cb173-6"><a href="consumer-segmentation.html#cb173-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&#39;black&#39;</span>, </span>
<span id="cb173-7"><a href="consumer-segmentation.html#cb173-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb173-8"><a href="consumer-segmentation.html#cb173-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-104-3.png" width="672" /></p>
</div>
<div id="sums-of-squares-from-the-clustering" class="section level3 hasAnchor" number="11.1.4">
<h3><span class="header-section-number">11.1.4</span> Sums of Squares from the clustering<a href="consumer-segmentation.html#sums-of-squares-from-the-clustering" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As mentioned in <a href="consumer-segmentation.html#k-means">K-means</a>, k-means set the clusters such that the between clusters (sort of differences between centers) are <em>large</em> while the distance within a cluster (from each sample to is cluster-center) is <em>small</em>.</p>
<p>R can also display these numbers, as shown below:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="consumer-segmentation.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Within Sum of Squares</span></span>
<span id="cb174-2"><a href="consumer-segmentation.html#cb174-2" aria-hidden="true" tabindex="-1"></a>km.cluster3<span class="sc">$</span>withinss</span></code></pre></div>
<pre><code>## [1] 12534.737  9854.921  9293.210</code></pre>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="consumer-segmentation.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Total Within Sum of Squares</span></span>
<span id="cb176-2"><a href="consumer-segmentation.html#cb176-2" aria-hidden="true" tabindex="-1"></a>km.cluster3<span class="sc">$</span>tot.withinss</span></code></pre></div>
<pre><code>## [1] 31682.87</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="consumer-segmentation.html#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Between Sum of Squares</span></span>
<span id="cb178-2"><a href="consumer-segmentation.html#cb178-2" aria-hidden="true" tabindex="-1"></a>km.cluster3<span class="sc">$</span>betweenss</span></code></pre></div>
<pre><code>## [1] 73532.81</code></pre>
</div>
</div>
<div id="selecting-the-number-of-clusters" class="section level2 hasAnchor" number="11.2">
<h2><span class="header-section-number">11.2</span> Selecting the number of clusters<a href="consumer-segmentation.html#selecting-the-number-of-clusters" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Usually there is no given set of clusters, so we want to also learn that from data.</p>
<p>Below we show how to use the Gap-statistics (from the <strong>cluster</strong>-package) for <span class="math inline">\(2\)</span> up to <span class="math inline">\(10\)</span> clusters to select the optimal number of clusters.</p>
<p>The concept of Gap statistics is based on the idea that if a dataset truly contains distinct clusters, then the dispersion within each cluster should be smaller than the dispersion between clusters. The gap statistic measures the difference between the observed dispersion and the expected dispersion under a null reference distribution. By comparing this gap statistic for different numbers of clusters, one can identify the optimal number of clusters that best captures the underlying structure of the data.</p>
<p>You don’t need to fully understand how it works, but you have to know how to interpret the plot, to be able to decide the number of clusters.</p>
<p>When interpreting the plot, the highest Gap-value (the y-axis) shows the number of clusters, that best represent the data. However, since we are trying to use the data to as a generalization of a larger population, one should be conservative when choosing the number of clusters. If a less complicated/more general model (less clusters) can explain almost the same, one should always choose the less complicated model.</p>
<p>As a rule of thumb, when interpreting the Gap-statistics plot, a model with a number of clusters within the standard deviation of the model with the best Gap-statistic will be sufficient. In our case, this means, that a model with 3 clusters should do the job, as seen below.</p>
<p>Another check is of course to make both models, and plot it, to check if the clustering makes sense. This is equally as important as looking at the Gap-statistics.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="consumer-segmentation.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cluster)</span>
<span id="cb180-2"><a href="consumer-segmentation.html#cb180-2" aria-hidden="true" tabindex="-1"></a>gapStatistic <span class="ot">&lt;-</span> <span class="fu">clusGap</span>(pork[, <span class="fu">c</span>(<span class="st">&quot;VarietyTotal&quot;</span>, <span class="st">&quot;TotalPorkWeek&quot;</span>)], kmeans, <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## Clustering k = 1,2,..., K.max (= 10): .. done
## Bootstrapping, b = 1,2,..., B (= 100)  [one &quot;.&quot; per sample]:
## .................................................. 50 
## .................................................. 100</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="consumer-segmentation.html#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(gapStatistic, <span class="at">main =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-106-1.png" width="672" /></p>
<p>Another package able to aid when trying to determine the number of clusters is <strong>NbClust</strong>. This package runs a variety of different tests, each resulting in an optimal number of clusters. This means, that while you get a lot of opinion on the number of clusters, the <em>NbClust</em>-function might take a while to run.</p>
<p><em>NbClust</em> will show a lot of plots and show results for the different methods. You can look at them if you want, but the most important part is the last output of the function, where the voting for the different number of clusters as well as the conclusion is displayed.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="consumer-segmentation.html#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(NbClust)</span>
<span id="cb183-2"><a href="consumer-segmentation.html#cb183-2" aria-hidden="true" tabindex="-1"></a>Nbclusters <span class="ot">&lt;-</span> <span class="fu">NbClust</span>(pork[, <span class="fu">c</span>(<span class="st">&quot;VarietyTotal&quot;</span>, <span class="st">&quot;TotalPorkWeek&quot;</span>)], <span class="at">method =</span> <span class="st">&#39;kmeans&#39;</span> )</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-107-1.png" width="672" /></p>
<pre><code>## *** : The Hubert index is a graphical method of determining the number of clusters.
##                 In the plot of Hubert index, we seek a significant knee that corresponds to a 
##                 significant increase of the value of the measure i.e the significant peak in Hubert
##                 index second differences plot. 
## </code></pre>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-107-2.png" width="672" /></p>
<pre><code>## *** : The D index is a graphical method of determining the number of clusters. 
##                 In the plot of D index, we seek a significant knee (the significant peak in Dindex
##                 second differences plot) that corresponds to a significant increase of the value of
##                 the measure. 
##  
## ******************************************************************* 
## * Among all indices:                                                
## * 10 proposed 2 as the best number of clusters 
## * 3 proposed 3 as the best number of clusters 
## * 6 proposed 4 as the best number of clusters 
## * 1 proposed 10 as the best number of clusters 
## * 2 proposed 11 as the best number of clusters 
## * 2 proposed 13 as the best number of clusters 
## 
##                    ***** Conclusion *****                            
##  
## * According to the majority rule, the best number of clusters is  2 
##  
##  
## *******************************************************************</code></pre>
<p>The gap-statistics seems to suggest k=3, whereas NbClust suggests k=2-4, which shows how important it is, that you know your data enough to be able to make the right decision, such as number of clusters.</p>
<p>The rule of thumb is to use these data driven approaches together with interpretability of the resulting clusters, such that the solution is meaningful.</p>
</div>
<div id="segmentation---another-example" class="section level2 hasAnchor" number="11.3">
<h2><span class="header-section-number">11.3</span> Segmentation - another example<a href="consumer-segmentation.html#segmentation---another-example" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The data <strong>plantbaseddiet</strong> constitute data from the following study, and can be found in the <strong>data4consumerscience</strong>-package:</p>
<p><em>Reipurth, Malou FS, Lasse Hørby, Charlotte G. Gregersen, Astrid Bonke, and Federico JA Perez Cueto. “Barriers and facilitators towards adopting a more plant-based diet in a sample of Danish consumers.” Food quality and preference 73 (2019): 288-292.</em></p>
<p>These we will use as a second example for cluster analysis.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="consumer-segmentation.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data4consumerscience)</span>
<span id="cb186-2"><a href="consumer-segmentation.html#cb186-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(plantbaseddiet)</span></code></pre></div>
<div id="cluster-analysis" class="section level3 hasAnchor" number="11.3.1">
<h3><span class="header-section-number">11.3.1</span> Cluster analysis<a href="consumer-segmentation.html#cluster-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this example, 3 variables are included in the clustering: ‘a_meat’, ‘a_dairy’ and ‘a_eggs’. Otherwise, the same procedure applies: Finding the appropriate amount of clusters, and running the analysis.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="consumer-segmentation.html#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cluster)</span>
<span id="cb187-2"><a href="consumer-segmentation.html#cb187-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(NbClust)</span>
<span id="cb187-3"><a href="consumer-segmentation.html#cb187-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-4"><a href="consumer-segmentation.html#cb187-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb187-5"><a href="consumer-segmentation.html#cb187-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-6"><a href="consumer-segmentation.html#cb187-6" aria-hidden="true" tabindex="-1"></a>gapStatistic <span class="ot">&lt;-</span> <span class="fu">clusGap</span>(plantbaseddiet[,<span class="fu">c</span>(<span class="st">&#39;a_meat&#39;</span>, <span class="st">&#39;a_dairy&#39;</span>,<span class="st">&#39;a_eggs&#39;</span>)], kmeans, <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## Clustering k = 1,2,..., K.max (= 10): .. done
## Bootstrapping, b = 1,2,..., B (= 100)  [one &quot;.&quot; per sample]:
## .................................................. 50 
## .................................................. 100</code></pre>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="consumer-segmentation.html#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(gapStatistic, <span class="at">main =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-109-1.png" width="672" /></p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="consumer-segmentation.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">NbClust</span>(plantbaseddiet[,<span class="fu">c</span>(<span class="st">&#39;a_meat&#39;</span>, <span class="st">&#39;a_dairy&#39;</span>,<span class="st">&#39;a_eggs&#39;</span>)],<span class="at">method =</span> <span class="st">&#39;kmeans&#39;</span> )</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-109-2.png" width="672" /></p>
<pre><code>## *** : The Hubert index is a graphical method of determining the number of clusters.
##                 In the plot of Hubert index, we seek a significant knee that corresponds to a 
##                 significant increase of the value of the measure i.e the significant peak in Hubert
##                 index second differences plot. 
## </code></pre>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-109-3.png" width="672" /></p>
<pre><code>## *** : The D index is a graphical method of determining the number of clusters. 
##                 In the plot of D index, we seek a significant knee (the significant peak in Dindex
##                 second differences plot) that corresponds to a significant increase of the value of
##                 the measure. 
##  
## ******************************************************************* 
## * Among all indices:                                                
## * 4 proposed 2 as the best number of clusters 
## * 2 proposed 3 as the best number of clusters 
## * 8 proposed 4 as the best number of clusters 
## * 1 proposed 5 as the best number of clusters 
## * 1 proposed 8 as the best number of clusters 
## * 2 proposed 11 as the best number of clusters 
## * 1 proposed 12 as the best number of clusters 
## * 3 proposed 14 as the best number of clusters 
## * 1 proposed 15 as the best number of clusters 
## 
##                    ***** Conclusion *****                            
##  
## * According to the majority rule, the best number of clusters is  4 
##  
##  
## *******************************************************************</code></pre>
<pre><code>## $All.index
##          KL       CH Hartigan     CCC    Scott      Marriot    TrCovW    TraceW Friedman
## 2    0.9252 311.7057 182.2207 11.7654 1149.509 5.488072e+12 156679680 36862.471  11.1925
## 3    0.2586 308.0304 285.4003 11.7339 1675.645 3.953831e+12  44523036 26403.285  23.0223
## 4    7.1975 427.2404  49.5727 17.7814 2234.681 2.095967e+12  23640671 16280.364  32.8452
## 5    0.2894 366.7036 153.9497 15.1320 2442.315 2.089400e+12  19737933 14690.323  44.0329
## 6    3.2405 422.0525  22.2209 18.7139 2743.294 1.568391e+12  13180805 10988.593  41.3374
## 7    0.5040 371.7357 101.6624 20.5406 2812.700 1.836977e+12  12153549 10478.001  42.1340
## 8  343.2438 403.4580  36.9155 23.5175 3048.082 1.441522e+12   7337648  8564.420  52.5762
## 9    0.0135 385.4943  45.8019 23.0734 3216.600 1.266818e+12   6981343  7920.400  53.4843
## 10   0.1817 381.5523 111.5743 23.4753 3303.003 1.297204e+12   5401575  7193.119  66.8519
## 11  30.8298 438.3487  29.5864 27.7794 3782.521 5.559440e+11   4470955  5769.052 144.1779
## 12   0.0246 426.3833 -62.7616 27.6000 3845.865 5.768499e+11   3880497  5413.891 146.9496
## 13   1.1235 330.3733 115.2435 21.3517 3483.329 1.483823e+12   3995422  6291.346  70.9156
## 14   1.2601 391.2247 -42.0818 26.2890 3982.228 5.844825e+11   3332476  5006.375 167.8458
## 15   0.5880 325.4223 -67.2994 21.8516 3648.917 1.380450e+12   3227640  5525.390  80.6944
##      Rubin Cindex     DB Silhouette   Duda  Pseudot2   Beale Ratkowsky       Ball
## 2   4.2926 0.2408 1.1390     0.4242 1.0316   -8.2299 -0.0519    0.3618 18431.2357
## 3   5.9930 0.2045 0.9780     0.4798 2.7601 -183.6544 -1.0807    0.3504  8801.0948
## 4   9.7194 0.1738 0.9088     0.5576 1.0816  -13.1957 -0.1265    0.3672  4070.0910
## 5  10.7714 0.1851 0.9134     0.5535 3.3473  -94.6685 -1.1827    0.3302  2938.0647
## 6  14.3999 0.2038 1.0512     0.4393 0.8229   26.2617  0.3635    0.3569  1831.4322
## 7  15.1016 0.1929 1.4036     0.3636 0.7647   26.4662  0.5160    0.3350  1496.8572
## 8  18.4759 0.1710 0.9051     0.4696 4.3917 -102.7154 -1.2963    0.3199  1070.5525
## 9  19.9782 0.1632 0.8835     0.4736 0.4539   56.5376  2.0113    0.3087   880.0444
## 10 21.9981 0.1723 0.8750     0.4953 0.8440   17.1893  0.3075    0.2916   719.3119
## 11 27.4283 0.1317 0.8836     0.4774 0.3838   85.0828  2.6823    0.2804   524.4593
## 12 29.2276 0.1266 0.8611     0.4921 0.7735   19.6242  0.4919    0.2693   451.1575
## 13 25.1512 0.2079 0.9648     0.4956 8.1807  -88.6539 -1.4476    0.2594   483.9497
## 14 31.6067 0.1428 0.9407     0.4541 9.9679  -42.2849 -1.4295    0.2512   357.5982
## 15 28.6378 0.1689 0.8187     0.5513 2.7370  -60.9257 -0.9604    0.2430   368.3593
##    Ptbiserial    Frey McClain   Dunn Hubert SDindex Dindex   SDbw
## 2      0.4744 -0.0609  0.5672 0.0472      0  0.5957 7.3721 0.7241
## 3      0.5864  0.0248  0.6604 0.2590      0  0.4208 6.1734 0.4075
## 4      0.6834  0.5076  0.6790 0.2997      0  0.4083 4.8901 0.3497
## 5      0.6826  2.6401  0.7024 0.3360      0  0.4447 4.5644 0.3380
## 6      0.5574  1.5315  1.1764 0.0583      0  0.6780 4.1481 0.2968
## 7      0.5127  0.2105  1.4380 0.0583      0  0.7699 3.9974 0.2660
## 8      0.5120  0.1956  1.4505 0.0729      0  0.6013 3.5977 0.2825
## 9      0.5118 -0.4712  1.4471 0.0729      0  0.6727 3.5194 0.2775
## 10     0.5259  0.4604  1.3555 0.1278      0  0.6765 3.3753 0.2292
## 11     0.4970  0.5527  1.4692 0.1166      0  0.6530 2.9324 0.2096
## 12     0.4885 -0.0373  1.5052 0.1166      0  0.6509 2.7838 0.1839
## 13     0.4734 -0.1262  1.6879 0.1650      0  0.7505 3.0000 0.1904
## 14     0.4918 -0.9123  1.4990 0.0639      0  0.8799 2.7325 0.1630
## 15     0.4587 -0.5293  1.7779 0.0714      0  0.9286 2.7439 0.1742
## 
## $All.CriticalValues
##    CritValue_Duda CritValue_PseudoT2 Fvalue_Beale
## 2          0.6409           150.7003       1.0000
## 3          0.6373           163.9017       1.0000
## 4          0.5210           160.8866       1.0000
## 5          0.5730           100.5973       1.0000
## 6          0.5873            85.7137       0.7794
## 7          0.5151            80.9573       0.6718
## 8          0.5247           120.4586       1.0000
## 9          0.4921            48.4998       0.1144
## 10         0.4551           111.3709       0.8199
## 11         0.4868            55.8698       0.0487
## 12         0.5301            59.4019       0.6883
## 13         0.3992           151.9816       1.0000
## 14         0.2298           157.5488       1.0000
## 15         0.0819          1075.4679       1.0000
## 
## $Best.nc
##                       KL       CH Hartigan     CCC    Scott      Marriot    TrCovW
## Number_clusters   8.0000  11.0000   4.0000 11.0000   4.0000 4.000000e+00         3
## Value_Index     343.2438 438.3487 235.8276 27.7794 559.0357 1.851296e+12 112156644
##                  TraceW Friedman   Rubin  Cindex      DB Silhouette   Duda PseudoT2
## Number_clusters    4.00  14.0000 14.0000 12.0000 15.0000     4.0000 2.0000   2.0000
## Value_Index     8532.88  96.9302 -9.4244  0.1266  0.8187     0.5576 1.0316  -8.2299
##                   Beale Ratkowsky     Ball PtBiserial Frey McClain  Dunn Hubert SDindex
## Number_clusters  2.0000    4.0000    3.000     4.0000    1  2.0000 5.000      0  4.0000
## Value_Index     -0.0519    0.3672 9630.141     0.6834   NA  0.5672 0.336      0  0.4083
##                 Dindex   SDbw
## Number_clusters      0 14.000
## Value_Index          0  0.163
## 
## $Best.partition
##   [1] 3 4 4 4 2 2 4 2 4 4 2 3 2 2 4 4 4 4 4 3 3 4 1 2 3 4 4 4 4 1 1 1 2 4 1 4 3 2 4 4 1 3
##  [43] 4 2 3 2 2 4 4 2 2 4 2 4 2 3 1 4 4 4 4 4 3 2 3 1 1 3 2 4 2 4 1 4 2 2 1 4 4 1 4 4 4 4
##  [85] 3 4 2 4 2 4 4 4 4 4 3 2 1 4 4 1 3 4 2 2 2 4 1 2 4 3 3 4 3 4 2 3 2 3 4 2 4 4 2 4 1 4
## [127] 4 4 4 2 1 1 2 4 4 1 2 4 4 2 2 3 4 2 2 4 4 2 4 1 4 2 3 4 4 1 4 3 2 4 4 3 4 4 3 2 2 2
## [169] 1 1 4 2 4 4 2 2 4 4 4 2 2 1 1 3 2 1 1 1 1 4 4 4 4 1 2 1 4 2 4 4 2 4 4 4 2 2 1 1 4 4
## [211] 4 2 4 4 2 4 1 4 4 4 1 3 1 2 4 1 1 1 4 4 2 1 4 4 3 2 4 4 4 4 2 2 1 4 1 1 4 4 4 4 3 2
## [253] 4 2 3 4 4 4 3 4 1 4 4 1 4 3 2 2 1 4 4 4 2 4 4 4 4 4 2 4 4 4 4 4 4 2 2 1 1 2 1 2 4 2
## [295] 2 4 1 2 1 2 4 1 4 1 2 2 3 3 4 1 2 2 4 4 4 2 4 2 1 4 4 4 4 4 2 3 4 4 4 2 3 4 2 3 2 2
## [337] 2 4 4 2 2 4 4 2 4 3 4 4 4 4 2 2 4 2 2 4 3 3 2 1 4 4 4 3 4 1 1 2 4 1 4 4 2 4 4 3 4 4
## [379] 4 2 4 4 2 4 2 3 4 1 4 4 1 4 3 4 4 4 4 3 4 1 3 4 2 1 4 4 4 4 2 2 1 3 4 2 4 4 2 2 4 1
## [421] 2 4 2 1 2 2 4 4 2 4 4 4 4 4 2 2 1 2 2 3 1 4 2 4 1 2 4 4 2 4 2 4 4 2 4 4 2 4 4 1 2 4</code></pre>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="consumer-segmentation.html#cb194-1" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(plantbaseddiet[,<span class="fu">c</span>(<span class="st">&#39;a_meat&#39;</span>, <span class="st">&#39;a_dairy&#39;</span>,<span class="st">&#39;a_eggs&#39;</span>)], <span class="at">centers =</span> <span class="dv">4</span>, <span class="at">nstart =</span> <span class="dv">25</span>)</span></code></pre></div>
</div>
<div id="plot-the-model-using-pca" class="section level3 hasAnchor" number="11.3.2">
<h3><span class="header-section-number">11.3.2</span> Plot the model using PCA<a href="consumer-segmentation.html#plot-the-model-using-pca" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The thing is, that now that we are dealing with more than 2 dimensions, it can be harder to visualize, how well the clustering has worked. One way though, is to use Principal Component Analysis (PCA), as PCA aims to describe the most variance from the data as possible, in the fewest dimensions as possible. This means, that if indeed the clusters are a result of variation in the data, a PCA should show it.</p>
<p>For more information on PCA, see <a href="introduction-to-pca-and-multivariate-data.html#introduction-to-pca-and-multivariate-data">Introduction to PCA and multivariate data</a>.</p>
<p>A PCA with the same data as the clustering is created (using the <strong>prcomp</strong>) and plotted (using <strong>ggbiplot</strong>)</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="consumer-segmentation.html#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggbiplot)</span>
<span id="cb195-2"><a href="consumer-segmentation.html#cb195-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb195-3"><a href="consumer-segmentation.html#cb195-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-4"><a href="consumer-segmentation.html#cb195-4" aria-hidden="true" tabindex="-1"></a>PCAmdl <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(plantbaseddiet[,<span class="fu">c</span>(<span class="st">&#39;a_meat&#39;</span>, <span class="st">&#39;a_dairy&#39;</span>,<span class="st">&#39;a_eggs&#39;</span>)], <span class="at">center =</span> T, <span class="at">scale. =</span> F)</span>
<span id="cb195-5"><a href="consumer-segmentation.html#cb195-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggbiplot</span>(PCAmdl, <span class="at">groups =</span> <span class="fu">factor</span>(res<span class="sc">$</span>cluster), <span class="at">ellipse =</span> T)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-110-1.png" width="672" /></p>
</div>
<div id="add-to-dataset" class="section level3 hasAnchor" number="11.3.3">
<h3><span class="header-section-number">11.3.3</span> Add to dataset<a href="consumer-segmentation.html#add-to-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As the clustering is a characteristic for each sample, similar to age, gender, name,… we can simply add it to the dataset.
Here the interpretation from above gives rise to some intuitive names. These can be used directly. Here is how to add it to the dataset:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="consumer-segmentation.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="co">#First, check the centriods, to see if they make sense.</span></span>
<span id="cb196-2"><a href="consumer-segmentation.html#cb196-2" aria-hidden="true" tabindex="-1"></a>res<span class="sc">$</span>centers</span></code></pre></div>
<pre><code>##      a_meat   a_dairy   a_eggs
## 1  4.688508 18.854839 3.601815
## 2  3.719886  5.167045 2.915909
## 3 19.150000 21.850000 7.678571
## 4 18.812500  5.729167 4.492188</code></pre>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="consumer-segmentation.html#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Then matched the label names, according to the plot above.</span></span>
<span id="cb198-2"><a href="consumer-segmentation.html#cb198-2" aria-hidden="true" tabindex="-1"></a>plantbaseddiet<span class="sc">$</span>clusters <span class="ot">&lt;-</span> <span class="fu">factor</span>(res<span class="sc">$</span>cluster,<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&#39;High Meat&#39;</span>,<span class="st">&#39;Low All&#39;</span>,<span class="st">&#39;High Dairy&#39;</span>,<span class="st">&#39;High All&#39;</span>))</span>
<span id="cb198-3"><a href="consumer-segmentation.html#cb198-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-4"><a href="consumer-segmentation.html#cb198-4" aria-hidden="true" tabindex="-1"></a><span class="co">#And here the plot, now with the right labels.</span></span>
<span id="cb198-5"><a href="consumer-segmentation.html#cb198-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggbiplot</span>(PCAmdl, <span class="at">groups =</span> plantbaseddiet<span class="sc">$</span>clusters, <span class="at">ellipse =</span> T)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-111-1.png" width="672" /></p>
</div>
<div id="comments" class="section level3 hasAnchor" number="11.3.4">
<h3><span class="header-section-number">11.3.4</span> Comments<a href="consumer-segmentation.html#comments" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Try to investigate if the number of clusters using gab-statistics and extract between and within variances.</p></li>
<li><p>Plot the different versions using PCA.</p></li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro-to-large-survey-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="profiling-segments.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/mortenarendt/dataanalyssisconsumerscience/edit/master/11_ConsumerSegmentation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/mortenarendt/dataanalyssisconsumerscience/blob/master/11_ConsumerSegmentation.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
